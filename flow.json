[
    {
        "id": "c7141ffb22d64190",
        "type": "tab",
        "label": "Chez Nous Main",
        "disabled": false,
        "info": "",
        "env": [
            {
                "name": "TOPIC",
                "value": "CHEZ_NOUS_MAIN_TOPIC",
                "type": "env"
            },
            {
                "name": "ADDRESS",
                "value": "CHEZ_NOUS_MAIN_ADDRESS",
                "type": "env"
            },
            {
                "name": "KEY",
                "value": "CHEZ_NOUS_MAIN_KEY",
                "type": "env"
            }
        ]
    },
    {
        "id": "c8c4090e523da434",
        "type": "tab",
        "label": "Basement Hue",
        "disabled": false,
        "info": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "BASEMENT_HUE_ADDRESS",
                "type": "env"
            },
            {
                "name": "KEY",
                "value": "BASEMENT_HUE_KEY",
                "type": "env"
            },
            {
                "name": "TOPIC",
                "value": "BASEMENT_HUE_TOPIC",
                "type": "env"
            }
        ]
    },
    {
        "id": "1cf0490e7de2f93d",
        "type": "tab",
        "label": "PowerView",
        "disabled": false,
        "info": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "POWERVIEW_ADDRESS",
                "type": "env"
            }
        ]
    },
    {
        "id": "f03b6ceb81ed7dac",
        "type": "tab",
        "label": "Automation",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "63d8cb10398da04b",
        "type": "tab",
        "label": "Lighting",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "6e3ca82457d27245",
        "type": "tab",
        "label": "Messaging",
        "disabled": false,
        "info": ""
    },
    {
        "id": "72d0b79e8a326b2f",
        "type": "tab",
        "label": "Monitoring",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "15ef8f70203ad77a",
        "type": "tab",
        "label": "Laundry",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1344247d533f754a",
        "type": "tab",
        "label": "Main Bathroom",
        "disabled": false,
        "info": "Main Bathroom home automation integration.",
        "env": []
    },
    {
        "id": "e44149a93fbe9b1b",
        "type": "tab",
        "label": "Main Floor",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "adfd8ae4a2eaf844",
        "type": "tab",
        "label": "Yard",
        "disabled": false,
        "info": "Front Yard home automation integration.",
        "env": []
    },
    {
        "id": "5785c8d9f39df67e",
        "type": "subflow",
        "name": "Send to Hue Bridge",
        "info": "# Overview\n\nSend a message to the API (version 2) on a given Hue Bridge.\n\nSee <https://developers.meethue.com/develop/hue-api-v2/> for details.\n\n_**Note:** the intent is for this subflow to be used for_ every _message sent to a given Hue bridge so as to enforce the rate limits described in the Hue API documentation._\n\n# Configuration\n\n| Environment Variable | Description                         |\n|----------------------|-------------------------------------|\n| `ADDRESS`            | Bridge's IP address                 |\n| `KEY`                | Client access token for the message |\n\n# Input\n\n| Message Property | Description                                                                |\n|------------------|----------------------------------------------------------------------------|\n| `msg.topic`      | API URI, e.g. `resource`, `room/0ca8f049-7ac9-4872-8069-4770834e4f11` etc. |\n| `msg.payload`    | Request body, if any                                                       |\n| `msg.method`     | HTTP request method, e.g. `GET`, `PUT` etc                                 |\n\n# Outputs\n\nIf successful, the HTTP response will be sent as a parsed JSON object in `msg.payload` from output 1.\n\nA standard Node-RED error message will be sent on output 2 if the `http request` node throws an exception.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 100,
                "wires": [
                    {
                        "id": "c9c806d81ab63ac4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 60,
                "wires": [
                    {
                        "id": "20ac42d7649c260a",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1340,
                "y": 160,
                "wires": [
                    {
                        "id": "efe0d39a6aa2a2ea",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            },
            {
                "name": "KEY",
                "type": "env",
                "value": "KEY"
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-send-to-hue-bridge",
            "type": "subflow-send-to-hue-bridge",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Send a command to the Hue Bridge API",
            "keywords": "philips,hue",
            "license": "MIT"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 180,
            "y": 260,
            "wires": [
                {
                    "id": "1e35b6e766e6b3d1",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "75bc72a16c4da2c8",
        "type": "subflow",
        "name": "Create Hue Access Token",
        "info": "# Overview\n\nInvoke the Hue Bridge API to create a client access token.\n\n_**N.B.:** Invoke this subflow within 30 seconds of pressing the button on top of the bridge. Watch the debug console output to see the response. If successful, you will see the generated key among the response payload's properties._\n\nSee <https://developers.meethue.com/develop/hue-api-v2/getting-started/> for details.\n\n# Configuration\n\n| Environment Variable | Description                                    |\n|----------------------|------------------------------------------------|\n|`ADDRESS`             | Bridge's IP address                            |\n| `USERNAME`           | \"User name\" for which a key is being generated |\n\n# Input\n\nIncoming message triggers HTTP request but is otherwise ignored.\n\n# Output\n\nThe HTTP response will be sent as a parsed JSON object. If successful, look for the value of the `msg.payload.success.username` property in the output. That is the string you should use as the access token header in all subsequent Hue Bridge API request messages.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "7316ae1eef4c6295"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 440,
                "y": 40,
                "wires": [
                    {
                        "id": "e4718ecfdb248cc7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            },
            {
                "name": "USERNAME",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-create-hue-access-token",
            "type": "subflow-create-hue-access-token",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Invoke the Hue Bridge API for registering a client",
            "keywords": "philips,hue",
            "license": "MIT"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 440,
            "y": 100,
            "wires": [
                {
                    "id": "64ad1b43047cb836",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9c4e4702e4660adf",
        "type": "subflow",
        "name": "Set PowerView Scene",
        "info": "# Overview\n\nUse the _Hunter Douglas PowerView_&reg; hub API to activate a given window shade scene.\n\nSee <https://motorisation.hde.nl/hd/powerview/general-guides/API/> for details.\n\n# Configuration\n\nThe `ADDRESS` environment variable must be configured with the IP address of the hub.\n\n# Input\n\n`msg.payload` containing the id of the scene to activate.\n\nAll other input message properties are ignored by the subflow but care should be taken not to pass any through that could affect the behavior of a `http request` node in unintended ways.\n\n# Output\n\nHTTP response from the hub.\n\n# Side Effects\n\nIf successful, the window shades will move to the settings defined by the specified scene as configured using the _PowerView_&reg; mobile app.",
        "category": "powerview",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "dcd553804e687131"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 60,
                "wires": [
                    {
                        "id": "8dc3bcf508fc6c98",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1100,
                "y": 160,
                "wires": [
                    {
                        "id": "3c4d11107a4bacaf",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-set-powerview-scene",
            "type": "subflow-set-powerview-scene",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Activate a PowerView scene",
            "keywords": "hunter douglas,powerview",
            "license": "MIT"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 1100,
            "y": 260,
            "wires": [
                {
                    "id": "728ab503eb1eb941",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "dacb5b6825c3fbfa",
        "type": "subflow",
        "name": "Time of Day",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 140,
                "wires": [
                    {
                        "id": "0e4b39aca784ebec"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 840,
                "y": 100,
                "wires": [
                    {
                        "id": "d751bef6d165f80a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 1020,
            "y": 180,
            "wires": [
                {
                    "id": "cac8c868a506ee47",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a8c212909cbdf020",
        "type": "subflow",
        "name": "Theme",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 120,
                "wires": [
                    {
                        "id": "08bccdc6f9f7801c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 780,
                "y": 80,
                "wires": [
                    {
                        "id": "38df9871af85ece2",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 780,
            "y": 160,
            "wires": [
                {
                    "id": "a59c9e1772580440",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "5e6607a62e250494",
        "type": "subflow",
        "name": "Timer Events",
        "info": "",
        "category": "waubesa",
        "in": [],
        "out": [
            {
                "x": 820,
                "y": 60,
                "wires": [
                    {
                        "id": "746fbbdf57805028",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 820,
            "y": 140,
            "wires": [
                {
                    "id": "9a250dd9b68ef942",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c0cc9d812cad7bfc",
        "type": "subflow",
        "name": "Filter Timer Events",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "ade066e6a8d92e9f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 560,
                "y": 40,
                "wires": [
                    {
                        "id": "8596ad874a62f12a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 620,
            "y": 120,
            "wires": [
                {
                    "id": "75c338222950c3e3",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "99c62215b637bb07",
        "type": "subflow",
        "name": "Bedtime Events",
        "info": "",
        "category": "waubesa",
        "in": [],
        "out": [
            {
                "x": 910,
                "y": 60,
                "wires": [
                    {
                        "id": "ad07406cf0e6b107",
                        "port": 0
                    }
                ]
            },
            {
                "x": 820,
                "y": 220,
                "wires": [
                    {
                        "id": "53b63e2bae9ee295",
                        "port": 0
                    },
                    {
                        "id": "801bc206cfa0803d",
                        "port": 0
                    },
                    {
                        "id": "95b7811ecc725e36",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "randomized",
            "minutes"
        ],
        "status": {
            "x": 1040,
            "y": 140,
            "wires": [
                {
                    "id": "05582a4ded12b48c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "3faadb46568c393b",
        "type": "subflow",
        "name": "Shade Automation",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 140,
                "wires": [
                    {
                        "id": "544b63b45a2acc4a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 100,
                "wires": [
                    {
                        "id": "180659bccf4fb07a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 820,
            "y": 180,
            "wires": [
                {
                    "id": "180659bccf4fb07a",
                    "port": 1
                }
            ]
        }
    },
    {
        "id": "4920eed654c67f8d",
        "type": "subflow",
        "name": "Get PowerView Metadata",
        "info": "",
        "category": "powerview",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "465f820637e0f695"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 460,
                "y": 60,
                "wires": [
                    {
                        "id": "e62fe5c7c72b90ee",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-get-powerview-metadata",
            "type": "subflow-get-powerview-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "keywords": "powerview,hunter douglas",
            "license": "MIT"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 660,
            "y": 180,
            "wires": [
                {
                    "id": "014121091f945d16",
                    "port": 0
                },
                {
                    "id": "35c708b92ea8024b",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "454f48125d29e6ef",
        "type": "subflow",
        "name": "Homebridge Switch",
        "info": "# Background\n\nThis subflow implements the Node-RED side of a _Homebridge_ switch using the _mqttthing_ plugin. That plugin uses a confused nomenclature regarding 'get' and 'set' as well as a rather over-engineered repertoire of MQTT messaging that still manages to be missing critical features:\n\n- _mqttthing_ sends a 'set' message each time the user toggles the state of the switch using HomeKit\n\n- _mqttthing_ changes the state of a switch upon receipt of a 'get' message\n\n- _mqttthing_ does **not** send a 'set' message when the switch's state changes due to receipt of a 'get' message.\n\n- rather, _mqttthing_ expects an acknowledging 'get' message after it sends a 'set' message\n\n- _mqttthing_ does _not_ remember the state of a switch across restarts unless Node-RED sends 'get' messages with `retain` set to `true`\n\n- Node-RED does not receive the current state of the switch across restarts unless _mqttthing_ is configured to send 'set' messages with `retain` set to `true`\n\n- when `retain` is `true`, care must be taken not to retrigger any automation or the like at startup (typically using a `filter` node configured to ignore the first message)\n\nIt is up to clients like Node-RED flows to make sense of the confused stream of messages that results, including the fact that 'get' and 'set' have the opposite of their conventional meanings. Clients must also act on 'get' messages rather than 'set', meaning that Node-RED must simply take it on faith that _mqttthing_ will act on them, as well.\n\n# Configuration\n\nNote that this subflow assumes a particular naming convention for _mqttthing_ 'get' and 'set topics as configured by _mqttthing_ in the _Homebridge_ config file:\n\n    homebridge/<name>/get\n    homebridge/<name>/set\n\nGiven that naming convention, each instance of this subflow corresponds to one switch accessory implemented by the _mqttthing_ plugin:\n\n| Environment Variable | Description                                                           |\n|----------------------|-----------------------------------------------------------------------|\n| `NAME`               | The second element of the 'get' and 'set' topics                      |\n| `RETAIN`             | Value for `msg.retain` when sending 'get' messages to the MQTT broker |\n\n# Input\n\nBoolean value to send as the payload of a `get` message.\n\n# Output\n\nPayload of the most recently received `get` message. May be a retained message if `$RETAIN` is set to `true` for a given instance of this subflow.\n\n# Usage\n\nAssuming that a _Homebridge_ switch accessory is implemented by _mqttthing_ configured with 'get' and 'set' topics as described above, sending a boolean value to the input of a corresponding instance of this subflow will set the state of the matching accessory in _HomeKit_. The subflow will also listen for matching 'set' and 'get' messages, such that messages will be emitted on the subflow output corresponding to the changing state of the _HomeKit_ accessory:\n\n- It listens for both 'get' and 'set' messages matching the topics as described above\n\n- It outputs the topic and payload of each `get` message it receives\n\n- It broadcasts a MQTT message on the 'get' topic for each message it receives from the subflow input\n\n- It rebroadcasts a corresponding 'get' message for each matching 'set' message it receives\n\nThe net result (pun intended) is that you can set the _HomeKit_ switch state by injecting a boolean payload into an instance of this subflow and react to asynchronous changes in the switch state by consuming the subflow's output. Depending on how a switch is configured in _mqttthing_ and in the corresponding instance of this subflow, either or both of 'get' and 'set' messages can be retained. This is the only mechanism supported by _mqttthing_ for persisting the state of built in switch accessories across reboots of the _Homebridge_ service.",
        "category": "homebridge",
        "in": [
            {
                "x": 580,
                "y": 60,
                "wires": [
                    {
                        "id": "d3ca376c2c496852"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 850,
                "y": 340,
                "wires": [
                    {
                        "id": "3607b11dc299fa3d",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "NAME",
                "type": "str",
                "value": ""
            },
            {
                "name": "RETAIN",
                "type": "bool",
                "value": "false"
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-homebridge-mqttthing-switch",
            "type": "subflow-homebridge-mqttthing-switch",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Implement Node-RED handling of a toggle switch implemented by the mqttthing plugin for homebridge",
            "keywords": "homebridge,mqttthing",
            "license": "MIT"
        },
        "color": "#AAAA66",
        "inputLabels": [
            "update state"
        ],
        "outputLabels": [
            "current state"
        ],
        "icon": "node-red-dashboard/ui_switch.png",
        "status": {
            "x": 800,
            "y": 400,
            "wires": [
                {
                    "id": "45226efb3ae06fd5",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "d9bf8d1c2a2731bc",
        "type": "subflow",
        "name": "Hue Motion Detected",
        "info": "",
        "category": "hue",
        "in": [],
        "out": [
            {
                "x": 1130,
                "y": 60,
                "wires": [
                    {
                        "id": "c45c8bb094ccb34c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 660,
                "y": 140,
                "wires": [
                    {
                        "id": "60bafd1f28c54a19",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "TOPIC",
                "type": "env",
                "value": "TOPIC"
            },
            {
                "name": "DELAY",
                "type": "num",
                "value": "300000"
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-hue-motion-detected",
            "type": "subflow-hue-motion-detected",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Listen for motion events using the Philips Hue API",
            "keywords": "philips,hue,motion",
            "license": "MIT"
        },
        "color": "#3FADB5",
        "outputLabels": [
            "automation",
            "raw"
        ],
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 640,
            "y": 220,
            "wires": [
                {
                    "id": "876c2d1d7aff2a2c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c4207c9fe61a900e",
        "type": "subflow",
        "name": "Monitored Event",
        "info": "Handle MQTT messages for topics that match the value of the `TOPIC` environment variable. Such topics are expected to be of the form `cpu/+/attribute`, for some monitored attribute such as `temperature`, `voltage` etc. The second, wildcard elemnt is expected to be the name of the host that sent the particular message being handled. Such messages are cached in the context of a function node in this subflow as an object whose keys are the host names. The value for each host is an object whose key is the name of the attribute and whose value is the value for the most recently received message for that attribute from that host.\n\nFor example, assuming that `${TOPIC}` is configured to be `cpu/+/temperature`, the following sequence of messages:\n\n    cpu/host1/temperature : 31\n    cpu/host2/temperature : 55\n    cpu/host3/temperature : 49\n\nwould result in the cached state becoming:\n\n    {\n        host1: {\n            temperature: 31\n        },\n        host2: {\n            temperature: 55\n        },\n        host5: {\n            temperature: 49\n        }\n    }\n\nIf a subsequent message were received:\n\n    cpu/host2/temperature : 56\n\nthe cached state would be updated to:\n\n    {\n        host1: {\n            temperature: 31\n        },\n        host2: {\n            temperature: 56\n        },\n        host5: {\n            temperature: 49\n        }\n    }\n\n...and so on.\n\nThe subflow has two outputs:\n\n1. A HTML `<table>` representing the cached state for all hosts after updating it upon the receipt of each message, presumably for display using a dashboard _template_ node.\n\n2. The raw event for subsequent processing, e.g. taking action if some CPU overheats.\n\nThe `<table>` emitted for the updated state descibed above would be something like (_extra whitespace and comments inserted here for readability_):\n\n    <table>\n      <!-- optional first row, included if ${HEADER} is true -->\n      <tr>\n        <th>host</th>\n        <th>temperature</th>\n      </tr>\n      <!-- assumes ${UNIT} is set to 'C' -->\n      <tr>\n        <td>host1</td>\n        <td>31C</td>\n      </tr>\n      <tr>\n        <td>host2</td>\n        <td>56C</td>\n      </tr>\n      <tr>\n        <td>host3</td>\n        <td>49C</td>\n      </tr>\n    </table>\n\nAs noted in the HTML comments, the formatting of the `<table>` can be tweaked by two additional environment variables:\n\n- The value of `UNIT`, which defaults to the empty string, will be appended to each value in the second column.\n\n- The first, `<th>`, row will only be included in the HTML output if the value of `HEADER` is `true`.",
        "category": "waubesa",
        "in": [],
        "out": [
            {
                "x": 530,
                "y": 80,
                "wires": [
                    {
                        "id": "5c5acf089b206c21",
                        "port": 0
                    }
                ]
            },
            {
                "x": 360,
                "y": 160,
                "wires": [
                    {
                        "id": "112df8f0c03fc7e8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "TOPIC",
                "type": "str",
                "value": ""
            },
            {
                "name": "UNIT",
                "type": "str",
                "value": ""
            },
            {
                "name": "HEADER",
                "type": "bool",
                "value": "false"
            }
        ],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "html",
            "raw"
        ],
        "status": {
            "x": 340,
            "y": 240,
            "wires": [
                {
                    "id": "f1901e3f3d155ae5",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "4e89e7c952d56c09",
        "type": "subflow",
        "name": "Hue to MQTT",
        "info": "# Overview\n\nThis subflow:\n\n- Caches the state of Philips Hue devices in flow context using the response  to an invocation of the `/resource` end-point of the [Philips Hue Bridge V2 API](https://developers.meethue.com/develop/hue-api-v2/api-reference/#resource).\n\n- Outputs a stream of individual event messages as the cached devices' states change by subscribing to [SSE messages](https://developers.meethue.com/develop/hue-api-v2/core-concepts/#events).\n\nEach event message will have appropriate MQTT topic, QoS and retain properties set in addition to the payload sent by the Hue bridge.\n\n_**Note:** the `switch` node named \"filter resources\" in this subflow is used to restrict the number of messages processed at startup to only those types of resources likely to be of interest to Node-RED based automation. This means that over time you will receive SSE messages for resources whose state did not appear in the initial output from this subflow. If you wish for 100% consistency across all resource types, remove the \"filter resources\" node from between the two `split` nodes, but be warned that will cause a much larger volume of MQTT messaging each time your flows are restarted._\n\n# Dependency\n\n[node-red-contrib-sse-client](https://flows.nodered.org/node/node-red-contrib-sse-client)\n\n# Configuration\n\nA separate subflow instance can be created for each Hue bridge by using the following configuration variables:\n\n| Environment Variable | Description                                                             |\n|----------------------|-------------------------------------------------------------------------|\n| `ADDRESS`            | IP address of the Hue bridge                                            |\n| `KEY`                | \"Client key\" for the Hue bridge API<sup>*</sup>                         |\n| `TOPIC`              | String to prepend to each `msg.topic` in the output, as described below |\n\n<sup>*</sup>_See <https://developers.meethue.com/develop/hue-api-v2/getting-started/> for details. Use the_ Create Hue Access Token _subflow to obtain such a key._\n\n# Input\n\nResponse from a successful call to the `/resource` end-point of the [Philips Hue Bridge V2 API](https://developers.meethue.com/develop/hue-api-v2/api-reference/#resource) in `msg.payload`.\n\n# Output\n\nAn ongoing sequence of message objects representing the state of each device as reported by [SSE](https://developers.meethue.com/develop/hue-api-v2/core-concepts/#events). Each message will have the following properties set:\n\n| Property | Value |\n|-|-|\n| `msg.topic` | `${TOPIC}/<type>/<id>` where `<type>` and `<id>` are the identifiers for a given \"resource\" as reported by the Hue bridge API. |\n| `msg.qos` | 2 |\n| `msg.retain` | `true` |\n| `msg.payload` | The current state of the given \"resource\"<sup>**</sup> |\n\n<sup>**</sup>_Note that each output message will contain a combined set of properties for each \"resource\" received across multiple API responses and SSE messages. This mitigates one of the many issues with the design of the Philips Hue API. The cached state is maintained in flow context at runtime and as retained MQTT messages across reboots._",
        "category": "hue",
        "in": [
            {
                "x": 60,
                "y": 160,
                "wires": [
                    {
                        "id": "b3c5813303ac7896"
                    },
                    {
                        "id": "98d7f50f7db89d4d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 850,
                "y": 100,
                "wires": [
                    {
                        "id": "7972bbcf134f786b",
                        "port": 0
                    },
                    {
                        "id": "f3d6eb631a33249c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 650,
                "y": 200,
                "wires": [
                    {
                        "id": "74ccf37d5b5cc460",
                        "port": 2
                    },
                    {
                        "id": "1acee9fedddd46bc",
                        "port": 0
                    },
                    {
                        "id": "b3c5813303ac7896",
                        "port": 2
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            },
            {
                "name": "KEY",
                "type": "env",
                "value": "KEY"
            },
            {
                "name": "TOPIC",
                "type": "env",
                "value": "TOPIC"
            }
        ],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-hue-to-mqtt",
            "type": "subflow-hue-to-mqtt",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Process SSE events arising from the Hue Bridge API",
            "keywords": "philips,hue,sse",
            "license": "MIT"
        },
        "color": "#3FADB5",
        "outputLabels": [
            "mqtt",
            "error"
        ],
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 620,
            "y": 300,
            "wires": [
                {
                    "id": "35fad88b119f8f36",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "de620fed3bdb7aa9",
        "type": "subflow",
        "name": "Hue SSE",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 700,
                "y": 60,
                "wires": [
                    {
                        "id": "eef1022d50fc9776"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1180,
                "y": 80,
                "wires": [
                    {
                        "id": "cdd12e98966ee7c4",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1180,
                "y": 140,
                "wires": [
                    {
                        "id": "cdd12e98966ee7c4",
                        "port": 1
                    }
                ]
            },
            {
                "x": 1180,
                "y": 200,
                "wires": [
                    {
                        "id": "cdd12e98966ee7c4",
                        "port": 2
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            },
            {
                "name": "KEY",
                "type": "env",
                "value": "KEY"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 300,
            "y": 380,
            "wires": [
                {
                    "id": "d901234fd1fce55c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a34d4eb04cf45884",
        "type": "subflow",
        "name": "Hue Resources",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "6b8a0e371954f465"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 880,
                "y": 60,
                "wires": [
                    {
                        "id": "2d8a3e52f4b83d16",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o"
    },
    {
        "id": "4b1f9e8c23fa098d",
        "type": "subflow",
        "name": "Parse Hue Event",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "11642f950d52a63f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 900,
                "y": 60,
                "wires": [
                    {
                        "id": "c4f2d5d0acdf4cc1",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "module": "@parasaurolophus/node-red-subflow-parse-hue-event",
            "type": "subflow-parse-hue-event",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Parse a raw Philips Hue bridge server-sent event",
            "keywords": "philips,hue,sse",
            "license": "MIT"
        },
        "color": "#3FADB5",
        "inputLabels": [
            "raw sse"
        ],
        "outputLabels": [
            "hue event"
        ],
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 1040,
            "y": 140,
            "wires": [
                {
                    "id": "612b03cff3e03da9",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c35ef1735ca5a56b",
        "type": "subflow",
        "name": "Get PowerView Configuration",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 40,
                "y": 60,
                "wires": [
                    {
                        "id": "b4f2cc634373bb02"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1240,
                "y": 60,
                "wires": [
                    {
                        "id": "bd4a23ce7c2889c7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "env",
                "value": "ADDRESS"
            }
        ],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 1240,
            "y": 140,
            "wires": [
                {
                    "id": "7aa9b3895743736e",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "ea7b9754db9fd0cd",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard sunset scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "af712bf4ec4004b4",
            "18f53b7627e645e4",
            "b22f3931c3a7aaa9",
            "34a695c0d0260e5a",
            "d07f9471a4a06ae8",
            "74a870cad9944a03"
        ],
        "x": 134,
        "y": 119
    },
    {
        "id": "afbdc8b60c682c85",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard jolly scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "074874e0ff13a7b1",
            "a5ea4f7eb61a9136",
            "60976d31a8dafe99",
            "256ba437f41dfbcf",
            "6cf088c77229de1d",
            "40657a16668306c1"
        ],
        "x": 134,
        "y": 419
    },
    {
        "id": "1ce03cecd5db8bc6",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Turn off main floor lights group using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "07ccb0b07e6fada8",
            "4baea86ab327a4b9",
            "ec1b9da9a2a0dde0",
            "33533dc0ac4ff870",
            "2efdae9d98c90cf9",
            "76e95a00d6e3b9ad"
        ],
        "x": 94,
        "y": 39
    },
    {
        "id": "3483ce20c1996e6c",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor nightlight scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3ed1a4d37d1548b4",
            "53509cbc2f897eb4",
            "7b10a17dd5bc4c0f",
            "1462dac4d5543f0a",
            "c4ad8310f9a121b0",
            "08d74ad519cdaa27"
        ],
        "x": 94,
        "y": 139
    },
    {
        "id": "96bfb32777af9e2c",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Turn off main bathroom lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "e74fcadba6a2b4ca",
            "4288f4e0d18dbff6",
            "d79164592fe44617"
        ],
        "x": 134,
        "y": 139
    },
    {
        "id": "e936dbad3fb3b587",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Acitvate lighting theme",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "061d8c40c8ed16ab",
            "1993fd8165053adf"
        ],
        "x": 114,
        "y": 151.5
    },
    {
        "id": "cccd3d3ae4af3207",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Fetch the PowerView window shade room and scene metadata from the Chez Nous Shades hub",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1cee4f351bd59563",
            "43794c1d997dcc82",
            "69a6db45ef9f6fdf"
        ],
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 114,
        "y": 39,
        "w": 652,
        "h": 82
    },
    {
        "id": "5a2c18585609cfae",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Activate main bathroom nightlight scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "a4c3ecea47eed101",
            "fbd53f7f18ca6655",
            "26ad3b6fd956be59"
        ],
        "x": 134,
        "y": 39
    },
    {
        "id": "2238e89a8f0c976d",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Turn off yard lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ec4c4a28a59d105e",
            "fb388fbfb4e38ca3",
            "dc1d9849661717f1"
        ],
        "x": 134,
        "y": 19
    },
    {
        "id": "e1fa765ec5a5ebd7",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor sunset scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6cae9b1ccc68cb9e",
            "8ae7ee0c87df1191",
            "edc2f01358673517",
            "76f3eb6c53a0310c",
            "66b239fbae02c252",
            "c99382ee9ae33d16"
        ],
        "x": 94,
        "y": 239
    },
    {
        "id": "dd577488786042ba",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard spooky scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "29a6f065ab64d562",
            "53afc06e5cea0b0d",
            "a225232dc86a3b6f",
            "ce692ff752c427a6",
            "9fd4f397e5d23392",
            "ecf996995825cb3e"
        ],
        "x": 134,
        "y": 319
    },
    {
        "id": "0117b53379eade19",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard tribal scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "816be5cd3b82bf0b",
            "ed68842beab6579e",
            "a6475288998b4e07",
            "35ec7b633401cd2e",
            "c5dfb48af9335c64",
            "2e85bfabe8b4104b"
        ],
        "x": 134,
        "y": 219
    },
    {
        "id": "70e9b8db12799d18",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Send requests to the Hue API on the Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "14e5342cb50f366f",
            "7df3e5fbd6e9aa8a",
            "3b5ab296575b53d4",
            "3d10aa8bd0cedc9f",
            "72e37380ef01d245",
            "4d0cd6535cb6e444"
        ],
        "x": 34,
        "y": 139
    },
    {
        "id": "2afac67683a580f7",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Window shade automation",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3c70a7443900cb3f",
            "0514602b711a8136",
            "a0985c083540376f"
        ],
        "x": 114,
        "y": 139,
        "w": 532,
        "h": 82
    },
    {
        "id": "9b9a844a8df2769d",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Trigger automation from MQTT",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6f7db4dc310c6c2f",
            "18c9ac4127308f24",
            "c09a00ecb1c547ec",
            "21690efdfa2776cf",
            "114b9703250b5ff7"
        ],
        "x": 34,
        "y": 439,
        "w": 462,
        "h": 202
    },
    {
        "id": "daced5cc49fcef0a",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "UI for enabling automation",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f086604c46663235",
            "9810ca9f681aaebf",
            "6ccc90dff91a1ab2",
            "657090175f7253d6",
            "e3599caac9ca8f69"
        ],
        "x": 34,
        "y": 659,
        "w": 962,
        "h": 82
    },
    {
        "id": "6d13af3b8a66acb9",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Send time of day to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6bdf715d945fbc10",
            "305c62d581d22adf",
            "cc0a0bdacb257089",
            "820916d6aef00517",
            "d95bd31d04f2745f"
        ],
        "x": 394,
        "y": 159,
        "w": 512,
        "h": 162
    },
    {
        "id": "31ed5707953578b9",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Send theme to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "c168b5c3119db1de",
            "a3dd9bfc89e0e94a",
            "e309f9054b8afaa3"
        ],
        "x": 394,
        "y": 19,
        "w": 312,
        "h": 122
    },
    {
        "id": "64b945726db0f60a",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "UI for Bedtime",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "bbcb2a37e7e328bb",
            "cf6562b252b0fea0",
            "abe65b742c235eaf",
            "4aa998790c81c0de",
            "01bd7e5d506c131c",
            "58abeb0fb7d59222",
            "c33318ea5eb9ec0a",
            "4924b0104a97ef6d",
            "e4573259bc244ded"
        ],
        "x": 614,
        "y": 379,
        "w": 622,
        "h": 262
    },
    {
        "id": "290b83ef8e01ae0f",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Use within 30 seconds of pressing link button on Chez Nous Main bridge",
        "style": {
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "stroke": "none",
            "fill": "#000000"
        },
        "nodes": [
            "51bce99c75aa12c6",
            "f3ab10cd192709b0",
            "73a1ec5ed8ebc167"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "87285e6bf01cff03",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Activate PowerView scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "2f6cc09457939ce2",
            "7173aa38c9fa93dc",
            "618e79a58ab8143a",
            "b7ae8cdd52579f82"
        ],
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 114,
        "y": 239,
        "w": 382,
        "h": 162
    },
    {
        "id": "6daca851d4692833",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Send requests to the Hue API on the Basement Hue bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ffef2ca7a90d4b74",
            "76de6350a9a0c4fe",
            "3397976f94fcc061",
            "45320d5298dbc090",
            "88c6a3f5073708e6",
            "fb43e90cb6d29a93"
        ],
        "x": 34,
        "y": 139
    },
    {
        "id": "cf29b66e60017a62",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Use within 30 seconds of pressing link button on Basement Hue bridge",
        "style": {
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "stroke": "none",
            "fill": "#000000"
        },
        "nodes": [
            "07b48810bc6739bb",
            "0ed7befa1497d56c",
            "02ae8cd7fbb90513"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "851ce0bce3af3965",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Listen to events from Basement Hue bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "40f1f326e5252bf8",
            "715136c1ddfd2fe4",
            "6dfdb240e3169ffe",
            "6d580e21cbe57c5a",
            "85fbc8b594d1093d",
            "388f01c5394d4c2b",
            "21ea110d0ab4d1b3"
        ],
        "x": 34,
        "y": 359
    },
    {
        "id": "7176639d06e51ae4",
        "type": "group",
        "z": "454f48125d29e6ef",
        "name": "Send 'get' message to change state or acknowledge changed state",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "8c1a2d6f2deaf1d4",
            "396131102099104a",
            "880157c6a43cf7ab",
            "d3ca376c2c496852",
            "9e6f207648497d21",
            "8fbc58fdceaae578"
        ],
        "x": 54,
        "y": 99
    },
    {
        "id": "0bfc5998715c0bc3",
        "type": "group",
        "z": "454f48125d29e6ef",
        "name": "Forward 'get' messages, which reflect updated switch state, to subflow output",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "45226efb3ae06fd5",
            "c56bfc3c002eaffb",
            "197274586411ddf6",
            "6e1a049e6caac0c6",
            "3607b11dc299fa3d"
        ],
        "x": 54,
        "y": 299
    },
    {
        "id": "3d2eaed2a2538cfd",
        "type": "group",
        "z": "15ef8f70203ad77a",
        "name": "Listen for  events from laundry motion sensor",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "cb289ef6a0a1e08d",
            "ed1f053d74d311be",
            "799487ae55534f6d",
            "d123374401361fc9"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "4cd69db148fa9696",
        "type": "group",
        "z": "15ef8f70203ad77a",
        "name": "Debug motion sensor handling logic",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "4a0a7afe4400e3c9",
            "2ad1f0946910cb48"
        ],
        "x": 34,
        "y": 219
    },
    {
        "id": "665df9d682462b5e",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Listen to events from Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "8c9d79d2791e9b02",
            "2d0604f94ef7bff4",
            "4d2dc9a6e42d0548",
            "a31f6417651da697",
            "ba07978d1c64a83f",
            "d74bafa077e6060e",
            "7d283a2fc0d30093"
        ],
        "x": 34,
        "y": 359
    },
    {
        "id": "67b7a3ca46620d16",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "bbd1a868cb325b9d",
            "cb8f9571f345d552",
            "94db8418a725151c"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Chez Nous Main",
                "type": "str"
            }
        ],
        "x": 34,
        "y": 539
    },
    {
        "id": "0d65e7f528cf04df",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "c08c66ea4ac8e129",
            "fe7591ba8a5abf39",
            "56bb6d25d62183a5"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Basement Hue",
                "type": "str"
            }
        ],
        "x": 34,
        "y": 539
    },
    {
        "id": "d62657d45ec04ef6",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "76edfe210688f5be",
            "3221f9b602f34698",
            "6520f43ac52c5b23"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "PowerView",
                "type": "str"
            }
        ],
        "x": 114,
        "y": 419,
        "w": 442,
        "h": 82
    },
    {
        "id": "3d0bb7da508e430c",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "d5d43b7168064963",
            "d1a29315e25ead30",
            "3c1d06c6f301fdd7"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Automation",
                "type": "str"
            }
        ],
        "x": 34,
        "y": 339,
        "w": 442,
        "h": 82
    },
    {
        "id": "45c4e55e53345092",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "197a4d8630c84a2a",
            "e63dc045ae2cbda9",
            "241fd1639703f965"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Lighting",
                "type": "str"
            }
        ],
        "x": 114,
        "y": 339
    },
    {
        "id": "7dcf1dcf10e9c669",
        "type": "group",
        "z": "15ef8f70203ad77a",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "5a43a43f89bf1978",
            "bac16065f61d90fc",
            "833bd2c2e5b9cead"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Laundry",
                "type": "str"
            }
        ],
        "x": 34,
        "y": 319
    },
    {
        "id": "ed5e8d4e70342ad3",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "48a7b08e950de592",
            "324a228d8f5fd903",
            "f51080e45a9d06c2"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Main Bathroom",
                "type": "str"
            }
        ],
        "x": 134,
        "y": 239
    },
    {
        "id": "d74abafd4c4210f0",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1d2763d8aa6b322b",
            "c80eb630555e9759",
            "5cf638af3fd262a3"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Main Floor",
                "type": "str"
            }
        ],
        "x": 94,
        "y": 339
    },
    {
        "id": "6c1ca1a9a6f9d44b",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Send error messages to PushOver",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ca20463966975b44",
            "8986bfe08619e4f9",
            "a4e48977f6abe1d3"
        ],
        "env": [
            {
                "name": "TITLE",
                "value": "Yard",
                "type": "str"
            }
        ],
        "x": 134,
        "y": 519
    },
    {
        "id": "e49c9571ddd5102f",
        "type": "group",
        "z": "6e3ca82457d27245",
        "name": "Send to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f5c7a7580984d067",
            "11b2638982da0e64",
            "dd7609e91ad64f63"
        ],
        "x": 134,
        "y": 39
    },
    {
        "id": "193264abb5beec8a",
        "type": "group",
        "z": "72d0b79e8a326b2f",
        "name": "Send Pushover notification when a Raspberry Pi overheats",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "676a5e70ba119db5",
            "dd312a048f2e6d95",
            "8c8507b03aafcfe4",
            "1b458bf6e640c398",
            "de0bf1bd606626f9"
        ],
        "x": 34,
        "y": 139
    },
    {
        "id": "4e41b9100f8f8543",
        "type": "group",
        "z": "72d0b79e8a326b2f",
        "name": "Display total memory on dashboard",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3d75a5e09a0ecd62",
            "8af8ae86062519c0"
        ],
        "x": 34,
        "y": 39
    },
    {
        "id": "e44a66a067f447ec",
        "type": "group",
        "z": "72d0b79e8a326b2f",
        "name": "Display volts on dashboard",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "0b532eb32d81dbd8",
            "af81cf531f5ae030"
        ],
        "x": 34,
        "y": 319
    },
    {
        "id": "969faaf2c50ec623",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Monitor Hue events as an aid in development and debugging",
        "style": {
            "stroke": "none",
            "fill": "#ff0000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "7cdf7a5cc4f436ad",
            "712edf6d3dd2df77",
            "41d6e4533b1fca83"
        ],
        "x": 114,
        "y": 439
    },
    {
        "id": "1723570f3a1a07a2",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Current time each minute",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "25b9375f737e85e2",
            "d32948683f33a7d6"
        ],
        "x": 34,
        "y": 119,
        "w": 332,
        "h": 82
    },
    {
        "id": "1fc278393a2508e0",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Evening",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "2837183323a61e04",
            "7ab1620c3349854b",
            "c68369c3781694e3",
            "b0ee0f2f8155fe9b",
            "e270017761dfd27d",
            "1b13b81c68a08cdd",
            "5ba41e8325888c23"
        ],
        "x": 594,
        "y": 59
    },
    {
        "id": "edbd733b188dccef",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Morning",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "981dbc2364b09d66"
        ],
        "x": 374,
        "y": 79
    },
    {
        "id": "09742b69ee691d31",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Night",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "549a2335fb839c37"
        ],
        "x": 374,
        "y": 239
    },
    {
        "id": "d606b55cf1d68352",
        "type": "group",
        "z": "de620fed3bdb7aa9",
        "name": "Subscribe to server-sent events",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "cdd12e98966ee7c4",
            "eef1022d50fc9776"
        ],
        "x": 774,
        "y": 91.5,
        "info": "| Env Var   | Description                            |\n|-----------|----------------------------------------|\n| `ADDRESS` | IP address of Hue Bridge               |\n| `KEY`     | Value for `hue-application-key` header |"
    },
    {
        "id": "666b7004db0b97b6",
        "type": "group",
        "z": "de620fed3bdb7aa9",
        "name": "Handle connection state changes",
        "style": {
            "stroke": "none",
            "fill": "#ff0000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "d901234fd1fce55c",
            "fabe0aac918a0c99",
            "c97d943953f14d84",
            "084266e8becbe572"
        ],
        "x": 54,
        "y": 159
    },
    {
        "id": "e79e0110c2317edb",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "",
        "keyname": "",
        "caname": "",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "63c00f105cc3255f",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#9929bd",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#9929bd",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#9929bd",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#bb58db",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#9929bd",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Waubesa",
            "hideToolbar": "false",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "MM/DD/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "722d62f3b93039c3",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.local",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ec4d94df679f3b11",
        "type": "ui_tab",
        "name": "Automation",
        "icon": "fa-clock-o",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ad4d885f83f029a5",
        "type": "ui_group",
        "name": "Bedtime",
        "tab": "ec4d94df679f3b11",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "25c7f0078ed443dd",
        "type": "ui_group",
        "name": "Automation",
        "tab": "ec4d94df679f3b11",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "dc6e107af698a0c3",
        "type": "ui_group",
        "name": "CPU Temperature",
        "tab": "696b8efb10ee13b7",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "0a1d0e699afa7c7d",
        "type": "ui_group",
        "name": "CPU Memory",
        "tab": "696b8efb10ee13b7",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "c0e45b2d232372dc",
        "type": "ui_spacer",
        "z": "f03b6ceb81ed7dac",
        "name": "spacer",
        "group": "ad4d885f83f029a5",
        "order": 3,
        "width": "6",
        "height": "2"
    },
    {
        "id": "cfa1a0f4a477687c",
        "type": "ui_group",
        "name": "CPU Volts",
        "tab": "696b8efb10ee13b7",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "696b8efb10ee13b7",
        "type": "ui_tab",
        "name": "Monitoring",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "c9c806d81ab63ac4",
        "type": "delay",
        "z": "5785c8d9f39df67e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 150,
        "y": 100,
        "wires": [
            [
                "fa870f94fa1ea10b"
            ]
        ]
    },
    {
        "id": "fa870f94fa1ea10b",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"hue-application-key\": $env('KEY')}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/clip/v2/' & topic",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 100,
        "wires": [
            [
                "20ac42d7649c260a"
            ]
        ]
    },
    {
        "id": "20ac42d7649c260a",
        "type": "http request",
        "z": "5785c8d9f39df67e",
        "name": "",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "e79e0110c2317edb",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 490,
        "y": 100,
        "wires": [
            [
                "dec3142afded5d64"
            ]
        ]
    },
    {
        "id": "1e35b6e766e6b3d1",
        "type": "status",
        "z": "5785c8d9f39df67e",
        "name": "",
        "scope": [
            "c9c806d81ab63ac4"
        ],
        "x": 80,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e38ca1a2d8358f5c",
        "type": "catch",
        "z": "5785c8d9f39df67e",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 840,
        "y": 200,
        "wires": [
            [
                "4dc15960ecb2271f"
            ]
        ]
    },
    {
        "id": "ddd27f7d210301e9",
        "type": "switch",
        "z": "5785c8d9f39df67e",
        "name": "payload.errors?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "$exists(payload.errors) and $type(payload.errors) = 'array' and $count(payload.errors) > 0",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 840,
        "y": 140,
        "wires": [
            [
                "d83b5db7bed1444a"
            ],
            [
                "196a5495258c725a"
            ]
        ]
    },
    {
        "id": "d83b5db7bed1444a",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "method & ' ' & url & ': ' & $join($map(payload.errors,function ($value) { $value.description }),' ') & ' (' & statusCode & ')'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 120,
        "wires": [
            [
                "efe0d39a6aa2a2ea"
            ]
        ]
    },
    {
        "id": "4dc15960ecb2271f",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 200,
        "wires": [
            [
                "efe0d39a6aa2a2ea"
            ]
        ]
    },
    {
        "id": "196a5495258c725a",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "method & ' ' & url & ': ' & $string(payload,true) & ' (' & statusCode & ')'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 160,
        "wires": [
            [
                "efe0d39a6aa2a2ea"
            ]
        ]
    },
    {
        "id": "dec3142afded5d64",
        "type": "switch",
        "z": "5785c8d9f39df67e",
        "name": "error status?",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "$not($type(statusCode) = 'number') or statusCode < 200 or statusCode > 299",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 670,
        "y": 140,
        "wires": [
            [
                "ddd27f7d210301e9"
            ]
        ]
    },
    {
        "id": "efe0d39a6aa2a2ea",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":payload}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1220,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "e4718ecfdb248cc7",
        "type": "http request",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "e79e0110c2317edb",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7316ae1eef4c6295",
        "type": "change",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"devicetype\":$env('USERNAME'),\"generateclientkey\":true}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/api'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 40,
        "wires": [
            [
                "e4718ecfdb248cc7"
            ]
        ]
    },
    {
        "id": "64ad1b43047cb836",
        "type": "status",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "scope": [
            "e4718ecfdb248cc7"
        ],
        "x": 340,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "cd442f62fd059172",
        "type": "change",
        "z": "9c4e4702e4660adf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/scenes?sceneId=' & payload",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 100,
        "wires": [
            [
                "8dc3bcf508fc6c98"
            ]
        ]
    },
    {
        "id": "8dc3bcf508fc6c98",
        "type": "http request",
        "z": "9c4e4702e4660adf",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 490,
        "y": 100,
        "wires": [
            [
                "483ed6fa38cb1d90"
            ]
        ]
    },
    {
        "id": "728ab503eb1eb941",
        "type": "status",
        "z": "9c4e4702e4660adf",
        "name": "",
        "scope": [
            "dcd553804e687131"
        ],
        "x": 1000,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "dcd553804e687131",
        "type": "delay",
        "z": "9c4e4702e4660adf",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 170,
        "y": 100,
        "wires": [
            [
                "cd442f62fd059172"
            ]
        ]
    },
    {
        "id": "483ed6fa38cb1d90",
        "type": "switch",
        "z": "9c4e4702e4660adf",
        "name": "",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "$not($type(statusCode) = 'number') or statusCode < 200 or statusCode > 299",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 140,
        "wires": [
            [
                "3fbd915e8925cefa"
            ]
        ]
    },
    {
        "id": "eeb1af9b4015bfae",
        "type": "catch",
        "z": "9c4e4702e4660adf",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 620,
        "y": 180,
        "wires": [
            [
                "1edba758e68310af"
            ]
        ]
    },
    {
        "id": "3fbd915e8925cefa",
        "type": "change",
        "z": "9c4e4702e4660adf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "method & ' ' & url & ': ' & payload & ' (' & statusCode & ')'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 140,
        "wires": [
            [
                "3c4d11107a4bacaf"
            ]
        ]
    },
    {
        "id": "1edba758e68310af",
        "type": "change",
        "z": "9c4e4702e4660adf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 180,
        "wires": [
            [
                "3c4d11107a4bacaf"
            ]
        ]
    },
    {
        "id": "3c4d11107a4bacaf",
        "type": "change",
        "z": "9c4e4702e4660adf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"PowerView\",\"message\":payload}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "d751bef6d165f80a",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/time",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 140,
        "wires": [
            [
                "cac8c868a506ee47"
            ]
        ]
    },
    {
        "id": "c806589e8a366a64",
        "type": "rbe",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 550,
        "y": 140,
        "wires": [
            [
                "d751bef6d165f80a"
            ]
        ]
    },
    {
        "id": "dde60f377e1b1422",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "night",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "payload.sunrise",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "night",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 220,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "6eb1d61b36d3aa8c",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "evening",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "bedtime.value",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "evening",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 180,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "481da96762bb17bf",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "afternoon",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "payload.sunset",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "afternoon",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 140,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "d76f3b48f065a8a0",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "midday",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "payload.sunset - 300",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "midday",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 100,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "b8d28399f3fa7b97",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "morning",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "payload.sunrise + 300",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "morning",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 60,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "0e4b39aca784ebec",
        "type": "switch",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "property": "payload.now",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "payload.sunrise",
                "vt": "msg",
                "v2": "payload.sunrise + 300",
                "v2t": "jsonata"
            },
            {
                "t": "btwn",
                "v": "payload.sunrise + 300",
                "vt": "jsonata",
                "v2": "payload.sunset - 300",
                "v2t": "jsonata"
            },
            {
                "t": "btwn",
                "v": "payload.sunset - 300",
                "vt": "jsonata",
                "v2": "payload.sunset",
                "v2t": "msg"
            },
            {
                "t": "btwn",
                "v": "payload.sunset",
                "vt": "msg",
                "v2": "payload.bedtime",
                "v2t": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 150,
        "y": 140,
        "wires": [
            [
                "b8d28399f3fa7b97"
            ],
            [
                "d76f3b48f065a8a0"
            ],
            [
                "481da96762bb17bf"
            ],
            [
                "6eb1d61b36d3aa8c"
            ],
            [
                "dde60f377e1b1422"
            ]
        ],
        "inputLabels": [
            "suncalc"
        ]
    },
    {
        "id": "cac8c868a506ee47",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":payload & '|' & next,\"shape\":\"dot\",\"fill\":\"blue\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "08bccdc6f9f7801c",
        "type": "switch",
        "z": "a8c212909cbdf020",
        "name": "",
        "property": "payload.date",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload.date[0] = 7 and payload.date[1] <= 4",
                "vt": "jsonata"
            },
            {
                "t": "jsonata_exp",
                "v": "payload.date[0] = 10",
                "vt": "jsonata"
            },
            {
                "t": "jsonata_exp",
                "v": "payload.date[0] = 12",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 150,
        "y": 120,
        "wires": [
            [
                "1042a01f878d81fc"
            ],
            [
                "964cd017e5ab1233"
            ],
            [
                "63c353ca236903e4"
            ],
            [
                "94b3fbe3f487d73d"
            ]
        ],
        "inputLabels": [
            "month day"
        ],
        "outputLabels": [
            "tribal",
            "spooky",
            "jolly",
            "standard"
        ]
    },
    {
        "id": "1042a01f878d81fc",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "tribal",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tribal",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 60,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "964cd017e5ab1233",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "spooky",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "spooky",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 100,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "63c353ca236903e4",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "jolly",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "jolly",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 140,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "27c8bfa76d69ec10",
        "type": "rbe",
        "z": "a8c212909cbdf020",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 490,
        "y": 120,
        "wires": [
            [
                "38df9871af85ece2",
                "a59c9e1772580440"
            ]
        ]
    },
    {
        "id": "38df9871af85ece2",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/theme",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "94b3fbe3f487d73d",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "standard",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "standard",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 180,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "a59c9e1772580440",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":payload,\"shape\":\"dot\",\"fill\":\"blue\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "746fbbdf57805028",
        "type": "change",
        "z": "5e6607a62e250494",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.nodered/automation/time",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "7d20d56418fedf3f",
        "type": "join",
        "z": "5e6607a62e250494",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 530,
        "y": 100,
        "wires": [
            [
                "746fbbdf57805028",
                "9a250dd9b68ef942"
            ]
        ]
    },
    {
        "id": "e098c5d7e9450dd5",
        "type": "mqtt in",
        "z": "5e6607a62e250494",
        "name": "",
        "topic": "nodered/automation/time",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 60,
        "wires": [
            [
                "7d20d56418fedf3f"
            ]
        ]
    },
    {
        "id": "70c17cd9796efba6",
        "type": "change",
        "z": "5e6607a62e250494",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "theme",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 140,
        "wires": [
            [
                "7d20d56418fedf3f"
            ]
        ]
    },
    {
        "id": "2c97c0cb7f3a6bf2",
        "type": "mqtt in",
        "z": "5e6607a62e250494",
        "name": "",
        "topic": "nodered/automation/theme",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 140,
        "wires": [
            [
                "70c17cd9796efba6"
            ]
        ]
    },
    {
        "id": "9a250dd9b68ef942",
        "type": "change",
        "z": "5e6607a62e250494",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":$lookup(payload,'nodered/automation/theme') & ' | ' & $lookup(payload,'nodered/automation/time'),\"shape\":\"dot\",\"fill\":\"blue\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "7e0f3fe17df64e47",
        "type": "switch",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "property": "enable",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 80,
        "wires": [
            [
                "8596ad874a62f12a",
                "75c338222950c3e3"
            ]
        ]
    },
    {
        "id": "8596ad874a62f12a",
        "type": "rbe",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 470,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "ade066e6a8d92e9f",
        "type": "change",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enable",
                "pt": "msg",
                "to": "enable-automation",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 80,
        "wires": [
            [
                "7e0f3fe17df64e47"
            ]
        ]
    },
    {
        "id": "75c338222950c3e3",
        "type": "change",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":payload & ' | ' & enable,\"shape\":\"dot\",\"fill\":\"blue\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "53b63e2bae9ee295",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "minutes",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.minutes",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "bd0f775ed7cbd4db",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bedtime",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 100,
        "wires": [
            [
                "ad07406cf0e6b107"
            ]
        ]
    },
    {
        "id": "95b7811ecc725e36",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bedtime.minutes",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "801bc206cfa0803d",
        "type": "trigger",
        "z": "99c62215b637bb07",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "date",
        "duration": "5",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 280,
        "y": 220,
        "wires": [
            [],
            [
                "95b7811ecc725e36"
            ]
        ]
    },
    {
        "id": "79709f226d61bff5",
        "type": "function",
        "z": "99c62215b637bb07",
        "name": "bedtimeOptions",
        "func": "return",
        "outputs": 1,
        "noerr": 0,
        "initialize": "setTimeout(() => {\n\n    /**\n     * @param {string | number} n\n     */\n    function pad(n) {\n\n        return ('00' + n).slice(-2)\n\n    }\n\n    const options = []\n\n    for (let minutes = 1260; minutes <= 1380; minutes += 30) {\n\n        const label = pad(Math.floor(minutes / 60)) + ':' + pad(minutes % 60)\n        const option = {}\n\n        option[label] = minutes\n        options.push(option)\n\n    }\n\n    node.send({\n        options: options\n    })\n\n}, 500)",
        "finalize": "",
        "libs": [],
        "x": 120,
        "y": 220,
        "wires": [
            [
                "801bc206cfa0803d"
            ]
        ]
    },
    {
        "id": "d14437a6d1d7550f",
        "type": "mqtt in",
        "z": "99c62215b637bb07",
        "name": "",
        "topic": "nodered/automation/bedtime",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 280,
        "y": 140,
        "wires": [
            [
                "53b63e2bae9ee295",
                "bd0f775ed7cbd4db"
            ]
        ]
    },
    {
        "id": "05582a4ded12b48c",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":payload,\"shape\":\"dot\",\"fill\":\"blue\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "ad07406cf0e6b107",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 100,
        "wires": [
            [
                "05582a4ded12b48c"
            ]
        ]
    },
    {
        "id": "544b63b45a2acc4a",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 140,
        "wires": [
            [
                "3c8760abbe1cc1f0"
            ]
        ]
    },
    {
        "id": "9510d565922cee60",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "morning",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "17655",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 60,
        "wires": [
            [
                "180659bccf4fb07a"
            ]
        ]
    },
    {
        "id": "b75cbddfc0f235a6",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "midday",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "47566",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 100,
        "wires": [
            [
                "180659bccf4fb07a"
            ]
        ]
    },
    {
        "id": "d89856d0dc7d511e",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "afternoon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "44035",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 140,
        "wires": [
            [
                "180659bccf4fb07a"
            ]
        ]
    },
    {
        "id": "1a05bd72e44cdf99",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "evening",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "32086",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 180,
        "wires": [
            [
                "180659bccf4fb07a"
            ]
        ]
    },
    {
        "id": "d3050f347fbb26fd",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "night",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "31086",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 220,
        "wires": [
            [
                "180659bccf4fb07a"
            ]
        ]
    },
    {
        "id": "3c8760abbe1cc1f0",
        "type": "switch",
        "z": "3faadb46568c393b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "midday",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "afternoon",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "evening",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "night",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 310,
        "y": 140,
        "wires": [
            [
                "9510d565922cee60"
            ],
            [
                "b75cbddfc0f235a6"
            ],
            [
                "d89856d0dc7d511e"
            ],
            [
                "1a05bd72e44cdf99"
            ],
            [
                "d3050f347fbb26fd"
            ]
        ],
        "inputLabels": [
            "suncalc"
        ],
        "outputLabels": [
            "morning",
            "midday",
            "afternoon",
            "evening",
            "night"
        ]
    },
    {
        "id": "180659bccf4fb07a",
        "type": "function",
        "z": "3faadb46568c393b",
        "name": "status",
        "func": "\nreturn [\n    msg,\n    {\n        text: msg.payload,\n        shape: 'dot',\n        fill: 'blue'\n    }\n]",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 140,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "465f820637e0f695",
        "type": "change",
        "z": "4920eed654c67f8d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/' & topic & '/'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 100,
        "wires": [
            [
                "e62fe5c7c72b90ee"
            ]
        ]
    },
    {
        "id": "e62fe5c7c72b90ee",
        "type": "http request",
        "z": "4920eed654c67f8d",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 100,
        "wires": [
            [
                "35c708b92ea8024b"
            ]
        ]
    },
    {
        "id": "014121091f945d16",
        "type": "status",
        "z": "4920eed654c67f8d",
        "name": "",
        "scope": [
            "e62fe5c7c72b90ee"
        ],
        "x": 540,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "35c708b92ea8024b",
        "type": "change",
        "z": "4920eed654c67f8d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":statusCode,\"shape\":\"dot\",\"fill\":(statusCode = 200 ? \"green\" : (statusCode < 200 or statusCode > 299 ? \"red\": \"yellow\"))}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "8c1a2d6f2deaf1d4",
        "type": "mqtt in",
        "z": "454f48125d29e6ef",
        "g": "7176639d06e51ae4",
        "name": "set in",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 550,
        "y": 220,
        "wires": [
            [
                "d3ca376c2c496852"
            ]
        ]
    },
    {
        "id": "45226efb3ae06fd5",
        "type": "mqtt in",
        "z": "454f48125d29e6ef",
        "g": "0bfc5998715c0bc3",
        "name": "get in",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 550,
        "y": 380,
        "wires": [
            [
                "3607b11dc299fa3d"
            ]
        ]
    },
    {
        "id": "c56bfc3c002eaffb",
        "type": "status",
        "z": "454f48125d29e6ef",
        "g": "0bfc5998715c0bc3",
        "name": "get in",
        "scope": [
            "45226efb3ae06fd5"
        ],
        "x": 130,
        "y": 380,
        "wires": [
            [
                "197274586411ddf6"
            ]
        ]
    },
    {
        "id": "396131102099104a",
        "type": "status",
        "z": "454f48125d29e6ef",
        "g": "7176639d06e51ae4",
        "name": "set in",
        "scope": [
            "8c1a2d6f2deaf1d4"
        ],
        "x": 130,
        "y": 220,
        "wires": [
            [
                "880157c6a43cf7ab"
            ]
        ]
    },
    {
        "id": "197274586411ddf6",
        "type": "switch",
        "z": "454f48125d29e6ef",
        "g": "0bfc5998715c0bc3",
        "name": "",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node-red:common.status.connected",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 250,
        "y": 380,
        "wires": [
            [
                "6e1a049e6caac0c6"
            ]
        ]
    },
    {
        "id": "880157c6a43cf7ab",
        "type": "switch",
        "z": "454f48125d29e6ef",
        "g": "7176639d06e51ae4",
        "name": "",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node-red:common.status.connected",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 250,
        "y": 220,
        "wires": [
            [
                "9e6f207648497d21"
            ]
        ]
    },
    {
        "id": "d3ca376c2c496852",
        "type": "change",
        "z": "454f48125d29e6ef",
        "g": "7176639d06e51ae4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'homebridge/' & $env('NAME') & '/get/on'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "RETAIN",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 140,
        "wires": [
            [
                "8fbc58fdceaae578"
            ]
        ]
    },
    {
        "id": "9e6f207648497d21",
        "type": "change",
        "z": "454f48125d29e6ef",
        "g": "7176639d06e51ae4",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "subscribe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "{\"topic\":'homebridge/' & $env('NAME') & '/set/on',\"qos\":2}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 220,
        "wires": [
            [
                "8c1a2d6f2deaf1d4"
            ]
        ]
    },
    {
        "id": "6e1a049e6caac0c6",
        "type": "change",
        "z": "454f48125d29e6ef",
        "g": "0bfc5998715c0bc3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "subscribe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "{\"topic\":'homebridge/' & $env('NAME') & '/get/on',\"qos\":2}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 380,
        "wires": [
            [
                "45226efb3ae06fd5"
            ]
        ]
    },
    {
        "id": "3607b11dc299fa3d",
        "type": "rbe",
        "z": "454f48125d29e6ef",
        "g": "0bfc5998715c0bc3",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 690,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "8fbc58fdceaae578",
        "type": "mqtt out",
        "z": "454f48125d29e6ef",
        "g": "7176639d06e51ae4",
        "name": "get out",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 910,
        "y": 140,
        "wires": []
    },
    {
        "id": "d5634a8534afa2ab",
        "type": "comment",
        "z": "454f48125d29e6ef",
        "name": "See subflow documentation for caveats",
        "info": "",
        "x": 210,
        "y": 60,
        "wires": []
    },
    {
        "id": "7d07d15276479daa",
        "type": "mqtt in",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "topic": "${TOPIC}",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 100,
        "wires": [
            [
                "4bae6776bc5db28f"
            ]
        ]
    },
    {
        "id": "4bae6776bc5db28f",
        "type": "switch",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "$exists(payload.motion) and payload.motion.motion_valid\t",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 230,
        "y": 100,
        "wires": [
            [
                "87b720d6cdce6b68"
            ]
        ]
    },
    {
        "id": "87b720d6cdce6b68",
        "type": "change",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.motion.motion",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 100,
        "wires": [
            [
                "60bafd1f28c54a19"
            ]
        ]
    },
    {
        "id": "60bafd1f28c54a19",
        "type": "rbe",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 530,
        "y": 100,
        "wires": [
            [
                "182bd3063c128633"
            ]
        ]
    },
    {
        "id": "182bd3063c128633",
        "type": "change",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "DELAY",
                "tot": "env"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 60,
        "wires": [
            [
                "01d3ac9a4eeb7c5f"
            ]
        ]
    },
    {
        "id": "01d3ac9a4eeb7c5f",
        "type": "switch",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": true,
        "outputs": 2,
        "x": 850,
        "y": 60,
        "wires": [
            [
                "c45c8bb094ccb34c"
            ],
            []
        ]
    },
    {
        "id": "c45c8bb094ccb34c",
        "type": "trigger",
        "z": "d9bf8d1c2a2731bc",
        "name": "watchdog",
        "op1": "",
        "op2": "false",
        "op1type": "pay",
        "op2type": "bool",
        "duration": "5",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 980,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "876c2d1d7aff2a2c",
        "type": "status",
        "z": "d9bf8d1c2a2731bc",
        "name": "",
        "scope": null,
        "x": 540,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "112df8f0c03fc7e8",
        "type": "rbe",
        "z": "c4207c9fe61a900e",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 230,
        "y": 120,
        "wires": [
            [
                "5c5acf089b206c21"
            ]
        ]
    },
    {
        "id": "5c5acf089b206c21",
        "type": "function",
        "z": "c4207c9fe61a900e",
        "name": "formatTable",
        "func": "node.status({\n    text: msg.topic + ':' + msg.payload,\n    shape: 'dot',\n    fill: 'blue'\n})\n\n////////////////////////////////////////////////////////////////////////////////\n//\n// Cache the cumulative state of a monitored attribute (CPU temperature, voltage\n// etc.) for all hosts\n//\n////////////////////////////////////////////////////////////////////////////////\n\nlet topic = msg.topic.split('/')\nlet host = topic[1]\nlet attribute = topic[2]\nlet state = context.get('state') || {}\nlet entry = state[host] || {}\n\nif (msg.payload === undefined || msg.payload == null || msg.payload == '' || Object.prototype.hasOwnProperty.call(msg, 'error')) {\n\n    // handle caught errors by deleting the corresponding\n    // attribute\n    if (Object.prototype.hasOwnProperty.call(entry, attribute)) {\n\n        delete entry[attribute]\n\n    }\n\n    // delete the whole entry if it has no other attributes\n    if (Object.prototype.hasOwnProperty.call(state, host) && Object.keys(entry).length == 0) {\n\n        delete state[host]\n\n    }\n\n} else {\n\n    // update the attribuate corresponding\n    // to the received event\n    entry[attribute] = msg.payload\n    state[host] = entry\n\n}\n\n// persist the updated state\ncontext.set('state', state)\n\n////////////////////////////////////////////////////////////////////////////////\n//\n// Output an HTML <table> containing the values of the given attribute for all\n// hosts for which values have been received\n//\n////////////////////////////////////////////////////////////////////////////////\n\nlet unit = env.get('UNIT')\nlet header = env.get('HEADER')\nlet table = '<table>'\nlet first = true\n\nfor (let host in state) {\n\n    let entry = state[host]\n\n    if (header && first) {\n\n        table += '<tr><th>host</th>'\n\n        for (let attribute in entry) {\n\n            table += '<th>'\n            table += attribute\n            table += '</th>'\n\n        }\n\n        table += '</tr>'\n\n    }\n\n    table += '<tr><td>'\n    table += host\n    table += '</td>'\n\n    for (let attribute in entry) {\n\n        table += '<td>'\n        table += entry[attribute] + unit\n        table += '</td>'\n\n    }\n\n    table  += '</tr>'\n    first = false\n\n}\n\ntable += '</table>'\nmsg.payload = table\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "16a603c223b63b8d",
        "type": "catch",
        "z": "c4207c9fe61a900e",
        "name": "",
        "scope": [
            "7004b9b981e156bb"
        ],
        "uncaught": false,
        "x": 230,
        "y": 40,
        "wires": [
            [
                "5c5acf089b206c21"
            ]
        ]
    },
    {
        "id": "7004b9b981e156bb",
        "type": "mqtt in",
        "z": "c4207c9fe61a900e",
        "name": "",
        "topic": "${TOPIC}",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 100,
        "y": 120,
        "wires": [
            [
                "112df8f0c03fc7e8"
            ]
        ]
    },
    {
        "id": "f1901e3f3d155ae5",
        "type": "status",
        "z": "c4207c9fe61a900e",
        "name": "",
        "scope": null,
        "x": 240,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "7972bbcf134f786b",
        "type": "function",
        "z": "4e89e7c952d56c09",
        "name": "updateState",
        "func": "node.status({\n    text: msg.topic + ' ' + msg.payload.type,\n    shape: 'dot',\n    fill: 'blue'\n})\n\nconst state = flow.get('state') || {}\nconst type = state[msg.payload.type] || {}\nconst resource = type[msg.payload.id] || {}\n\nfor (let attribute in msg.payload) {\n\n    resource[attribute] = msg.payload[attribute]\n\n}\n\ntype[resource.id] = resource\nstate[resource.type] = type\nflow.set('state', state)\n\nmsg.topic = env.get('TOPIC') + '/' + resource.type + '/' + resource.id\nmsg.qos = 2\nmsg.retain = true\nmsg.payload = resource\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "74ccf37d5b5cc460",
        "type": "switch",
        "z": "4e89e7c952d56c09",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = 'add' or topic = 'update'",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "delete",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 510,
        "y": 140,
        "wires": [
            [
                "7972bbcf134f786b"
            ],
            [
                "f3d6eb631a33249c"
            ],
            []
        ]
    },
    {
        "id": "f3d6eb631a33249c",
        "type": "function",
        "z": "4e89e7c952d56c09",
        "name": "deleteState",
        "func": "node.status({\n    text: msg.topic + ' ' + msg.payload.type,\n    shape: 'dot',\n    fill: 'blue'\n})\n\nconst state = flow.get('state') || {}\n\nif (Object.prototype.hasOwnProperty.call(state, msg.payload.type)) {\n\n    const type = state[msg.payload.type]\n\n    if (Object.prototype.hasOwnProperty.call(type, msg.payload.id)) {\n\n        delete type[msg.payload.id]\n\n    }\n\n}\n\nflow.set('state', state)\n\nmsg.topic = env.get('TOPIC') + '/' + msg.payload.type + '/' + msg.payload.id\nmsg.qos = 2\nmsg.retain = true\nmsg.payload = ''\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "35fad88b119f8f36",
        "type": "status",
        "z": "4e89e7c952d56c09",
        "name": "",
        "scope": [
            "b3c5813303ac7896"
        ],
        "x": 500,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "1acee9fedddd46bc",
        "type": "catch",
        "z": "4e89e7c952d56c09",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 500,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "b3c5813303ac7896",
        "type": "subflow:de620fed3bdb7aa9",
        "z": "4e89e7c952d56c09",
        "x": 180,
        "y": 200,
        "wires": [
            [
                "c51e9f68572dcd4f"
            ],
            [],
            []
        ]
    },
    {
        "id": "98d7f50f7db89d4d",
        "type": "subflow:a34d4eb04cf45884",
        "z": "4e89e7c952d56c09",
        "x": 340,
        "y": 100,
        "wires": [
            [
                "74ccf37d5b5cc460"
            ]
        ]
    },
    {
        "id": "c51e9f68572dcd4f",
        "type": "subflow:4b1f9e8c23fa098d",
        "z": "4e89e7c952d56c09",
        "name": "",
        "x": 340,
        "y": 180,
        "wires": [
            [
                "74ccf37d5b5cc460"
            ]
        ]
    },
    {
        "id": "cdd12e98966ee7c4",
        "type": "EventSource",
        "z": "de620fed3bdb7aa9",
        "g": "d606b55cf1d68352",
        "name": "Hue SSE",
        "x": 1040,
        "y": 140,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "eef1022d50fc9776",
        "type": "change",
        "z": "de620fed3bdb7aa9",
        "g": "d606b55cf1d68352",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"url\":\"https://\" & $env('ADDRESS') & \"/eventstream/clip/v2\",\"initDict\":{\"withCredentials\":false,\"https\":{\"rejectUnauthorized\":false},\"headers\":{\"hue-application-key\":$env('KEY')}}}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 140,
        "wires": [
            [
                "cdd12e98966ee7c4"
            ]
        ]
    },
    {
        "id": "d901234fd1fce55c",
        "type": "status",
        "z": "de620fed3bdb7aa9",
        "g": "666b7004db0b97b6",
        "name": "",
        "scope": [
            "cdd12e98966ee7c4"
        ],
        "x": 140,
        "y": 300,
        "wires": [
            [
                "fabe0aac918a0c99"
            ]
        ]
    },
    {
        "id": "fabe0aac918a0c99",
        "type": "switch",
        "z": "de620fed3bdb7aa9",
        "g": "666b7004db0b97b6",
        "name": "",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 220,
        "wires": [
            [
                "c97d943953f14d84"
            ],
            [
                "084266e8becbe572"
            ]
        ]
    },
    {
        "id": "c97d943953f14d84",
        "type": "trigger",
        "z": "de620fed3bdb7aa9",
        "g": "666b7004db0b97b6",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "date",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "1",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 650,
        "y": 200,
        "wires": [
            [
                "eef1022d50fc9776"
            ]
        ]
    },
    {
        "id": "084266e8becbe572",
        "type": "change",
        "z": "de620fed3bdb7aa9",
        "g": "666b7004db0b97b6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "rest",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 240,
        "wires": [
            [
                "c97d943953f14d84"
            ]
        ]
    },
    {
        "id": "6b8a0e371954f465",
        "type": "function",
        "z": "a34d4eb04cf45884",
        "name": "segregateTypes",
        "func": "if (msg.payload.errors.length > 0) {\n\n    throw msg.payload.errors\n\n}\n\nlet resources = msg.payload.data\n\nlet arrays = {}\n\nresources.forEach((/** @type {{ type: string | number; }} */ resource) => {\n\n    let array = arrays[resource.type] || []\n    \n    array.push(resource)\n    arrays[resource.type] = array\n\n})\n\nmsg.payload = arrays\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 60,
        "wires": [
            [
                "2e7becc56a96c4dc"
            ]
        ]
    },
    {
        "id": "2e7becc56a96c4dc",
        "type": "split",
        "z": "a34d4eb04cf45884",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 330,
        "y": 60,
        "wires": [
            [
                "b1dd91dbd450f89f"
            ]
        ]
    },
    {
        "id": "b1dd91dbd450f89f",
        "type": "switch",
        "z": "a34d4eb04cf45884",
        "name": "filter resources",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "topic = 'grouped_light' or topic = 'button' or topic = 'motion'",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 60,
        "wires": [
            [
                "c38043f17fec59c0"
            ]
        ]
    },
    {
        "id": "c38043f17fec59c0",
        "type": "split",
        "z": "a34d4eb04cf45884",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 630,
        "y": 60,
        "wires": [
            [
                "2d8a3e52f4b83d16"
            ]
        ]
    },
    {
        "id": "2d8a3e52f4b83d16",
        "type": "change",
        "z": "a34d4eb04cf45884",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "update",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "11642f950d52a63f",
        "type": "change",
        "z": "4b1f9e8c23fa098d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.data",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 100,
        "wires": [
            [
                "d6816cf71b63c27e"
            ]
        ]
    },
    {
        "id": "d6816cf71b63c27e",
        "type": "json",
        "z": "4b1f9e8c23fa098d",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 330,
        "y": 100,
        "wires": [
            [
                "b4da061c0dd45c54"
            ]
        ]
    },
    {
        "id": "b4da061c0dd45c54",
        "type": "split",
        "z": "4b1f9e8c23fa098d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 450,
        "y": 100,
        "wires": [
            [
                "94e9fe9a9f7af221"
            ]
        ]
    },
    {
        "id": "94e9fe9a9f7af221",
        "type": "change",
        "z": "4b1f9e8c23fa098d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload.type",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.data",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 100,
        "wires": [
            [
                "c4f2d5d0acdf4cc1"
            ]
        ]
    },
    {
        "id": "c4f2d5d0acdf4cc1",
        "type": "split",
        "z": "4b1f9e8c23fa098d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 100,
        "wires": [
            [
                "612b03cff3e03da9"
            ]
        ]
    },
    {
        "id": "612b03cff3e03da9",
        "type": "change",
        "z": "4b1f9e8c23fa098d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":payload.type,\"shape\":\"ring\",\"fill\":\"blue\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "bd4a23ce7c2889c7",
        "type": "function",
        "z": "c35ef1735ca5a56b",
        "name": "mergeMetadata",
        "func": "let findRoomName = (/** @type {string} */ id) => {\n    \n    for (let index = 0; index < msg.rooms.length; ++index) {\n\n        let room = msg.rooms[index]\n        \n        if (room.id == id) {\n            \n            return room.name\n            \n        }\n    }\n    \n    node.warn('no room found with id ' + id)\n    return null\n}\n\nlet metadata = msg.payload.map((/** @type {{ roomId: any; sceneName: string; sceneId: any; }} */ scene) => {\n    \n    let roomName = findRoomName(scene.roomId)\n    \n    node.status({\n        text: roomName + ' | ' + scene.sceneName,\n        shape: 'dot',\n        fill: 'blue'\n    })\n\n    return {\n        sceneId: scene.sceneId,\n        sceneName: scene.sceneName,\n        roomId: scene.roomId,\n        roomName: roomName\n    }\n})\n\nmsg.payload = metadata\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "e7cbb96d60e8d93a",
        "type": "change",
        "z": "c35ef1735ca5a56b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$map(payload.sceneData, function($scene) {\t    {\t        \"sceneName\": $base64decode($scene.name),\t        \"sceneId\": $scene.id,\t        \"roomId\": $scene.roomId\t    }\t})",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 60,
        "wires": [
            [
                "bd4a23ce7c2889c7"
            ]
        ]
    },
    {
        "id": "93822d2eb8c60ace",
        "type": "subflow:4920eed654c67f8d",
        "z": "c35ef1735ca5a56b",
        "name": "Get PowerVIew Scenes",
        "x": 730,
        "y": 60,
        "wires": [
            [
                "e7cbb96d60e8d93a"
            ]
        ]
    },
    {
        "id": "11e5dc07e749f452",
        "type": "change",
        "z": "c35ef1735ca5a56b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "rooms",
                "pt": "msg",
                "to": "$map(payload.roomData, function($room) {\t    {\t        \"name\": $base64decode($room.name),\t        \"id\": $room.id\t    }\t})",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "scenes",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 60,
        "wires": [
            [
                "93822d2eb8c60ace"
            ]
        ]
    },
    {
        "id": "a8f812cc5d7ebea7",
        "type": "subflow:4920eed654c67f8d",
        "z": "c35ef1735ca5a56b",
        "name": "Get PowerVIew Rooms",
        "x": 310,
        "y": 60,
        "wires": [
            [
                "11e5dc07e749f452"
            ]
        ]
    },
    {
        "id": "b4f2cc634373bb02",
        "type": "function",
        "z": "c35ef1735ca5a56b",
        "name": "atStart",
        "func": "return msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "setTimeout(() => {\n\n    node.send({\n        topic: 'rooms',\n        payload: ''\n    })\n\n}, 1000)",
        "finalize": "",
        "libs": [],
        "x": 130,
        "y": 60,
        "wires": [
            [
                "a8f812cc5d7ebea7"
            ]
        ]
    },
    {
        "id": "7aa9b3895743736e",
        "type": "status",
        "z": "c35ef1735ca5a56b",
        "name": "",
        "scope": null,
        "x": 1140,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "14e5342cb50f366f",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "return from chez nous main api",
        "mode": "return",
        "links": [],
        "x": 375,
        "y": 180,
        "wires": []
    },
    {
        "id": "7df3e5fbd6e9aa8a",
        "type": "link in",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "send to chez nous main",
        "links": [],
        "x": 75,
        "y": 240,
        "wires": [
            [
                "3b5ab296575b53d4"
            ]
        ],
        "outputLabels": [
            "topic = uri, payload = body, method = HTTP request type"
        ]
    },
    {
        "id": "3b5ab296575b53d4",
        "type": "subflow:5785c8d9f39df67e",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "",
        "x": 210,
        "y": 240,
        "wires": [
            [
                "14e5342cb50f366f",
                "3d10aa8bd0cedc9f"
            ],
            [
                "4d0cd6535cb6e444"
            ]
        ]
    },
    {
        "id": "51bce99c75aa12c6",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "290b83ef8e01ae0f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "73a1ec5ed8ebc167"
            ]
        ]
    },
    {
        "id": "f3ab10cd192709b0",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "290b83ef8e01ae0f",
        "name": "chez nous main access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 590,
        "y": 80,
        "wires": []
    },
    {
        "id": "73a1ec5ed8ebc167",
        "type": "subflow:75bc72a16c4da2c8",
        "z": "c7141ffb22d64190",
        "g": "290b83ef8e01ae0f",
        "name": "",
        "env": [
            {
                "name": "USERNAME",
                "value": "nodered#cheznous",
                "type": "str"
            }
        ],
        "x": 330,
        "y": 80,
        "wires": [
            [
                "f3ab10cd192709b0"
            ]
        ]
    },
    {
        "id": "4d2dc9a6e42d0548",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 695,
        "y": 400,
        "wires": []
    },
    {
        "id": "2d0604f94ef7bff4",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "method",
                "v": "GET",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "resource",
        "payload": "",
        "payloadType": "str",
        "x": 140,
        "y": 440,
        "wires": [
            [
                "8c9d79d2791e9b02"
            ]
        ]
    },
    {
        "id": "8c9d79d2791e9b02",
        "type": "link call",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 330,
        "y": 440,
        "wires": [
            [
                "7d283a2fc0d30093"
            ]
        ]
    },
    {
        "id": "3d10aa8bd0cedc9f",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "chez nous main",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 440,
        "y": 240,
        "wires": []
    },
    {
        "id": "72e37380ef01d245",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 595,
        "y": 300,
        "wires": []
    },
    {
        "id": "bbd1a868cb325b9d",
        "type": "catch",
        "z": "c7141ffb22d64190",
        "g": "67b7a3ca46620d16",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 140,
        "y": 580,
        "wires": [
            [
                "cb8f9571f345d552"
            ]
        ]
    },
    {
        "id": "cb8f9571f345d552",
        "type": "change",
        "z": "c7141ffb22d64190",
        "g": "67b7a3ca46620d16",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 580,
        "wires": [
            [
                "94db8418a725151c"
            ]
        ]
    },
    {
        "id": "94db8418a725151c",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "67b7a3ca46620d16",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 435,
        "y": 580,
        "wires": []
    },
    {
        "id": "4d0cd6535cb6e444",
        "type": "change",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "Chez Nous Main",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 300,
        "wires": [
            [
                "72e37380ef01d245"
            ]
        ]
    },
    {
        "id": "a31f6417651da697",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "chez nous main error",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "topic",
        "statusType": "msg",
        "x": 780,
        "y": 480,
        "wires": []
    },
    {
        "id": "ba07978d1c64a83f",
        "type": "change",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"Chez Nous Main\",\"message\":$string(msg,true)}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 440,
        "wires": [
            [
                "d74bafa077e6060e"
            ]
        ]
    },
    {
        "id": "d74bafa077e6060e",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 875,
        "y": 440,
        "wires": []
    },
    {
        "id": "7d283a2fc0d30093",
        "type": "subflow:4e89e7c952d56c09",
        "z": "c7141ffb22d64190",
        "g": "665df9d682462b5e",
        "name": "",
        "x": 540,
        "y": 440,
        "wires": [
            [
                "4d2dc9a6e42d0548"
            ],
            [
                "a31f6417651da697",
                "ba07978d1c64a83f"
            ]
        ]
    },
    {
        "id": "ffef2ca7a90d4b74",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "return from basement hue api",
        "mode": "return",
        "links": [],
        "x": 375,
        "y": 180,
        "wires": []
    },
    {
        "id": "76de6350a9a0c4fe",
        "type": "link in",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "send to basement hue",
        "links": [],
        "x": 75,
        "y": 240,
        "wires": [
            [
                "3397976f94fcc061"
            ]
        ],
        "outputLabels": [
            "topic = uri, payload = body, method = HTTP request type"
        ]
    },
    {
        "id": "3397976f94fcc061",
        "type": "subflow:5785c8d9f39df67e",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "ADDRESS",
                "type": "env"
            },
            {
                "name": "KEY",
                "value": "KEY",
                "type": "env"
            }
        ],
        "x": 210,
        "y": 240,
        "wires": [
            [
                "ffef2ca7a90d4b74",
                "45320d5298dbc090"
            ],
            [
                "fb43e90cb6d29a93"
            ]
        ]
    },
    {
        "id": "07b48810bc6739bb",
        "type": "inject",
        "z": "c8c4090e523da434",
        "g": "cf29b66e60017a62",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "02ae8cd7fbb90513"
            ]
        ]
    },
    {
        "id": "0ed7befa1497d56c",
        "type": "debug",
        "z": "c8c4090e523da434",
        "g": "cf29b66e60017a62",
        "name": "basement hue access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload[0].success.username",
        "statusType": "msg",
        "x": 580,
        "y": 80,
        "wires": []
    },
    {
        "id": "02ae8cd7fbb90513",
        "type": "subflow:75bc72a16c4da2c8",
        "z": "c8c4090e523da434",
        "g": "cf29b66e60017a62",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "ADDRESS",
                "type": "env"
            },
            {
                "name": "USERNAME",
                "value": "nodered#cheznous",
                "type": "str"
            }
        ],
        "x": 330,
        "y": 80,
        "wires": [
            [
                "0ed7befa1497d56c"
            ]
        ]
    },
    {
        "id": "6dfdb240e3169ffe",
        "type": "inject",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "method",
                "v": "GET",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "resource",
        "payload": "",
        "payloadType": "str",
        "x": 140,
        "y": 440,
        "wires": [
            [
                "715136c1ddfd2fe4"
            ]
        ]
    },
    {
        "id": "715136c1ddfd2fe4",
        "type": "link call",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "links": [
            "76de6350a9a0c4fe"
        ],
        "timeout": "30",
        "x": 320,
        "y": 440,
        "wires": [
            [
                "21ea110d0ab4d1b3"
            ]
        ]
    },
    {
        "id": "40f1f326e5252bf8",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 675,
        "y": 400,
        "wires": []
    },
    {
        "id": "45320d5298dbc090",
        "type": "debug",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "basement hue",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 440,
        "y": 240,
        "wires": []
    },
    {
        "id": "88c6a3f5073708e6",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 595,
        "y": 300,
        "wires": []
    },
    {
        "id": "fb43e90cb6d29a93",
        "type": "change",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.title",
                "pt": "msg",
                "to": "Basement Hue",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 300,
        "wires": [
            [
                "88c6a3f5073708e6"
            ]
        ]
    },
    {
        "id": "c08c66ea4ac8e129",
        "type": "catch",
        "z": "c8c4090e523da434",
        "g": "0d65e7f528cf04df",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 140,
        "y": 580,
        "wires": [
            [
                "fe7591ba8a5abf39"
            ]
        ]
    },
    {
        "id": "fe7591ba8a5abf39",
        "type": "change",
        "z": "c8c4090e523da434",
        "g": "0d65e7f528cf04df",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 580,
        "wires": [
            [
                "56bb6d25d62183a5"
            ]
        ]
    },
    {
        "id": "56bb6d25d62183a5",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "0d65e7f528cf04df",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 435,
        "y": 580,
        "wires": []
    },
    {
        "id": "6d580e21cbe57c5a",
        "type": "debug",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "basement hue error",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "topic",
        "statusType": "msg",
        "x": 750,
        "y": 480,
        "wires": []
    },
    {
        "id": "85fbc8b594d1093d",
        "type": "change",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":\"Basement Hue\",\"message\":$string(msg,true)}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 440,
        "wires": [
            [
                "388f01c5394d4c2b"
            ]
        ]
    },
    {
        "id": "388f01c5394d4c2b",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 855,
        "y": 440,
        "wires": []
    },
    {
        "id": "21ea110d0ab4d1b3",
        "type": "subflow:4e89e7c952d56c09",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "x": 520,
        "y": 440,
        "wires": [
            [
                "40f1f326e5252bf8"
            ],
            [
                "6d580e21cbe57c5a",
                "85fbc8b594d1093d"
            ]
        ]
    },
    {
        "id": "1cee4f351bd59563",
        "type": "debug",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "powerview scenes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 630,
        "y": 80,
        "wires": []
    },
    {
        "id": "3c70a7443900cb3f",
        "type": "link call",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "links": [
            "7173aa38c9fa93dc"
        ],
        "timeout": "30",
        "x": 510,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "0514602b711a8136",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "window shade automation",
        "links": [
            "1f7aefd9b0586064",
            "21690efdfa2776cf"
        ],
        "x": 155,
        "y": 180,
        "wires": [
            [
                "a0985c083540376f"
            ]
        ]
    },
    {
        "id": "a0985c083540376f",
        "type": "subflow:3faadb46568c393b",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "x": 290,
        "y": 180,
        "wires": [
            [
                "3c70a7443900cb3f"
            ]
        ]
    },
    {
        "id": "2f6cc09457939ce2",
        "type": "subflow:9c4e4702e4660adf",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "",
        "x": 300,
        "y": 320,
        "wires": [
            [
                "618e79a58ab8143a"
            ],
            [
                "b7ae8cdd52579f82"
            ]
        ]
    },
    {
        "id": "7173aa38c9fa93dc",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "activate powerview scene",
        "links": [],
        "x": 155,
        "y": 320,
        "wires": [
            [
                "2f6cc09457939ce2"
            ]
        ]
    },
    {
        "id": "618e79a58ab8143a",
        "type": "link out",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "return from set powerview scene",
        "mode": "return",
        "links": [],
        "x": 455,
        "y": 280,
        "wires": []
    },
    {
        "id": "b7ae8cdd52579f82",
        "type": "link out",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 455,
        "y": 360,
        "wires": []
    },
    {
        "id": "76edfe210688f5be",
        "type": "catch",
        "z": "1cf0490e7de2f93d",
        "g": "d62657d45ec04ef6",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 220,
        "y": 460,
        "wires": [
            [
                "3221f9b602f34698"
            ]
        ]
    },
    {
        "id": "3221f9b602f34698",
        "type": "change",
        "z": "1cf0490e7de2f93d",
        "g": "d62657d45ec04ef6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 460,
        "wires": [
            [
                "6520f43ac52c5b23"
            ]
        ]
    },
    {
        "id": "6520f43ac52c5b23",
        "type": "link out",
        "z": "1cf0490e7de2f93d",
        "g": "d62657d45ec04ef6",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 515,
        "y": 460,
        "wires": []
    },
    {
        "id": "43794c1d997dcc82",
        "type": "subflow:c35ef1735ca5a56b",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "x": 400,
        "y": 80,
        "wires": [
            [
                "1cee4f351bd59563"
            ]
        ]
    },
    {
        "id": "69a6db45ef9f6fdf",
        "type": "inject",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "test",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "rooms",
        "payload": "",
        "payloadType": "str",
        "x": 210,
        "y": 80,
        "wires": [
            [
                "43794c1d997dcc82"
            ]
        ]
    },
    {
        "id": "6f7db4dc310c6c2f",
        "type": "subflow:5e6607a62e250494",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "x": 130,
        "y": 560,
        "wires": [
            [
                "18c9ac4127308f24",
                "114b9703250b5ff7"
            ]
        ]
    },
    {
        "id": "18c9ac4127308f24",
        "type": "subflow:c0cc9d812cad7bfc",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "x": 330,
        "y": 520,
        "wires": [
            [
                "21690efdfa2776cf"
            ]
        ]
    },
    {
        "id": "c09a00ecb1c547ec",
        "type": "inject",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "retain",
                "v": "false",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "00 02 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "night",
        "payloadType": "str",
        "x": 370,
        "y": 480,
        "wires": [
            [
                "21690efdfa2776cf"
            ]
        ]
    },
    {
        "id": "21690efdfa2776cf",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "trigger automation",
        "mode": "link",
        "links": [
            "0514602b711a8136",
            "1993fd8165053adf"
        ],
        "x": 455,
        "y": 500,
        "wires": []
    },
    {
        "id": "58abeb0fb7d59222",
        "type": "rbe",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 730,
        "y": 600,
        "wires": [
            [
                "01bd7e5d506c131c"
            ]
        ]
    },
    {
        "id": "f086604c46663235",
        "type": "ui_switch",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "Enable Automation",
        "label": "Enable",
        "tooltip": "",
        "group": "25c7f0078ed443dd",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 650,
        "y": 700,
        "wires": [
            [
                "657090175f7253d6"
            ]
        ]
    },
    {
        "id": "9810ca9f681aaebf",
        "type": "mqtt in",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "",
        "topic": "nodered/automation/enable",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 700,
        "wires": [
            [
                "6ccc90dff91a1ab2"
            ]
        ]
    },
    {
        "id": "6bdf715d945fbc10",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "group": "25c7f0078ed443dd",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Time",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 650,
        "y": 240,
        "wires": []
    },
    {
        "id": "305c62d581d22adf",
        "type": "subflow:dacb5b6825c3fbfa",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "name": "",
        "x": 490,
        "y": 240,
        "wires": [
            [
                "6bdf715d945fbc10",
                "cc0a0bdacb257089",
                "820916d6aef00517"
            ]
        ]
    },
    {
        "id": "c168b5c3119db1de",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "31ed5707953578b9",
        "group": "25c7f0078ed443dd",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Theme",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 620,
        "y": 100,
        "wires": []
    },
    {
        "id": "a3dd9bfc89e0e94a",
        "type": "subflow:a8c212909cbdf020",
        "z": "f03b6ceb81ed7dac",
        "g": "31ed5707953578b9",
        "name": "",
        "x": 480,
        "y": 80,
        "wires": [
            [
                "c168b5c3119db1de",
                "e309f9054b8afaa3"
            ]
        ]
    },
    {
        "id": "bbcb2a37e7e328bb",
        "type": "ui_dropdown",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "label": "Bedtime",
        "tooltip": "",
        "place": "Select option",
        "group": "ad4d885f83f029a5",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "nodered/bedtime",
        "topicType": "str",
        "className": "",
        "x": 900,
        "y": 500,
        "wires": [
            [
                "4aa998790c81c0de"
            ]
        ]
    },
    {
        "id": "cf6562b252b0fea0",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "group": "ad4d885f83f029a5",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Randomized",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 1090,
        "y": 420,
        "wires": []
    },
    {
        "id": "abe65b742c235eaf",
        "type": "subflow:99c62215b637bb07",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "x": 720,
        "y": 460,
        "wires": [
            [
                "e4573259bc244ded"
            ],
            [
                "bbcb2a37e7e328bb"
            ]
        ]
    },
    {
        "id": "4aa998790c81c0de",
        "type": "function",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "randomBedtime",
        "func": "let offset = 30 - Math.floor(Math.random() * 60)\nlet value = (msg.payload + offset) % 1440\n\nmsg.topic = 'nodered/automation/bedtime'\nmsg.qos = 2\nmsg.retain = true\n\nmsg.payload = {\n    minutes: msg.payload,\n    value: value\n}\n\nnode.status(value)\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 540,
        "wires": [
            [
                "c33318ea5eb9ec0a"
            ]
        ]
    },
    {
        "id": "114b9703250b5ff7",
        "type": "switch",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "morning?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 300,
        "y": 600,
        "wires": [
            [
                "58abeb0fb7d59222"
            ]
        ]
    },
    {
        "id": "6ccc90dff91a1ab2",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enable-automation",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 700,
        "wires": [
            [
                "f086604c46663235"
            ]
        ]
    },
    {
        "id": "01bd7e5d506c131c",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bedtime.minutes",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 580,
        "wires": [
            [
                "4aa998790c81c0de"
            ]
        ]
    },
    {
        "id": "d5d43b7168064963",
        "type": "catch",
        "z": "f03b6ceb81ed7dac",
        "g": "3d0bb7da508e430c",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 140,
        "y": 380,
        "wires": [
            [
                "d1a29315e25ead30"
            ]
        ]
    },
    {
        "id": "d1a29315e25ead30",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "3d0bb7da508e430c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 380,
        "wires": [
            [
                "3c1d06c6f301fdd7"
            ]
        ]
    },
    {
        "id": "3c1d06c6f301fdd7",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "3d0bb7da508e430c",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 435,
        "y": 380,
        "wires": []
    },
    {
        "id": "e309f9054b8afaa3",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "31ed5707953578b9",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 575,
        "y": 60,
        "wires": []
    },
    {
        "id": "cc0a0bdacb257089",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 615,
        "y": 200,
        "wires": []
    },
    {
        "id": "c33318ea5eb9ec0a",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 1195,
        "y": 540,
        "wires": []
    },
    {
        "id": "657090175f7253d6",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/enable",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 700,
        "wires": [
            [
                "e3599caac9ca8f69"
            ]
        ]
    },
    {
        "id": "e3599caac9ca8f69",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 955,
        "y": 700,
        "wires": []
    },
    {
        "id": "4924b0104a97ef6d",
        "type": "inject",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 720,
        "y": 560,
        "wires": [
            [
                "01bd7e5d506c131c"
            ]
        ]
    },
    {
        "id": "e4573259bc244ded",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t$hour := $floor(payload.value / 60);\t$minute := payload.value % 60;\t$formatInteger($hour, '00') & ':' & $formatInteger($minute, '00')\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 420,
        "wires": [
            [
                "cf6562b252b0fea0"
            ]
        ]
    },
    {
        "id": "820916d6aef00517",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$formatInteger($floor(next / 60), '00') & ':' & $formatInteger(next % 60, '00')\t",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 280,
        "wires": [
            [
                "d95bd31d04f2745f"
            ]
        ]
    },
    {
        "id": "d95bd31d04f2745f",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "group": "25c7f0078ed443dd",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Next",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 830,
        "y": 280,
        "wires": []
    },
    {
        "id": "25b9375f737e85e2",
        "type": "function",
        "z": "f03b6ceb81ed7dac",
        "g": "1723570f3a1a07a2",
        "name": "getTimes",
        "func": "/* global suncalc:readonly */\n\nconst now = new Date()\nconst times = suncalc.getTimes(now, msg.payload.latitude, msg.payload.longitude)\n\n/**\n* @param {Date} date\n*/\nfunction toMinutes(date) {\n\n    return date.getHours() * 60 + date.getMinutes()\n\n}\n\nmsg.payload = {\n\n    now: toMinutes(now),\n    sunrise: toMinutes(times.sunrise),\n    sunset: toMinutes(times.sunset),\n    date: [\n        now.getMonth() + 1,\n        now.getDate()\n    ]\n\n}\n\nnode.status({ fill: \"blue\", shape: \"dot\", text: msg.payload.now })\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "suncalc",
                "module": "suncalc"
            }
        ],
        "x": 280,
        "y": 160,
        "wires": [
            [
                "a3dd9bfc89e0e94a",
                "305c62d581d22adf"
            ]
        ],
        "info": "# Overview\n\nGet current, sunrise and sunset times for a given location using [suncalc](https://www.npmjs.com/package/suncalc). The returned times are represented as the number of minutes after midnight, at the specified location for ease in use in subsequent calculations and comparisons that drive home automation. See the `@parasaurolophus/node-red-subflow-time-of-day` and `@parasaurolophus/node-red-subflow-theme` subflows for examples of how these values are used.\n\n_**N.B.:** Due to deficiencies in JavaScript's `Date` class, this function assumes that the host machine on which_ Node-RED _is running is configured such that `Date.getHours()` returns the correct time for the location whose coordinates are passed as parameters. This is an appropriate assumption for this function's intended use case (home automation). If you need the ability to have this function work correctly independently of the configuration of the host machine, you will need to enhance it by use of some combination of time zone aware services and libraries, e.g. [geonames](https://www.geonames.org/export/web-services.html#timezone), [luxon](https://www.npmjs.com/package/luxon) etc._\n\n# Input\n\nUse `msg.payload.latitude` and `msg.payload.longitude` to specify the desired location.\n\n# Output\n\n`msg.payload` contains an object with the following fields:\n\n| Property              | Description                                              |\n|-----------------------|----------------------------------------------------------|\n| `msg.payload.now`     | Number of minutes after midnight at time of invocation   |\n| `msg.payload.sunrise` | Number of minutes after midnight at which sunrise occurs |\n| `msg.payload.sunset`  | Number of minutes after midnight at which sunset occurs  |\n"
    },
    {
        "id": "d32948683f33a7d6",
        "type": "inject",
        "z": "f03b6ceb81ed7dac",
        "g": "1723570f3a1a07a2",
        "name": "lat lon",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"latitude\":$env('LATITUDE'),\"longitude\":$env('LONGITUDE')}",
        "payloadType": "jsonata",
        "x": 140,
        "y": 160,
        "wires": [
            [
                "25b9375f737e85e2"
            ]
        ]
    },
    {
        "id": "061d8c40c8ed16ab",
        "type": "switch",
        "z": "63d8cb10398da04b",
        "g": "e936dbad3fb3b587",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "evening",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "night",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 250,
        "y": 200,
        "wires": [
            [
                "981dbc2364b09d66"
            ],
            [
                "2837183323a61e04",
                "1b13b81c68a08cdd"
            ],
            [
                "549a2335fb839c37"
            ]
        ]
    },
    {
        "id": "549a2335fb839c37",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "09742b69ee691d31",
        "name": "activate night",
        "mode": "link",
        "links": [
            "fbd53f7f18ca6655",
            "3ed1a4d37d1548b4",
            "ec4c4a28a59d105e"
        ],
        "x": 415,
        "y": 280,
        "wires": []
    },
    {
        "id": "2837183323a61e04",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "trigger main floor evening",
        "mode": "link",
        "links": [
            "6cae9b1ccc68cb9e"
        ],
        "x": 975,
        "y": 260,
        "wires": []
    },
    {
        "id": "7ab1620c3349854b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "trigger yard tribal",
        "mode": "link",
        "links": [
            "a6475288998b4e07"
        ],
        "x": 975,
        "y": 100,
        "wires": []
    },
    {
        "id": "c68369c3781694e3",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "trigger yard spooky",
        "mode": "link",
        "links": [
            "a225232dc86a3b6f"
        ],
        "x": 975,
        "y": 140,
        "wires": []
    },
    {
        "id": "b0ee0f2f8155fe9b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "trigger yard jolly",
        "mode": "link",
        "links": [
            "60976d31a8dafe99",
            "a225232dc86a3b6f",
            "a6475288998b4e07"
        ],
        "x": 975,
        "y": 180,
        "wires": []
    },
    {
        "id": "e270017761dfd27d",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "trigger yard standard",
        "mode": "link",
        "links": [
            "18f53b7627e645e4"
        ],
        "x": 975,
        "y": 220,
        "wires": []
    },
    {
        "id": "981dbc2364b09d66",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "edbd733b188dccef",
        "name": "activate morning",
        "mode": "link",
        "links": [
            "e74fcadba6a2b4ca",
            "07ccb0b07e6fada8",
            "ec4c4a28a59d105e"
        ],
        "x": 415,
        "y": 120,
        "wires": []
    },
    {
        "id": "1993fd8165053adf",
        "type": "link in",
        "z": "63d8cb10398da04b",
        "g": "e936dbad3fb3b587",
        "name": "lighting",
        "links": [
            "1f7aefd9b0586064",
            "21690efdfa2776cf"
        ],
        "x": 155,
        "y": 200,
        "wires": [
            [
                "061d8c40c8ed16ab"
            ]
        ]
    },
    {
        "id": "197a4d8630c84a2a",
        "type": "catch",
        "z": "63d8cb10398da04b",
        "g": "45c4e55e53345092",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 220,
        "y": 380,
        "wires": [
            [
                "e63dc045ae2cbda9"
            ]
        ]
    },
    {
        "id": "e63dc045ae2cbda9",
        "type": "change",
        "z": "63d8cb10398da04b",
        "g": "45c4e55e53345092",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 380,
        "wires": [
            [
                "241fd1639703f965"
            ]
        ]
    },
    {
        "id": "241fd1639703f965",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "45c4e55e53345092",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 515,
        "y": 380,
        "wires": []
    },
    {
        "id": "7cdf7a5cc4f436ad",
        "type": "mqtt in",
        "z": "63d8cb10398da04b",
        "g": "969faaf2c50ec623",
        "name": "",
        "topic": "hue/+/+/+",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 200,
        "y": 480,
        "wires": [
            [
                "41d6e4533b1fca83"
            ]
        ]
    },
    {
        "id": "712edf6d3dd2df77",
        "type": "debug",
        "z": "63d8cb10398da04b",
        "g": "969faaf2c50ec623",
        "name": "hue event",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "topic",
        "statusType": "msg",
        "x": 460,
        "y": 480,
        "wires": []
    },
    {
        "id": "41d6e4533b1fca83",
        "type": "switch",
        "z": "63d8cb10398da04b",
        "g": "969faaf2c50ec623",
        "name": "",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 480,
        "wires": [
            [
                "712edf6d3dd2df77"
            ]
        ]
    },
    {
        "id": "1b13b81c68a08cdd",
        "type": "change",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "theme",
                "pt": "msg",
                "to": "theme",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 160,
        "wires": [
            [
                "5ba41e8325888c23"
            ]
        ]
    },
    {
        "id": "5ba41e8325888c23",
        "type": "switch",
        "z": "63d8cb10398da04b",
        "g": "1fc278393a2508e0",
        "name": "theme",
        "property": "theme",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "tribal",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "spooky",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "jolly",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 850,
        "y": 160,
        "wires": [
            [
                "7ab1620c3349854b"
            ],
            [
                "c68369c3781694e3"
            ],
            [
                "b0ee0f2f8155fe9b"
            ],
            [
                "e270017761dfd27d"
            ]
        ]
    },
    {
        "id": "53f5dcbc2de38b22",
        "type": "link in",
        "z": "6e3ca82457d27245",
        "name": "send to pushover",
        "links": [
            "88c6a3f5073708e6",
            "72e37380ef01d245",
            "990c12c25d3023d0",
            "ddab2f395aecfd68",
            "94db8418a725151c",
            "b7ae8cdd52579f82",
            "56bb6d25d62183a5",
            "6520f43ac52c5b23",
            "3c1d06c6f301fdd7",
            "241fd1639703f965",
            "833bd2c2e5b9cead",
            "f51080e45a9d06c2",
            "5cf638af3fd262a3",
            "a4e48977f6abe1d3",
            "c2d739fd85dc2d6b",
            "f85d9b0bfaa1207c",
            "8c8507b03aafcfe4",
            "a2f24689333013cf",
            "81400abdbf1d2d42",
            "d74bafa077e6060e",
            "388f01c5394d4c2b"
        ],
        "x": 175,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "f5c7a7580984d067",
        "type": "delay",
        "z": "6e3ca82457d27245",
        "g": "e49c9571ddd5102f",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "3",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 290,
        "y": 80,
        "wires": [
            [
                "11b2638982da0e64"
            ]
        ]
    },
    {
        "id": "11b2638982da0e64",
        "type": "mqtt out",
        "z": "6e3ca82457d27245",
        "g": "e49c9571ddd5102f",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 430,
        "y": 80,
        "wires": []
    },
    {
        "id": "dd7609e91ad64f63",
        "type": "link in",
        "z": "6e3ca82457d27245",
        "g": "e49c9571ddd5102f",
        "name": "send to broker",
        "links": [
            "4d2dc9a6e42d0548",
            "2a3ace48408488ce",
            "ac4ea7223e34a6f8",
            "ae1f46d58671ef2d",
            "3b3c70d754a8a4d5",
            "40f1f326e5252bf8",
            "e309f9054b8afaa3",
            "cc0a0bdacb257089",
            "c33318ea5eb9ec0a",
            "d123374401361fc9",
            "e3599caac9ca8f69"
        ],
        "x": 175,
        "y": 80,
        "wires": [
            [
                "f5c7a7580984d067"
            ]
        ]
    },
    {
        "id": "676a5e70ba119db5",
        "type": "switch",
        "z": "72d0b79e8a326b2f",
        "g": "193264abb5beec8a",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "65",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 260,
        "wires": [
            [
                "dd312a048f2e6d95"
            ]
        ]
    },
    {
        "id": "dd312a048f2e6d95",
        "type": "change",
        "z": "72d0b79e8a326b2f",
        "g": "193264abb5beec8a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"title\":$host,\"message\":topic & ' CPU too hot:' & payload & 'C'}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 260,
        "wires": [
            [
                "8c8507b03aafcfe4"
            ]
        ]
    },
    {
        "id": "8c8507b03aafcfe4",
        "type": "link out",
        "z": "72d0b79e8a326b2f",
        "g": "193264abb5beec8a",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 595,
        "y": 260,
        "wires": []
    },
    {
        "id": "1b458bf6e640c398",
        "type": "ui_template",
        "z": "72d0b79e8a326b2f",
        "g": "193264abb5beec8a",
        "group": "dc6e107af698a0c3",
        "name": "CPU Temperature",
        "order": 0,
        "width": "6",
        "height": "4",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 370,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "3d75a5e09a0ecd62",
        "type": "ui_template",
        "z": "72d0b79e8a326b2f",
        "g": "4e41b9100f8f8543",
        "group": "0a1d0e699afa7c7d",
        "name": "CPU Memory",
        "order": 0,
        "width": "6",
        "height": "4",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "de0bf1bd606626f9",
        "type": "subflow:c4207c9fe61a900e",
        "z": "72d0b79e8a326b2f",
        "g": "193264abb5beec8a",
        "name": "cpu/+/temperature",
        "env": [
            {
                "name": "TOPIC",
                "value": "cpu/+/temperature",
                "type": "str"
            },
            {
                "name": "UNIT",
                "value": "C",
                "type": "str"
            }
        ],
        "x": 150,
        "y": 220,
        "wires": [
            [
                "1b458bf6e640c398"
            ],
            [
                "676a5e70ba119db5"
            ]
        ]
    },
    {
        "id": "8af8ae86062519c0",
        "type": "subflow:c4207c9fe61a900e",
        "z": "72d0b79e8a326b2f",
        "g": "4e41b9100f8f8543",
        "name": "cpu/+/megabytes",
        "env": [
            {
                "name": "TOPIC",
                "value": "cpu/+/megabytes",
                "type": "str"
            },
            {
                "name": "UNIT",
                "value": "MB",
                "type": "str"
            }
        ],
        "x": 140,
        "y": 80,
        "wires": [
            [
                "3d75a5e09a0ecd62"
            ],
            []
        ]
    },
    {
        "id": "0b532eb32d81dbd8",
        "type": "ui_template",
        "z": "72d0b79e8a326b2f",
        "g": "e44a66a067f447ec",
        "group": "cfa1a0f4a477687c",
        "name": "CPU Volts",
        "order": 0,
        "width": "6",
        "height": "4",
        "format": "<div ng-bind-html=\"msg.payload\"></div>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "className": "",
        "x": 270,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "af81cf531f5ae030",
        "type": "subflow:c4207c9fe61a900e",
        "z": "72d0b79e8a326b2f",
        "g": "e44a66a067f447ec",
        "name": "cpu/+/volts",
        "env": [
            {
                "name": "TOPIC",
                "value": "cpu/+/volts",
                "type": "str"
            },
            {
                "name": "UNIT",
                "value": "V",
                "type": "str"
            }
        ],
        "x": 120,
        "y": 360,
        "wires": [
            [
                "0b532eb32d81dbd8"
            ],
            []
        ]
    },
    {
        "id": "cb289ef6a0a1e08d",
        "type": "debug",
        "z": "15ef8f70203ad77a",
        "g": "3d2eaed2a2538cfd",
        "name": "laundry motion",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 400,
        "y": 160,
        "wires": []
    },
    {
        "id": "ed1f053d74d311be",
        "type": "subflow:d9bf8d1c2a2731bc",
        "z": "15ef8f70203ad77a",
        "g": "3d2eaed2a2538cfd",
        "name": "Laundry Motion Detected",
        "env": [
            {
                "name": "TOPIC",
                "value": "hue/basement-hue/motion/22ed778f-26a0-4172-a8e4-46805173ddb4/update",
                "type": "str"
            }
        ],
        "x": 170,
        "y": 120,
        "wires": [
            [
                "799487ae55534f6d"
            ],
            [
                "cb289ef6a0a1e08d"
            ]
        ]
    },
    {
        "id": "4a0a7afe4400e3c9",
        "type": "debug",
        "z": "15ef8f70203ad77a",
        "g": "4cd69db148fa9696",
        "name": "laundry automation",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 370,
        "y": 260,
        "wires": []
    },
    {
        "id": "2ad1f0946910cb48",
        "type": "mqtt in",
        "z": "15ef8f70203ad77a",
        "g": "4cd69db148fa9696",
        "name": "",
        "topic": "nodered/motion/laundry",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 160,
        "y": 260,
        "wires": [
            [
                "4a0a7afe4400e3c9"
            ]
        ]
    },
    {
        "id": "5a43a43f89bf1978",
        "type": "catch",
        "z": "15ef8f70203ad77a",
        "g": "7dcf1dcf10e9c669",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 140,
        "y": 360,
        "wires": [
            [
                "bac16065f61d90fc"
            ]
        ]
    },
    {
        "id": "bac16065f61d90fc",
        "type": "change",
        "z": "15ef8f70203ad77a",
        "g": "7dcf1dcf10e9c669",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 360,
        "wires": [
            [
                "833bd2c2e5b9cead"
            ]
        ]
    },
    {
        "id": "833bd2c2e5b9cead",
        "type": "link out",
        "z": "15ef8f70203ad77a",
        "g": "7dcf1dcf10e9c669",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 435,
        "y": 360,
        "wires": []
    },
    {
        "id": "799487ae55534f6d",
        "type": "change",
        "z": "15ef8f70203ad77a",
        "g": "3d2eaed2a2538cfd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/motion/laundry",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 80,
        "wires": [
            [
                "d123374401361fc9"
            ]
        ]
    },
    {
        "id": "d123374401361fc9",
        "type": "link out",
        "z": "15ef8f70203ad77a",
        "g": "3d2eaed2a2538cfd",
        "name": "send to broker",
        "mode": "link",
        "links": [
            "dd7609e91ad64f63"
        ],
        "x": 515,
        "y": 80,
        "wires": []
    },
    {
        "id": "e74fcadba6a2b4ca",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "main bathroom off",
        "links": [
            "e696e0a2acb678c2",
            "f597e3f10639062f",
            "ce589288779cef4a",
            "981dbc2364b09d66"
        ],
        "x": 175,
        "y": 180,
        "wires": [
            [
                "4288f4e0d18dbff6"
            ]
        ]
    },
    {
        "id": "4288f4e0d18dbff6",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "turn off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/aea74e74-d544-4d08-ad71-3b6665045256",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 180,
        "wires": [
            [
                "d79164592fe44617"
            ]
        ]
    },
    {
        "id": "d79164592fe44617",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 450,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "fbd53f7f18ca6655",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "main bathroom nightlight",
        "links": [
            "1fa973a7d8e65e3c",
            "549a2335fb839c37"
        ],
        "x": 175,
        "y": 80,
        "wires": [
            [
                "26ad3b6fd956be59"
            ]
        ]
    },
    {
        "id": "a4c3ecea47eed101",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 470,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "26ad3b6fd956be59",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "night light",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/5d507fb6-89f6-459a-b327-0fffd0c6dc48",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 80,
        "wires": [
            [
                "a4c3ecea47eed101"
            ]
        ]
    },
    {
        "id": "48a7b08e950de592",
        "type": "catch",
        "z": "1344247d533f754a",
        "g": "ed5e8d4e70342ad3",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 240,
        "y": 280,
        "wires": [
            [
                "324a228d8f5fd903"
            ]
        ]
    },
    {
        "id": "324a228d8f5fd903",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "ed5e8d4e70342ad3",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 280,
        "wires": [
            [
                "f51080e45a9d06c2"
            ]
        ]
    },
    {
        "id": "f51080e45a9d06c2",
        "type": "link out",
        "z": "1344247d533f754a",
        "g": "ed5e8d4e70342ad3",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 535,
        "y": 280,
        "wires": []
    },
    {
        "id": "07ccb0b07e6fada8",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "main floor off",
        "links": [
            "981dbc2364b09d66"
        ],
        "x": 135,
        "y": 80,
        "wires": [
            [
                "4baea86ab327a4b9"
            ]
        ]
    },
    {
        "id": "3ed1a4d37d1548b4",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "main floor nightlight",
        "links": [
            "549a2335fb839c37"
        ],
        "x": 135,
        "y": 180,
        "wires": [
            [
                "7b10a17dd5bc4c0f"
            ]
        ]
    },
    {
        "id": "53509cbc2f897eb4",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "7b10a17dd5bc4c0f",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 180,
        "wires": [
            [
                "08d74ad519cdaa27"
            ]
        ]
    },
    {
        "id": "6cae9b1ccc68cb9e",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "main floor sunset",
        "links": [
            "2837183323a61e04"
        ],
        "x": 135,
        "y": 280,
        "wires": [
            [
                "edc2f01358673517"
            ]
        ]
    },
    {
        "id": "8ae7ee0c87df1191",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "edc2f01358673517",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 280,
        "wires": [
            [
                "c99382ee9ae33d16"
            ]
        ]
    },
    {
        "id": "ec1b9da9a2a0dde0",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/9c1c7975-2f47-4552-bac8-c19b643cd678",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 80,
        "wires": [
            [
                "33533dc0ac4ff870"
            ]
        ]
    },
    {
        "id": "33533dc0ac4ff870",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 930,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "4baea86ab327a4b9",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 80,
        "wires": [
            [
                "76e95a00d6e3b9ad"
            ]
        ]
    },
    {
        "id": "2efdae9d98c90cf9",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 80,
        "wires": [
            [
                "ec1b9da9a2a0dde0"
            ]
        ]
    },
    {
        "id": "1462dac4d5543f0a",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/48c39b9f-1599-4a5c-b7f6-bad6cad4029a",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 180,
        "wires": [
            [
                "53509cbc2f897eb4"
            ]
        ]
    },
    {
        "id": "c4ad8310f9a121b0",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 180,
        "wires": [
            [
                "1462dac4d5543f0a"
            ]
        ]
    },
    {
        "id": "76f3eb6c53a0310c",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/6eff0801-01e2-4803-9840-e31c06cee079",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 280,
        "wires": [
            [
                "8ae7ee0c87df1191"
            ]
        ]
    },
    {
        "id": "66b239fbae02c252",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 280,
        "wires": [
            [
                "76f3eb6c53a0310c"
            ]
        ]
    },
    {
        "id": "76e95a00d6e3b9ad",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "main-floor-off",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-off",
                "type": "str"
            }
        ],
        "x": 430,
        "y": 80,
        "wires": [
            [
                "2efdae9d98c90cf9"
            ]
        ]
    },
    {
        "id": "08d74ad519cdaa27",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "main-floor-nightlight",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-nightlight",
                "type": "str"
            }
        ],
        "x": 450,
        "y": 180,
        "wires": [
            [
                "c4ad8310f9a121b0"
            ]
        ]
    },
    {
        "id": "c99382ee9ae33d16",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "main-floor-sunset",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-sunset",
                "type": "str"
            }
        ],
        "x": 450,
        "y": 280,
        "wires": [
            [
                "66b239fbae02c252"
            ]
        ]
    },
    {
        "id": "1d2763d8aa6b322b",
        "type": "catch",
        "z": "e44149a93fbe9b1b",
        "g": "d74abafd4c4210f0",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 200,
        "y": 380,
        "wires": [
            [
                "c80eb630555e9759"
            ]
        ]
    },
    {
        "id": "c80eb630555e9759",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "d74abafd4c4210f0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 380,
        "wires": [
            [
                "5cf638af3fd262a3"
            ]
        ]
    },
    {
        "id": "5cf638af3fd262a3",
        "type": "link out",
        "z": "e44149a93fbe9b1b",
        "g": "d74abafd4c4210f0",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 495,
        "y": 380,
        "wires": []
    },
    {
        "id": "af712bf4ec4004b4",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "074874e0ff13a7b1",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 950,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "18f53b7627e645e4",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "yard sunset",
        "links": [
            "e270017761dfd27d"
        ],
        "x": 175,
        "y": 160,
        "wires": [
            [
                "b22f3931c3a7aaa9"
            ]
        ]
    },
    {
        "id": "b22f3931c3a7aaa9",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "74a870cad9944a03"
            ]
        ]
    },
    {
        "id": "60976d31a8dafe99",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "yard jolly",
        "links": [
            "b0ee0f2f8155fe9b"
        ],
        "x": 175,
        "y": 460,
        "wires": [
            [
                "a5ea4f7eb61a9136"
            ]
        ]
    },
    {
        "id": "a5ea4f7eb61a9136",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 460,
        "wires": [
            [
                "40657a16668306c1"
            ]
        ]
    },
    {
        "id": "ec4c4a28a59d105e",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "yard off",
        "links": [
            "549a2335fb839c37",
            "981dbc2364b09d66"
        ],
        "x": 175,
        "y": 60,
        "wires": [
            [
                "fb388fbfb4e38ca3"
            ]
        ]
    },
    {
        "id": "fb388fbfb4e38ca3",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "turn off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/bad8480b-b404-42d1-a9e7-a4a69f400971",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 60,
        "wires": [
            [
                "dc1d9849661717f1"
            ]
        ]
    },
    {
        "id": "dc1d9849661717f1",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 450,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "34a695c0d0260e5a",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/9b6935e2-f8ed-4f91-83a2-2bff1850da99",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 160,
        "wires": [
            [
                "af712bf4ec4004b4"
            ]
        ]
    },
    {
        "id": "d07f9471a4a06ae8",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 160,
        "wires": [
            [
                "34a695c0d0260e5a"
            ]
        ]
    },
    {
        "id": "256ba437f41dfbcf",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/12571f23-7714-4b47-8e75-a3040389b788",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 460,
        "wires": [
            [
                "074874e0ff13a7b1"
            ]
        ]
    },
    {
        "id": "6cf088c77229de1d",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 460,
        "wires": [
            [
                "256ba437f41dfbcf"
            ]
        ]
    },
    {
        "id": "29a6f065ab64d562",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "53afc06e5cea0b0d",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 360,
        "wires": [
            [
                "ecf996995825cb3e"
            ]
        ]
    },
    {
        "id": "a225232dc86a3b6f",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "yard spooky",
        "links": [
            "b0ee0f2f8155fe9b",
            "c68369c3781694e3"
        ],
        "x": 175,
        "y": 360,
        "wires": [
            [
                "53afc06e5cea0b0d"
            ]
        ]
    },
    {
        "id": "ce692ff752c427a6",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/70a0a8a6-b4b7-4b24-a9cf-0ecea0f359cc",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 360,
        "wires": [
            [
                "29a6f065ab64d562"
            ]
        ]
    },
    {
        "id": "9fd4f397e5d23392",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 360,
        "wires": [
            [
                "ce692ff752c427a6"
            ]
        ]
    },
    {
        "id": "816be5cd3b82bf0b",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 950,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "ed68842beab6579e",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 260,
        "wires": [
            [
                "2e85bfabe8b4104b"
            ]
        ]
    },
    {
        "id": "a6475288998b4e07",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "yard tribal",
        "links": [
            "b0ee0f2f8155fe9b",
            "7ab1620c3349854b"
        ],
        "x": 175,
        "y": 260,
        "wires": [
            [
                "ed68842beab6579e"
            ]
        ]
    },
    {
        "id": "35ec7b633401cd2e",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/c4681d32-3368-43cd-9cf1-436132521068",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 260,
        "wires": [
            [
                "816be5cd3b82bf0b"
            ]
        ]
    },
    {
        "id": "c5dfb48af9335c64",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 260,
        "wires": [
            [
                "35ec7b633401cd2e"
            ]
        ]
    },
    {
        "id": "2e85bfabe8b4104b",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "yard-tribal",
        "env": [
            {
                "name": "NAME",
                "value": "yard-tribal",
                "type": "str"
            }
        ],
        "x": 460,
        "y": 260,
        "wires": [
            [
                "c5dfb48af9335c64"
            ]
        ]
    },
    {
        "id": "ecf996995825cb3e",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "yard-spooky",
        "env": [
            {
                "name": "NAME",
                "value": "yard-spooky",
                "type": "str"
            }
        ],
        "x": 470,
        "y": 360,
        "wires": [
            [
                "9fd4f397e5d23392"
            ]
        ]
    },
    {
        "id": "40657a16668306c1",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "yard-jolly",
        "env": [
            {
                "name": "NAME",
                "value": "yard-jolly",
                "type": "str"
            }
        ],
        "x": 460,
        "y": 460,
        "wires": [
            [
                "6cf088c77229de1d"
            ]
        ]
    },
    {
        "id": "74a870cad9944a03",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "yard-sunset",
        "env": [
            {
                "name": "NAME",
                "value": "yard-sunset",
                "type": "str"
            }
        ],
        "x": 470,
        "y": 160,
        "wires": [
            [
                "d07f9471a4a06ae8"
            ]
        ]
    },
    {
        "id": "ca20463966975b44",
        "type": "catch",
        "z": "adfd8ae4a2eaf844",
        "g": "6c1ca1a9a6f9d44b",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 240,
        "y": 560,
        "wires": [
            [
                "8986bfe08619e4f9"
            ]
        ]
    },
    {
        "id": "8986bfe08619e4f9",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "6c1ca1a9a6f9d44b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"message\":$string(msg,true),\"title\":$env('TITLE')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 560,
        "wires": [
            [
                "a4e48977f6abe1d3"
            ]
        ]
    },
    {
        "id": "a4e48977f6abe1d3",
        "type": "link out",
        "z": "adfd8ae4a2eaf844",
        "g": "6c1ca1a9a6f9d44b",
        "name": "send to pushover",
        "mode": "link",
        "links": [
            "53f5dcbc2de38b22"
        ],
        "x": 535,
        "y": 560,
        "wires": []
    }
]