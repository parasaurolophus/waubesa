[
    {
        "id": "c7141ffb22d64190",
        "type": "tab",
        "label": "Chez Nous Main",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c8c4090e523da434",
        "type": "tab",
        "label": "Basement Hue",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1cf0490e7de2f93d",
        "type": "tab",
        "label": "PowerView",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f03b6ceb81ed7dac",
        "type": "tab",
        "label": "Automation",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "63d8cb10398da04b",
        "type": "tab",
        "label": "Lighting",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3b6d32569acb507d",
        "type": "tab",
        "label": "Downstairs",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1344247d533f754a",
        "type": "tab",
        "label": "Main Bathroom",
        "disabled": false,
        "info": "Main Bathroom home automation integration.",
        "env": []
    },
    {
        "id": "e44149a93fbe9b1b",
        "type": "tab",
        "label": "Main Floor",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "adfd8ae4a2eaf844",
        "type": "tab",
        "label": "Yard",
        "disabled": false,
        "info": "Front Yard home automation integration.",
        "env": []
    },
    {
        "id": "5785c8d9f39df67e",
        "type": "subflow",
        "name": "Send to Hue",
        "info": "Send a message to the API (version 2) on a given Hue Bridge.\n\nSee <https://developers.meethue.com/develop/hue-api-v2/> for details.\n\n# Configuration\n\n`ADDRESS` environment variable is the bridge's IP address.\n\n`KEY` environment variable is the client access token for the message.\n\n# Input\n\n`msg.topic` is the API URI, e.g. `/resource`, `/room/0ca8f049-7ac9-4872-8069-4770834e4f11` etc.\n\n`msg.payload` is the message body, if any.\n\n`msg.method` is the HTTP request method, e.g. `GET`, `PUT` etc.\n\n# Outputs\n\nIf successful, the HTTP response will be sent as a parsed JSON object from output 1.\n\nA standard Node-RED error message will be sent on output 2 if the `http request` node throws an exception.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "c9c806d81ab63ac4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 600,
                "y": 40,
                "wires": [
                    {
                        "id": "20ac42d7649c260a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            },
            {
                "name": "KEY",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-send",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Send a command to the Hue Bridge API",
            "keywords": "http, philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 600,
            "y": 120,
            "wires": [
                {
                    "id": "1e35b6e766e6b3d1",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "75bc72a16c4da2c8",
        "type": "subflow",
        "name": "Hue Access Token",
        "info": "Use the Hue Bridge API to create a client access token.\n\n**Invoke this subflow within 30 seconds of pressing the button on top of the bridge. Watch the debug console output to see the response. If successful, you will see the generated key among the response payload's properties.**\n\nSee <https://developers.meethue.com/develop/hue-api-v2/getting-started/> for details.\n\n# Configuration\n\n`ADDRESS` environment variable is the bridge's IP address.\n\n`USERNAME` environment variable is the client \"user name\" for which a key is being requested.\n\n# Input\n\nIncoming message is ignored.\n\n# Outputs\n\nThe HTTP response will be sent as a parsed JSON object. If successful, look for the value of the `msg.payload.success.username` property in the output. That is the string you should use as the access token header in all subsequent Hue Bridge API request messages.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "7316ae1eef4c6295"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 440,
                "y": 40,
                "wires": [
                    {
                        "id": "e4718ecfdb248cc7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            },
            {
                "name": "USERNAME",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-access-token",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Invoke the Hue Bridge API for registering a client",
            "keywords": "http, philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 440,
            "y": 100,
            "wires": [
                {
                    "id": "64ad1b43047cb836",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e4e37acec8ce8ff8",
        "type": "subflow",
        "name": "Get Hue Metadata",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "cb88b646e431c69a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 520,
                "y": 40,
                "wires": [
                    {
                        "id": "0db5fb5377e50287",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "module": "node-red-subflow-hue-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Parse the response from a GET request for all metadata from a Hue bridge",
            "keywords": "philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 1080,
            "y": 140,
            "wires": [
                {
                    "id": "7e8a765a307e5767",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "d0a1d8f666dafcc0",
        "type": "subflow",
        "name": "Get Hue Group Metadata",
        "info": "Extract and consolidate metadata for a room or a zone. Note that from an API point of view, the only difference between rooms and zones is the URI used to access them.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "ead0e15743d4fae3"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1360,
                "y": 280,
                "wires": [
                    {
                        "id": "305a7fead9d0cfcb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "module": "node-red-subflow-hue-group-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Extract and reformat frequently used Hue metadata for rooms and \"zones\"",
            "keywords": "philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 1360,
            "y": 360,
            "wires": [
                {
                    "id": "ceedd7f5abe60f4c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "1a6413355bbb49cc",
        "type": "subflow",
        "name": "Get PowerView Scenes",
        "info": "Use the _Hunter Douglas PowerView_&reg; hub API to get metadata for scenes.\n\n\nSee <https://motorisation.hde.nl/hd/powerview/general-guides/API/> for details.\n\n# Configuration\n\nThe `ADDRESS` environment variable must be configured with the IP address of the hub.\n\n# Input\n\nAll input message properties are ignored but care should be taken not to pass any through that could affect the behavior of a `http request` node in unintended ways.\n\n# Output\n\nHTTP response from the hub.\n",
        "category": "powerview",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "643e95dd6df2d982"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 60,
                "wires": [
                    {
                        "id": "b47b1889ebf029bd",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-powerview-scenes",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Get the scene configuration from a PowerView hub",
            "keywords": "http, powerview, hunter douglas",
            "license": "Apache-2.0"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 620,
            "y": 140,
            "wires": [
                {
                    "id": "013c4b7388921d23",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9c4e4702e4660adf",
        "type": "subflow",
        "name": "Set PowerView Scene",
        "info": "Use the _Hunter Douglas PowerView_&reg; hub API to activate a given window shade scene.\n\n\nSee <https://motorisation.hde.nl/hd/powerview/general-guides/API/> for details.\n\n# Configuration\n\nThe `ADDRESS` environment variable must be configured with the IP address of the hub.\n\n# Input\n\n`msg.payload` containing the id of the scene to activate.\n\nAll other input message properties are ignored but care should be taken not to pass any through that could affect the behavior of a `http request` node in unintended ways.\n\n# Output\n\nHTTP response from the hub.\n\n# Side Effects\n\nIf successful, the window shades will move to the settings defined by the specified scene as configured using the _PowerView_&reg; mobile app.",
        "category": "powerview",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "dcd553804e687131"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 600,
                "y": 60,
                "wires": [
                    {
                        "id": "8dc3bcf508fc6c98",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-powerview-set-scene",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Activate a PowerView scene",
            "keywords": "http, hunter douglas, powerview",
            "license": "Apache-2.0"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 600,
            "y": 140,
            "wires": [
                {
                    "id": "728ab503eb1eb941",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "764913cd47ccb672",
        "type": "subflow",
        "name": "Get Hue UI Metadata",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "82422755412f473d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1000,
                "y": 240,
                "wires": [
                    {
                        "id": "91e4b7eba9a37929",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "module": "node-red-subflow-hue-ui-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Extract Hue metadata used to author dashboard and HomeKit integration",
            "keywords": "philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 1000,
            "y": 320,
            "wires": [
                {
                    "id": "701c769269c83bb0",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "8470ac2dde4f0946",
        "type": "subflow",
        "name": "Minutes",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "fa785e28cabe4652"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 720,
                "y": 60,
                "wires": [
                    {
                        "id": "3f22e4d749ec41b9",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 900,
            "y": 140,
            "wires": [
                {
                    "id": "863912521dd63f8a",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "dacb5b6825c3fbfa",
        "type": "subflow",
        "name": "Time of Day",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 160,
                "wires": [
                    {
                        "id": "0e4b39aca784ebec"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 840,
                "y": 120,
                "wires": [
                    {
                        "id": "d751bef6d165f80a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 1020,
            "y": 200,
            "wires": [
                {
                    "id": "cac8c868a506ee47",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "a8c212909cbdf020",
        "type": "subflow",
        "name": "Theme",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 120,
                "wires": [
                    {
                        "id": "fd1cca0eebb58024"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1060,
                "y": 80,
                "wires": [
                    {
                        "id": "38df9871af85ece2",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 1060,
            "y": 160,
            "wires": [
                {
                    "id": "38df9871af85ece2",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "5e6607a62e250494",
        "type": "subflow",
        "name": "Timer Events",
        "info": "",
        "category": "waubesa",
        "in": [],
        "out": [
            {
                "x": 820,
                "y": 60,
                "wires": [
                    {
                        "id": "746fbbdf57805028",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 820,
            "y": 140,
            "wires": [
                {
                    "id": "9a250dd9b68ef942",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c0cc9d812cad7bfc",
        "type": "subflow",
        "name": "Filter Timer Events",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "ade066e6a8d92e9f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 560,
                "y": 40,
                "wires": [
                    {
                        "id": "8596ad874a62f12a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 620,
            "y": 120,
            "wires": [
                {
                    "id": "75c338222950c3e3",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "99c62215b637bb07",
        "type": "subflow",
        "name": "Bedtime Events",
        "info": "",
        "category": "waubesa",
        "in": [],
        "out": [
            {
                "x": 910,
                "y": 60,
                "wires": [
                    {
                        "id": "7b2f5cbded9ab0b8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 820,
                "y": 220,
                "wires": [
                    {
                        "id": "53b63e2bae9ee295",
                        "port": 0
                    },
                    {
                        "id": "801bc206cfa0803d",
                        "port": 0
                    },
                    {
                        "id": "95b7811ecc725e36",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "randomized",
            "minutes"
        ],
        "status": {
            "x": 860,
            "y": 140,
            "wires": [
                {
                    "id": "7b2f5cbded9ab0b8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "3faadb46568c393b",
        "type": "subflow",
        "name": "Shade Automation",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 140,
                "wires": [
                    {
                        "id": "544b63b45a2acc4a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 840,
                "y": 100,
                "wires": [
                    {
                        "id": "23c6837d10f1e3bc",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 840,
            "y": 180,
            "wires": [
                {
                    "id": "23c6837d10f1e3bc",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "4920eed654c67f8d",
        "type": "subflow",
        "name": "Get PowerView Rooms",
        "info": "",
        "category": "powerview",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "465f820637e0f695"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 620,
                "y": 60,
                "wires": [
                    {
                        "id": "1ffd2b5f79995711",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {},
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 620,
            "y": 120,
            "wires": [
                {
                    "id": "014121091f945d16",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "efbc3338fa01d34f",
        "type": "subflow",
        "name": "Hue SSE",
        "info": "",
        "category": "hue",
        "in": [],
        "out": [
            {
                "x": 1200,
                "y": 140,
                "wires": [
                    {
                        "id": "5d5f04c37ee373d7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            },
            {
                "name": "KEY",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 1200,
            "y": 220,
            "wires": [
                {
                    "id": "b5cf360a52f4a2ba",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "d11bc6d84c35d70a",
        "type": "subflow",
        "name": "Hue Event",
        "info": "Store the cumulative state of all devices for a given Hue Bridge in the context store of a function node in this subflow. Adjust the incoming `msg.payload`, `msg.topic`, `msg.qos` and `msg.retain` to signal the current cumulative state of the device which emitted the given SSE event using MQTT.",
        "category": "hue",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "83573f8c9366c7cd"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 480,
                "y": 60,
                "wires": [
                    {
                        "id": "55326c4cfd5e25e3",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "TOPIC",
                "type": "str",
                "value": "hue"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 500,
            "y": 140,
            "wires": [
                {
                    "id": "ee3c281b455bf67c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e2cbe8e06513f144",
        "type": "subflow",
        "name": "Initial State",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "2b45a9462f18d572"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 740,
                "y": 60,
                "wires": [
                    {
                        "id": "48f11d601e9b48fb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "TOPIC",
                "type": "str",
                "value": "hue"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 920,
            "y": 140,
            "wires": [
                {
                    "id": "2bd82e2456749a93",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9c5370bf6c44a3a5",
        "type": "subflow",
        "name": "Grouped Light State",
        "info": "",
        "category": "hue",
        "in": [],
        "out": [
            {
                "x": 760,
                "y": 60,
                "wires": [
                    {
                        "id": "62331e0d934053ec",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "BRIDGE_NAME",
                "type": "env",
                "value": "BRIDGE_NAME"
            },
            {
                "name": "GROUPED_LIGHT_ID",
                "type": "env",
                "value": "GROUPED_LIGHT_ID"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 420,
            "y": 180,
            "wires": [
                {
                    "id": "a3d9bd179323dad5",
                    "port": 0
                },
                {
                    "id": "7bce3d1a00be603b",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "454f48125d29e6ef",
        "type": "subflow",
        "name": "Homebridge Switch",
        "info": "This subflow implements the Node-RED side of a Homebridge switch using the mqttthing plugin. That plugin uses a confused nomenclature regarding 'get' and 'set,' as well as a rather over-engineered repertoire of MQTT messaging that still manages to be missing critical features:\n\n- mqttthing sends a 'set' message each time the user toggles the state of the switch using HomeKit\n\n- mqttthing changes the state of a switch upon receipt of a 'get' message\n\n- mqttthing does _not_ send a 'set' message when the switch's state changes due to receipt of a 'get' message.\n\n- mqttthing expects an acknowledging 'get' message after it sends a 'set' message\n\n- mqttthing sends a 'start' message when the plugin is started, i.e. when Homebridge is restarted\n\n- mqttthing does not remember the state of a switch across restarts\n\nIt is up to clients like Node-RED flows to make sense of the confused stream of messages that results, including the fact that 'get' and 'set' have the opposite of their conventional meanings.",
        "category": "homebridge",
        "in": [
            {
                "x": 720,
                "y": 60,
                "wires": [
                    {
                        "id": "d3ca376c2c496852"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 260,
                "wires": [
                    {
                        "id": "d8d21ee8eaa4c778",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "NAME",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {},
        "color": "#AAAA66",
        "icon": "node-red-dashboard/ui_switch.png",
        "status": {
            "x": 820,
            "y": 340,
            "wires": [
                {
                    "id": "d8d21ee8eaa4c778",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "ea7b9754db9fd0cd",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard sunset scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "af712bf4ec4004b4",
            "18f53b7627e645e4",
            "b22f3931c3a7aaa9",
            "34a695c0d0260e5a",
            "d07f9471a4a06ae8",
            "74a870cad9944a03"
        ],
        "x": 134,
        "y": 119,
        "w": 972,
        "h": 82
    },
    {
        "id": "afbdc8b60c682c85",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard jolly scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "074874e0ff13a7b1",
            "a5ea4f7eb61a9136",
            "60976d31a8dafe99",
            "256ba437f41dfbcf",
            "6cf088c77229de1d",
            "40657a16668306c1"
        ],
        "x": 134,
        "y": 419,
        "w": 952,
        "h": 82
    },
    {
        "id": "1ce03cecd5db8bc6",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Turn off main floor lights group using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "07ccb0b07e6fada8",
            "4baea86ab327a4b9",
            "ec1b9da9a2a0dde0",
            "33533dc0ac4ff870",
            "2efdae9d98c90cf9",
            "76e95a00d6e3b9ad"
        ],
        "x": 144,
        "y": 19,
        "w": 962,
        "h": 82
    },
    {
        "id": "3483ce20c1996e6c",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor nightlight scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3ed1a4d37d1548b4",
            "53509cbc2f897eb4",
            "7b10a17dd5bc4c0f",
            "1462dac4d5543f0a",
            "c4ad8310f9a121b0",
            "08d74ad519cdaa27"
        ],
        "x": 144,
        "y": 219,
        "w": 1002,
        "h": 82
    },
    {
        "id": "83a2d6e5f2f3347b",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor bright scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3fd4ceb10de1cfab",
            "7519f356aef82889",
            "4104b520ce069209",
            "c24b271f1c0a013a",
            "5b9644b03821362f",
            "77c6ae6853e648c7"
        ],
        "x": 144,
        "y": 119,
        "w": 982,
        "h": 82
    },
    {
        "id": "96bfb32777af9e2c",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Turn off main bathroom lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "e74fcadba6a2b4ca",
            "4288f4e0d18dbff6",
            "d79164592fe44617"
        ],
        "x": 134,
        "y": 139,
        "w": 462,
        "h": 82
    },
    {
        "id": "e936dbad3fb3b587",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Select lighting mode",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "061d8c40c8ed16ab",
            "1993fd8165053adf"
        ],
        "x": 124,
        "y": 271.5,
        "w": 242,
        "h": 97
    },
    {
        "id": "2af1d2a51c281b62",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Activate \"night\" lighting mode",
        "style": {
            "label": true,
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "color": "#000000"
        },
        "nodes": [
            "549a2335fb839c37",
            "ae9f9aeb54f6cfb1",
            "8e8390b13cc5c45b",
            "c897f7f0ee8680dc"
        ],
        "x": 394,
        "y": 479,
        "w": 232,
        "h": 162
    },
    {
        "id": "73991d26373b19c7",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Activate \"evening\" lighting mode",
        "style": {
            "stroke": "none",
            "label": true,
            "fill": "#000000",
            "fill-opacity": "0.1",
            "color": "#000000"
        },
        "nodes": [
            "2837183323a61e04",
            "7ab1620c3349854b",
            "c68369c3781694e3",
            "b0ee0f2f8155fe9b",
            "e270017761dfd27d",
            "b9f7a65beebcddfe",
            "98acfbdd1bdfd0c0",
            "bb8c3929aaa44aac"
        ],
        "x": 404,
        "y": 239,
        "w": 552,
        "h": 222
    },
    {
        "id": "b940bf3a0df755de",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Activate \"morning\" lighting mode",
        "style": {
            "stroke": "none",
            "label": true,
            "fill": "#000000",
            "fill-opacity": "0.1",
            "color": "#000000"
        },
        "nodes": [
            "981dbc2364b09d66",
            "7d12aa9a36e86798",
            "6c3e6b4543f8c9ac",
            "f12fbd86617caaf9"
        ],
        "x": 394,
        "y": 59,
        "w": 232,
        "h": 162
    },
    {
        "id": "cccd3d3ae4af3207",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Fetch the PowerView window shade room and scene metadata from the Chez Nous Shades hub",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": false
        },
        "nodes": [
            "cae953f2c04362ad",
            "536874de79956f84",
            "1cee4f351bd59563",
            "f390ba1d460e3399",
            "fc5defb4e76d244e",
            "f42aab98c1153884"
        ],
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 54,
        "y": 39,
        "w": 1292,
        "h": 82
    },
    {
        "id": "5a2c18585609cfae",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Activate main bathroom nightlight scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "a4c3ecea47eed101",
            "fbd53f7f18ca6655",
            "26ad3b6fd956be59"
        ],
        "x": 134,
        "y": 39,
        "w": 472,
        "h": 82
    },
    {
        "id": "2238e89a8f0c976d",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Turn off yard lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ec4c4a28a59d105e",
            "fb388fbfb4e38ca3",
            "dc1d9849661717f1"
        ],
        "x": 134,
        "y": 19,
        "w": 452,
        "h": 82
    },
    {
        "id": "e1fa765ec5a5ebd7",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor sunset scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6cae9b1ccc68cb9e",
            "8ae7ee0c87df1191",
            "edc2f01358673517",
            "76f3eb6c53a0310c",
            "66b239fbae02c252",
            "c99382ee9ae33d16"
        ],
        "x": 144,
        "y": 319,
        "w": 982,
        "h": 82
    },
    {
        "id": "dd577488786042ba",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard spooky scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "29a6f065ab64d562",
            "53afc06e5cea0b0d",
            "a225232dc86a3b6f",
            "ce692ff752c427a6",
            "9fd4f397e5d23392",
            "ecf996995825cb3e"
        ],
        "x": 134,
        "y": 319,
        "w": 972,
        "h": 82
    },
    {
        "id": "0117b53379eade19",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard tribal scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "816be5cd3b82bf0b",
            "ed68842beab6579e",
            "a6475288998b4e07",
            "35ec7b633401cd2e",
            "c5dfb48af9335c64",
            "2e85bfabe8b4104b"
        ],
        "x": 134,
        "y": 219,
        "w": 952,
        "h": 82
    },
    {
        "id": "70e9b8db12799d18",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Send requests to the Hue API on the Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "14e5342cb50f366f",
            "7df3e5fbd6e9aa8a",
            "3b5ab296575b53d4"
        ],
        "x": 994,
        "y": 19,
        "w": 385,
        "h": 82
    },
    {
        "id": "2afac67683a580f7",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Window shade automation",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": false
        },
        "nodes": [
            "3c70a7443900cb3f",
            "0514602b711a8136",
            "a0985c083540376f"
        ],
        "x": 164,
        "y": 139,
        "w": 522,
        "h": 82
    },
    {
        "id": "9b9a844a8df2769d",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Trigger automation from MQTT",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "label-position": "sw"
        },
        "nodes": [
            "6f7db4dc310c6c2f",
            "18c9ac4127308f24",
            "c09a00ecb1c547ec",
            "21690efdfa2776cf",
            "58abeb0fb7d59222"
        ],
        "x": 774,
        "y": 419,
        "w": 462,
        "h": 210
    },
    {
        "id": "daced5cc49fcef0a",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "UI for enabling automation",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "f086604c46663235",
            "9810ca9f681aaebf",
            "8221b9e4e7b1d425",
            "6ccc90dff91a1ab2"
        ],
        "x": 34,
        "y": 59,
        "w": 992,
        "h": 82
    },
    {
        "id": "1723570f3a1a07a2",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Current time each minute",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "802ec81ddfb59441"
        ],
        "x": 34,
        "y": 379,
        "w": 192,
        "h": 82
    },
    {
        "id": "6d13af3b8a66acb9",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Send time of day to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6bdf715d945fbc10",
            "3460ef4d47e9a47b",
            "26c0274d3d6b7697",
            "5085c8772606b854",
            "305c62d581d22adf"
        ],
        "x": 254,
        "y": 419,
        "w": 492,
        "h": 202
    },
    {
        "id": "31ed5707953578b9",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Send theme to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "c168b5c3119db1de",
            "ee8e24d1cd81c931",
            "a3dd9bfc89e0e94a"
        ],
        "x": 254,
        "y": 239,
        "w": 332,
        "h": 162
    },
    {
        "id": "64b945726db0f60a",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "UI for Bedtime",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "bbcb2a37e7e328bb",
            "cf6562b252b0fea0",
            "abe65b742c235eaf",
            "4aa998790c81c0de",
            "d7fe731e9b583602",
            "114b9703250b5ff7",
            "01bd7e5d506c131c"
        ],
        "x": 614,
        "y": 159,
        "w": 692,
        "h": 242
    },
    {
        "id": "290b83ef8e01ae0f",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Use within 30 seconds of pressing link button on Chez Nous Main bridge",
        "style": {
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "stroke": "none",
            "fill": "#000000"
        },
        "nodes": [
            "51bce99c75aa12c6",
            "f3ab10cd192709b0",
            "73a1ec5ed8ebc167"
        ],
        "x": 34,
        "y": 19,
        "w": 812,
        "h": 82
    },
    {
        "id": "87285e6bf01cff03",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Activate PowerView scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": false
        },
        "nodes": [
            "2f6cc09457939ce2",
            "7173aa38c9fa93dc",
            "618e79a58ab8143a"
        ],
        "x": 164,
        "y": 239,
        "w": 352,
        "h": 82
    },
    {
        "id": "11ad281459e35854",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Get device state changes from Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "2d0604f94ef7bff4",
            "8c9d79d2791e9b02",
            "303e0cda741131c4",
            "79befa4d74086653",
            "285ab85f3bc898ab",
            "dc5f811e2a68c624",
            "4d2dc9a6e42d0548",
            "d037cf6840797c18",
            "38aac048253037d1",
            "55c3acb617442eed",
            "f495c65852c626b8",
            "1e02d0d108f3d99e",
            "b8809f079975618d",
            "4b02c8d98699ea1b",
            "552fd9d40d2d6230",
            "ca7892597e882ca4",
            "4f37c583c90e46dd",
            "2b25868eefa2d150",
            "84181a5971ac595a",
            "b59ea6517c73a038"
        ],
        "x": 34,
        "y": 119,
        "w": 1352,
        "h": 622
    },
    {
        "id": "71baecd2f8b62fa2",
        "type": "group",
        "z": "f03b6ceb81ed7dac",
        "name": "Send to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "b6d82709eb52c890",
            "cdbaac61adce70d0",
            "7bb6a0db7deb5336"
        ],
        "x": 264,
        "y": 659,
        "w": 362,
        "h": 82
    },
    {
        "id": "e42ca696c53ad222",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "",
        "style": {
            "stroke": "none",
            "fill": "#ff0000",
            "fill-opacity": "0.1",
            "label": true
        },
        "nodes": [
            "7c8305b6e16fe380",
            "40da64bafb19cd84"
        ],
        "x": 34,
        "y": 679,
        "w": 512,
        "h": 82
    },
    {
        "id": "6daca851d4692833",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Send requests to the Hue API on the Basement Hue bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ffef2ca7a90d4b74",
            "76de6350a9a0c4fe",
            "3397976f94fcc061"
        ],
        "x": 1004,
        "y": 39,
        "w": 375,
        "h": 82
    },
    {
        "id": "cf29b66e60017a62",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Use within 30 seconds of pressing link button on Basement Hue bridge",
        "style": {
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "stroke": "none",
            "fill": "#000000"
        },
        "nodes": [
            "07b48810bc6739bb",
            "0ed7befa1497d56c",
            "02ae8cd7fbb90513"
        ],
        "x": 34,
        "y": 39,
        "w": 732,
        "h": 82
    },
    {
        "id": "851ce0bce3af3965",
        "type": "group",
        "z": "c8c4090e523da434",
        "name": "Get device state changes from Basement Hue bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6dfdb240e3169ffe",
            "715136c1ddfd2fe4",
            "023bf454a695d750",
            "6427cb1332984c1c",
            "56194bdc16a7342c",
            "590ba447efc05f92",
            "e34f0da72fccd025",
            "40f1f326e5252bf8",
            "2db42614cfe51d4e",
            "d38dbc4565c5d33c",
            "77b058dc291d85ba",
            "3165373e1a352533",
            "0dcaf7d987909d6e",
            "22ed3de25a495f84",
            "9ea6734c5fb29211",
            "0efb085d1f57522a",
            "ff16255d72661bbb"
        ],
        "x": 34,
        "y": 139,
        "w": 1352,
        "h": 522
    },
    {
        "id": "e473ec1af3fbe117",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Activate Hue scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "bc63e05761a0d07a",
            "ee3252501a60964c",
            "cb098cd1b9e6bc91",
            "2a7d60d3f040bce2",
            "4a8df6a851367fc5"
        ],
        "x": 134,
        "y": 339,
        "w": 932,
        "h": 82
    },
    {
        "id": "9c0627f771f74ac9",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Toggle Main Bathroom lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "b04ce8dc0e45f95c",
            "00195b9d300d86fb",
            "698fe18078385cd6",
            "da01554e00b01389"
        ],
        "env": [
            {
                "name": "BRIDGE_NAME",
                "value": "chez-nous-main",
                "type": "str"
            },
            {
                "name": "GROUPED_LIGHT_ID",
                "value": "aea74e74-d544-4d08-ad71-3b6665045256",
                "type": "str"
            }
        ],
        "x": 134,
        "y": 239,
        "w": 852,
        "h": 82
    },
    {
        "id": "ed0ae9fed36f8120",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate Hue scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "e8cad2d9dc25fafc",
            "3b2393cf0f89d70f",
            "f8b018621c94b655",
            "e382f045dd1a840b",
            "8465c045864905aa"
        ],
        "x": 144,
        "y": 519,
        "w": 902,
        "h": 82
    },
    {
        "id": "4a52d10ef0e20b15",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Toggle Main Bathroom lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1f3f63aa76eb31f7",
            "7133f430a04cea7f",
            "209a46c2681410be",
            "beec2a6c6e6f63f5"
        ],
        "env": [
            {
                "name": "BRIDGE_NAME",
                "value": "chez-nous-main",
                "type": "str"
            },
            {
                "name": "GROUPED_LIGHT_ID",
                "value": "9c1c7975-2f47-4552-bac8-c19b643cd678",
                "type": "str"
            }
        ],
        "x": 144,
        "y": 419,
        "w": 802,
        "h": 82
    },
    {
        "id": "560697371f3db13c",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate Hue scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "25c2139286d4bdc2",
            "5b037c1dc36fb7b6",
            "42f80726fba6424c",
            "fdca4c3d3432da19",
            "83168e5d7847c8c6"
        ],
        "x": 134,
        "y": 619,
        "w": 872,
        "h": 82
    },
    {
        "id": "65d303ac6b6c8a3a",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Toggle Yard lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "13729e19d2f78a2f",
            "5551026e4fa6c94a",
            "1c310e455fa0d7cc",
            "ea698f91d3fe0804"
        ],
        "env": [
            {
                "name": "BRIDGE_NAME",
                "value": "chez-nous-main",
                "type": "str"
            },
            {
                "name": "GROUPED_LIGHT_ID",
                "value": "bad8480b-b404-42d1-a9e7-a4a69f400971",
                "type": "str"
            }
        ],
        "x": 134,
        "y": 519,
        "w": 732,
        "h": 82
    },
    {
        "id": "fbf9850f0a37aefc",
        "type": "group",
        "z": "3b6d32569acb507d",
        "name": "Activate Hue scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1027648dc2bca366",
            "7b1fbba234712d34",
            "745d80338e7b06e2",
            "d1be10edf99f6a93",
            "80ea4fc24f4dc06d"
        ],
        "x": 134,
        "y": 139,
        "w": 892,
        "h": 82
    },
    {
        "id": "1a0982001bbd9e21",
        "type": "group",
        "z": "3b6d32569acb507d",
        "name": "Toggle Main Bathroom lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "44e691312a3150a0",
            "897b73888d87a462",
            "2879e42cc1d7febc",
            "36103b1467413ff0"
        ],
        "env": [
            {
                "name": "BRIDGE_NAME",
                "value": "basement-hue",
                "type": "str"
            },
            {
                "name": "GROUPED_LIGHT_ID",
                "value": "35e38421-eae8-44ca-9dac-332c7618809b",
                "type": "str"
            }
        ],
        "x": 134,
        "y": 39,
        "w": 772,
        "h": 82
    },
    {
        "id": "e79e0110c2317edb",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "",
        "keyname": "",
        "caname": "",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "63c00f105cc3255f",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#9929bd",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#9929bd",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#9929bd",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#bb58db",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#9929bd",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Waubesa",
            "hideToolbar": "false",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "MM/DD/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "722d62f3b93039c3",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.local",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ec4d94df679f3b11",
        "type": "ui_tab",
        "name": "Automation",
        "icon": "fa-clock-o",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ad4d885f83f029a5",
        "type": "ui_group",
        "name": "Bedtime",
        "tab": "ec4d94df679f3b11",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "25c7f0078ed443dd",
        "type": "ui_group",
        "name": "Automation",
        "tab": "ec4d94df679f3b11",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "bd2e32f5ca3a0a0b",
        "type": "ui_tab",
        "name": "Main Floor",
        "icon": "fa-lightbulb-o",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "76ef8fc7d96d4fe5",
        "type": "ui_group",
        "name": "Main Bathroom",
        "tab": "bd2e32f5ca3a0a0b",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "1cfe5b09ac4ad35f",
        "type": "ui_group",
        "name": "Main Floor",
        "tab": "bd2e32f5ca3a0a0b",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "a14f974504f5a504",
        "type": "ui_group",
        "name": "Yard",
        "tab": "bd2e32f5ca3a0a0b",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "6b563177ff8e0aae",
        "type": "ui_tab",
        "name": "Basement",
        "icon": "fa-lightbulb-o",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "05be88f22ca65685",
        "type": "ui_group",
        "name": "Downstairs",
        "tab": "6b563177ff8e0aae",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "c9c806d81ab63ac4",
        "type": "delay",
        "z": "5785c8d9f39df67e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 150,
        "y": 40,
        "wires": [
            [
                "fa870f94fa1ea10b"
            ]
        ]
    },
    {
        "id": "fa870f94fa1ea10b",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"hue-application-key\": $env('KEY')}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/clip/v2/' & topic",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 40,
        "wires": [
            [
                "20ac42d7649c260a"
            ]
        ]
    },
    {
        "id": "20ac42d7649c260a",
        "type": "http request",
        "z": "5785c8d9f39df67e",
        "name": "",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "e79e0110c2317edb",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 490,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "1e35b6e766e6b3d1",
        "type": "status",
        "z": "5785c8d9f39df67e",
        "name": "",
        "scope": [
            "c9c806d81ab63ac4"
        ],
        "x": 500,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "e4718ecfdb248cc7",
        "type": "http request",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "e79e0110c2317edb",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7316ae1eef4c6295",
        "type": "change",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"devicetype\":$env('USERNAME'),\"generateclientkey\":true}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/api'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 40,
        "wires": [
            [
                "e4718ecfdb248cc7"
            ]
        ]
    },
    {
        "id": "64ad1b43047cb836",
        "type": "status",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "scope": [
            "e4718ecfdb248cc7"
        ],
        "x": 340,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "0ced85e29fd61f45",
        "type": "split",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 550,
        "y": 120,
        "wires": [
            [
                "4a8994fb6eac6d69"
            ]
        ]
    },
    {
        "id": "4a8994fb6eac6d69",
        "type": "switch",
        "z": "e4e37acec8ce8ff8",
        "name": "array",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "array",
                "vt": "array"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 670,
        "y": 120,
        "wires": [
            [
                "b8db07d6160e53c2"
            ],
            [
                "7e8a765a307e5767"
            ]
        ]
    },
    {
        "id": "b8db07d6160e53c2",
        "type": "split",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 790,
        "y": 100,
        "wires": [
            [
                "7e8a765a307e5767"
            ]
        ]
    },
    {
        "id": "cb88b646e431c69a",
        "type": "function",
        "z": "e4e37acec8ce8ff8",
        "name": "segregateTypes",
        "func": "if (msg.payload.errors.length > 0) {\n\n    throw msg.payload.errors\n\n}\n\nlet resources = msg.payload.data\n\nlet arrays = {}\n\nresources.forEach(resource => {\n\n    let array = arrays[resource.type] || []\n    \n    array.push(resource)\n    arrays[resource.type] = array\n\n})\n\nmsg.payload = arrays\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 80,
        "wires": [
            [
                "0db5fb5377e50287"
            ]
        ]
    },
    {
        "id": "0db5fb5377e50287",
        "type": "change",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "metadata",
                "pt": "msg",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 350,
        "y": 80,
        "wires": [
            [
                "0ced85e29fd61f45"
            ]
        ]
    },
    {
        "id": "7e8a765a307e5767",
        "type": "change",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.type",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "ead0e15743d4fae3",
        "type": "split",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 130,
        "y": 80,
        "wires": [
            [
                "04c837cc198de867"
            ]
        ]
    },
    {
        "id": "50f53825110eb50b",
        "type": "join",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 870,
        "y": 140,
        "wires": [
            [
                "39d39fe20c924bd4"
            ]
        ]
    },
    {
        "id": "04c837cc198de867",
        "type": "switch",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "parts.index + 1 >= parts.count",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 250,
        "y": 80,
        "wires": [
            [
                "3ecf91f3ad2bca8b"
            ],
            [
                "4e6f1f1f5f059d17"
            ]
        ]
    },
    {
        "id": "3ecf91f3ad2bca8b",
        "type": "change",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "last",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 390,
        "y": 60,
        "wires": [
            [
                "4e6f1f1f5f059d17"
            ]
        ]
    },
    {
        "id": "39d39fe20c924bd4",
        "type": "switch",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "property": "last",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 990,
        "y": 140,
        "wires": [
            [
                "f22ab48e2361fa72"
            ],
            [
                "2ec0eb1e91670554"
            ]
        ]
    },
    {
        "id": "f22ab48e2361fa72",
        "type": "change",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "last",
                "pt": "msg",
                "to": "complete",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 120,
        "wires": [
            [
                "2ec0eb1e91670554"
            ]
        ]
    },
    {
        "id": "2ec0eb1e91670554",
        "type": "join",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1210,
        "y": 200,
        "wires": [
            [
                "305a7fead9d0cfcb"
            ]
        ]
    },
    {
        "id": "88c9d382af974358",
        "type": "function",
        "z": "d0a1d8f666dafcc0",
        "name": "groupedLightForGroup",
        "func": "let findGroupedLightService = group => {\n\n    for (let index = 0; index < group.services.length; ++index) {\n\n        let service = group.services[index]\n\n        if (service.rtype == 'grouped_light') {\n\n             return service\n\n        }\n    }\n    \n    throw 'no grouped_light service found in ' + JSON.stringify(group)\n\n}\n\nlet findGroupedLight = id => {\n    \n    for (let key in msg.metadata.grouped_light) {\n        \n        let grouped_light = msg.metadata.grouped_light[key]\n        \n        if (grouped_light.id == id) {\n            \n            return grouped_light\n            \n        }\n    }\n    \n    throw 'no grouped light found with id ' + id\n\n}\n\ntry {\n\n    let service = findGroupedLightService(msg.payload)\n    let groupedLight = findGroupedLight(service.rid)\n\n    node.status({\n        text: groupedLight.id,\n        fill: 'green',\n        shape: 'dot'\n    })\n    \n    msg.topic = 'grouped_light'\n    msg.payload = groupedLight\n    return msg\n\n} catch (e) {\n\n    node.warn(e)\n    return null\n\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 80,
        "wires": [
            [
                "50f53825110eb50b"
            ]
        ]
    },
    {
        "id": "564c65fb7e534107",
        "type": "function",
        "z": "d0a1d8f666dafcc0",
        "name": "scenesForGroup",
        "func": "let group = msg.payload\n\nlet scenes = []\n\nmsg.metadata.scene.forEach(scene => {\n\n    if (scene.group.rid == group.id) {\n\n        scenes.push(scene)\n\n    }\n})\n\nnode.status({\n    text: 'added ' + scenes.length + ' scenes for group ' + group.metadata.name,\n    fill: 'green',\n    shape: 'dot'\n})\n\nmsg.topic = 'scene'\nmsg.payload = scenes\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 140,
        "wires": [
            [
                "50f53825110eb50b"
            ]
        ]
    },
    {
        "id": "ceedd7f5abe60f4c",
        "type": "status",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "scope": [
            "98b8b9c0174dc6b0",
            "564c65fb7e534107",
            "88c9d382af974358"
        ],
        "x": 1260,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "98b8b9c0174dc6b0",
        "type": "function",
        "z": "d0a1d8f666dafcc0",
        "name": "passThroughGroup",
        "func": "node.status({\n    text: msg.payload.metadata.name,\n    fill: 'green',\n    shape: 'dot'\n})\n\nlet last = msg.last\n\nif (last === undefined) {\n    \n    last = false\n\n}\n\nmsg.topic = 'group'\nmsg.last = last\nmsg.type = msg.payload.type\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 200,
        "wires": [
            [
                "50f53825110eb50b"
            ]
        ]
    },
    {
        "id": "4e6f1f1f5f059d17",
        "type": "fan",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "x": 450,
        "y": 140,
        "wires": [
            [
                "88c9d382af974358",
                "564c65fb7e534107",
                "98b8b9c0174dc6b0"
            ]
        ]
    },
    {
        "id": "305a7fead9d0cfcb",
        "type": "change",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "type",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1240,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "643e95dd6df2d982",
        "type": "change",
        "z": "1a6413355bbb49cc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/scenes/'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 60,
        "wires": [
            [
                "f9e32f55c8917d91"
            ]
        ]
    },
    {
        "id": "f9e32f55c8917d91",
        "type": "http request",
        "z": "1a6413355bbb49cc",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 60,
        "wires": [
            [
                "b47b1889ebf029bd"
            ]
        ]
    },
    {
        "id": "b47b1889ebf029bd",
        "type": "change",
        "z": "1a6413355bbb49cc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$map(payload.sceneData, function($scene) {\t    {\t        \"sceneName\": $base64decode($scene.name),\t        \"sceneId\": $scene.id,\t        \"roomId\": $scene.roomId\t    }\t})",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "013c4b7388921d23",
        "type": "status",
        "z": "1a6413355bbb49cc",
        "name": "",
        "scope": null,
        "x": 520,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "cd442f62fd059172",
        "type": "change",
        "z": "9c4e4702e4660adf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/scenes?sceneId=' & payload",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 60,
        "wires": [
            [
                "8dc3bcf508fc6c98"
            ]
        ]
    },
    {
        "id": "8dc3bcf508fc6c98",
        "type": "http request",
        "z": "9c4e4702e4660adf",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 490,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "728ab503eb1eb941",
        "type": "status",
        "z": "9c4e4702e4660adf",
        "name": "",
        "scope": [
            "dcd553804e687131"
        ],
        "x": 500,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "dcd553804e687131",
        "type": "delay",
        "z": "9c4e4702e4660adf",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 170,
        "y": 60,
        "wires": [
            [
                "cd442f62fd059172"
            ]
        ]
    },
    {
        "id": "03b09291b4b78bea",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "metadata.zone",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 100,
        "wires": [
            [
                "c0483ea0bf84b4c8"
            ]
        ]
    },
    {
        "id": "82f5745796e93e00",
        "type": "subflow:d0a1d8f666dafcc0",
        "z": "764913cd47ccb672",
        "name": "Get Room Metadata",
        "env": [
            {
                "name": "GLOBAL",
                "value": "GLOBAL",
                "type": "env"
            }
        ],
        "x": 380,
        "y": 60,
        "wires": [
            [
                "cd0f0860d8795bcf",
                "570f6d531cb787a4"
            ]
        ]
    },
    {
        "id": "cd0f0860d8795bcf",
        "type": "join",
        "z": "764913cd47ccb672",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1110,
        "y": 60,
        "wires": [
            [
                "0758de32ececaa86"
            ]
        ]
    },
    {
        "id": "c0483ea0bf84b4c8",
        "type": "subflow:d0a1d8f666dafcc0",
        "z": "764913cd47ccb672",
        "name": "Get Zone Metadata",
        "env": [
            {
                "name": "GLOBAL",
                "value": "GLOBAL",
                "type": "env"
            }
        ],
        "x": 930,
        "y": 100,
        "wires": [
            [
                "cd0f0860d8795bcf"
            ]
        ]
    },
    {
        "id": "570f6d531cb787a4",
        "type": "switch",
        "z": "764913cd47ccb672",
        "name": "",
        "property": "metadata",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "zone",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 590,
        "y": 120,
        "wires": [
            [
                "03b09291b4b78bea"
            ],
            [
                "b36d0601f4e482d5"
            ]
        ]
    },
    {
        "id": "b36d0601f4e482d5",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"room\":payload}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 140,
        "wires": [
            [
                "0758de32ececaa86"
            ]
        ]
    },
    {
        "id": "701c769269c83bb0",
        "type": "status",
        "z": "764913cd47ccb672",
        "name": "",
        "scope": [
            "82f5745796e93e00",
            "c0483ea0bf84b4c8"
        ],
        "x": 900,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "82422755412f473d",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "metadata.room",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 60,
        "wires": [
            [
                "82f5745796e93e00"
            ]
        ]
    },
    {
        "id": "0758de32ececaa86",
        "type": "split",
        "z": "764913cd47ccb672",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1270,
        "y": 120,
        "wires": [
            [
                "1731aaf810fbf25e"
            ]
        ]
    },
    {
        "id": "1731aaf810fbf25e",
        "type": "split",
        "z": "764913cd47ccb672",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 130,
        "y": 240,
        "wires": [
            [
                "aea41b10d8d2b8b3"
            ]
        ]
    },
    {
        "id": "aea41b10d8d2b8b3",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "group",
                "pt": "msg",
                "to": "{\"name\":payload.group.metadata.name,\"grouped_light\":payload.grouped_light.id}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.scene",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 240,
        "wires": [
            [
                "59efb9fe57522353"
            ]
        ]
    },
    {
        "id": "59efb9fe57522353",
        "type": "split",
        "z": "764913cd47ccb672",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 430,
        "y": 240,
        "wires": [
            [
                "a5e318344fcabeb5"
            ]
        ]
    },
    {
        "id": "a5e318344fcabeb5",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{payload.metadata.name:payload.id}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 240,
        "wires": [
            [
                "4cf0a05cbdcfc590"
            ]
        ]
    },
    {
        "id": "4cf0a05cbdcfc590",
        "type": "join",
        "z": "764913cd47ccb672",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 730,
        "y": 240,
        "wires": [
            [
                "91e4b7eba9a37929"
            ]
        ]
    },
    {
        "id": "91e4b7eba9a37929",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"name\":group.name,\"grouped_light\":group.grouped_light,\"scenes\":payload}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "fa785e28cabe4652",
        "type": "moment",
        "z": "8470ac2dde4f0946",
        "name": "minutes",
        "topic": "",
        "input": "now",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "minutes",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 160,
        "y": 100,
        "wires": [
            [
                "184eba672dae0b2a"
            ]
        ]
    },
    {
        "id": "184eba672dae0b2a",
        "type": "moment",
        "z": "8470ac2dde4f0946",
        "name": "sunrise",
        "topic": "",
        "input": "start",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "sunrise",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 300,
        "y": 100,
        "wires": [
            [
                "6c2ccd634ecb9a7f"
            ]
        ]
    },
    {
        "id": "6c2ccd634ecb9a7f",
        "type": "moment",
        "z": "8470ac2dde4f0946",
        "name": "sunset",
        "topic": "",
        "input": "end",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "sunset",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 430,
        "y": 100,
        "wires": [
            [
                "3f22e4d749ec41b9"
            ]
        ]
    },
    {
        "id": "3f22e4d749ec41b9",
        "type": "change",
        "z": "8470ac2dde4f0946",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bedtime",
                "pt": "msg",
                "to": "bedtime.value",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "minutes",
                "pt": "msg",
                "to": "(\t   $parts := $map($split(minutes, ':'), $number);\t   $parts[0] * 60 + $parts[1];\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "sunrise",
                "pt": "msg",
                "to": "(\t   $parts := $map($split(sunrise, ':'), $number);\t   $parts[0] * 60 + $parts[1];\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "sunset",
                "pt": "msg",
                "to": "(\t   $parts := $map($split(sunset, ':'), $number);\t   $parts[0] * 60 + $parts[1];\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 100,
        "wires": [
            [
                "863912521dd63f8a"
            ]
        ]
    },
    {
        "id": "863912521dd63f8a",
        "type": "change",
        "z": "8470ac2dde4f0946",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload & ' | ' & sunrise & ' | ' & minutes & ' | ' & sunset",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "d751bef6d165f80a",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "$formatInteger($floor(next / 60), '00') & ':' & $formatInteger(next % 60, '00')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/time",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 160,
        "wires": [
            [
                "cac8c868a506ee47"
            ]
        ]
    },
    {
        "id": "c806589e8a366a64",
        "type": "rbe",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 550,
        "y": 160,
        "wires": [
            [
                "d751bef6d165f80a"
            ]
        ]
    },
    {
        "id": "dde60f377e1b1422",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "night",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "night",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunrise",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 240,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "6eb1d61b36d3aa8c",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "evening",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "evening",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "bedtime.value",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 200,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "481da96762bb17bf",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "afternoon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "afternoon",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunset",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 160,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "d76f3b48f065a8a0",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "midday",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "midday",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunset - 300",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 120,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "b8d28399f3fa7b97",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "morning",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "morning",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunrise + 300",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 80,
        "wires": [
            [
                "c806589e8a366a64"
            ]
        ]
    },
    {
        "id": "0e4b39aca784ebec",
        "type": "switch",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "property": "minutes",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "sunrise",
                "vt": "msg",
                "v2": "sunrise + 300",
                "v2t": "jsonata"
            },
            {
                "t": "btwn",
                "v": "sunrise + 300",
                "vt": "jsonata",
                "v2": "sunset - 300",
                "v2t": "jsonata"
            },
            {
                "t": "btwn",
                "v": "sunset - 300",
                "vt": "jsonata",
                "v2": "sunset",
                "v2t": "msg"
            },
            {
                "t": "btwn",
                "v": "sunset",
                "vt": "msg",
                "v2": "bedtime",
                "v2t": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 150,
        "y": 160,
        "wires": [
            [
                "b8d28399f3fa7b97"
            ],
            [
                "d76f3b48f065a8a0"
            ],
            [
                "481da96762bb17bf"
            ],
            [
                "6eb1d61b36d3aa8c"
            ],
            [
                "dde60f377e1b1422"
            ]
        ],
        "inputLabels": [
            "suncalc"
        ]
    },
    {
        "id": "cac8c868a506ee47",
        "type": "change",
        "z": "dacb5b6825c3fbfa",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload & ' | ' & next",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 900,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "08bccdc6f9f7801c",
        "type": "switch",
        "z": "a8c212909cbdf020",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload[0] = 7 and payload[1] <= 4",
                "vt": "jsonata"
            },
            {
                "t": "jsonata_exp",
                "v": "payload[0] = 10",
                "vt": "jsonata"
            },
            {
                "t": "jsonata_exp",
                "v": "payload[0] = 12",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 450,
        "y": 120,
        "wires": [
            [
                "1042a01f878d81fc"
            ],
            [
                "964cd017e5ab1233"
            ],
            [
                "63c353ca236903e4"
            ],
            [
                "94b3fbe3f487d73d"
            ]
        ],
        "inputLabels": [
            "month day"
        ],
        "outputLabels": [
            "tribal",
            "spooky",
            "jolly",
            "standard"
        ]
    },
    {
        "id": "1042a01f878d81fc",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "tribal",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tribal",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 60,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "964cd017e5ab1233",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "spooky",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "spooky",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 100,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "63c353ca236903e4",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "jolly",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "jolly",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 140,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "27c8bfa76d69ec10",
        "type": "rbe",
        "z": "a8c212909cbdf020",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 770,
        "y": 120,
        "wires": [
            [
                "38df9871af85ece2"
            ]
        ]
    },
    {
        "id": "38df9871af85ece2",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/theme",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "04fbe08f7538c4af",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$map($split($trim(payload), ' '), $number)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 120,
        "wires": [
            [
                "08bccdc6f9f7801c"
            ]
        ]
    },
    {
        "id": "fd1cca0eebb58024",
        "type": "moment",
        "z": "a8c212909cbdf020",
        "name": "",
        "topic": "date",
        "input": "now",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "M D",
        "locale": "en-US",
        "output": "payload",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 150,
        "y": 120,
        "wires": [
            [
                "04fbe08f7538c4af"
            ]
        ]
    },
    {
        "id": "94b3fbe3f487d73d",
        "type": "change",
        "z": "a8c212909cbdf020",
        "name": "standard",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "standard",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 180,
        "wires": [
            [
                "27c8bfa76d69ec10"
            ]
        ]
    },
    {
        "id": "746fbbdf57805028",
        "type": "change",
        "z": "5e6607a62e250494",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.nodered/automation/time",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "7d20d56418fedf3f",
        "type": "join",
        "z": "5e6607a62e250494",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 530,
        "y": 100,
        "wires": [
            [
                "746fbbdf57805028",
                "9a250dd9b68ef942"
            ]
        ]
    },
    {
        "id": "e098c5d7e9450dd5",
        "type": "mqtt in",
        "z": "5e6607a62e250494",
        "name": "",
        "topic": "nodered/automation/time",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 330,
        "y": 60,
        "wires": [
            [
                "7d20d56418fedf3f"
            ]
        ]
    },
    {
        "id": "70c17cd9796efba6",
        "type": "change",
        "z": "5e6607a62e250494",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "theme",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 140,
        "wires": [
            [
                "7d20d56418fedf3f"
            ]
        ]
    },
    {
        "id": "2c97c0cb7f3a6bf2",
        "type": "mqtt in",
        "z": "5e6607a62e250494",
        "name": "",
        "topic": "nodered/automation/theme",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 150,
        "y": 140,
        "wires": [
            [
                "70c17cd9796efba6"
            ]
        ]
    },
    {
        "id": "9a250dd9b68ef942",
        "type": "change",
        "z": "5e6607a62e250494",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$lookup(payload,'nodered/automation/theme') & ' | ' & $lookup(payload,'nodered/automation/time')",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "7e0f3fe17df64e47",
        "type": "switch",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "property": "enable",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 330,
        "y": 80,
        "wires": [
            [
                "8596ad874a62f12a",
                "75c338222950c3e3"
            ]
        ]
    },
    {
        "id": "8596ad874a62f12a",
        "type": "rbe",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 470,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "ade066e6a8d92e9f",
        "type": "change",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enable",
                "pt": "msg",
                "to": "enable-automation",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 80,
        "wires": [
            [
                "7e0f3fe17df64e47"
            ]
        ]
    },
    {
        "id": "75c338222950c3e3",
        "type": "change",
        "z": "c0cc9d812cad7bfc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload & ' | ' & enable",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "53b63e2bae9ee295",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "minutes",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.minutes",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "bd0f775ed7cbd4db",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bedtime",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 100,
        "wires": [
            [
                "7b2f5cbded9ab0b8"
            ]
        ]
    },
    {
        "id": "7b2f5cbded9ab0b8",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t$hour := $floor(payload.value / 60);\t$minute := payload.value % 60;\t$formatInteger($hour, '00') & ':' & $formatInteger($minute, '00')\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 720,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "95b7811ecc725e36",
        "type": "change",
        "z": "99c62215b637bb07",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bedtime.minutes",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "801bc206cfa0803d",
        "type": "trigger",
        "z": "99c62215b637bb07",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "date",
        "duration": "5",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 280,
        "y": 220,
        "wires": [
            [],
            [
                "95b7811ecc725e36"
            ]
        ]
    },
    {
        "id": "79709f226d61bff5",
        "type": "function",
        "z": "99c62215b637bb07",
        "name": "bedtimeOptions",
        "func": "return",
        "outputs": 1,
        "noerr": 0,
        "initialize": "setTimeout(() => {\n\n    let pad = (n) => {\n\n        return ('00' + n).slice(-2)\n\n    }\n\n    let options = []\n\n    for (let minutes = 1260; minutes <= 1380; minutes += 30) {\n\n        let label = pad(Math.floor(minutes / 60)) + ':' + pad(minutes % 60)\n        let option = {}\n\n        option[label] = minutes\n        options.push(option)\n\n    }\n\n    node.send({\n        options: options\n    })\n\n}, 500)",
        "finalize": "",
        "libs": [],
        "x": 120,
        "y": 220,
        "wires": [
            [
                "801bc206cfa0803d"
            ]
        ]
    },
    {
        "id": "d14437a6d1d7550f",
        "type": "mqtt in",
        "z": "99c62215b637bb07",
        "name": "",
        "topic": "nodered/automation/bedtime",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 280,
        "y": 140,
        "wires": [
            [
                "53b63e2bae9ee295",
                "bd0f775ed7cbd4db"
            ]
        ]
    },
    {
        "id": "544b63b45a2acc4a",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 140,
        "wires": [
            [
                "3c8760abbe1cc1f0"
            ]
        ]
    },
    {
        "id": "9510d565922cee60",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "morning",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "17655",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 60,
        "wires": [
            [
                "23c6837d10f1e3bc"
            ]
        ]
    },
    {
        "id": "b75cbddfc0f235a6",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "midday",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "47566",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 100,
        "wires": [
            [
                "23c6837d10f1e3bc"
            ]
        ]
    },
    {
        "id": "d89856d0dc7d511e",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "afternoon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "44035",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 140,
        "wires": [
            [
                "23c6837d10f1e3bc"
            ]
        ]
    },
    {
        "id": "1a05bd72e44cdf99",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "evening",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "32086",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 180,
        "wires": [
            [
                "23c6837d10f1e3bc"
            ]
        ]
    },
    {
        "id": "d3050f347fbb26fd",
        "type": "change",
        "z": "3faadb46568c393b",
        "name": "night",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "31086",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 220,
        "wires": [
            [
                "23c6837d10f1e3bc"
            ]
        ]
    },
    {
        "id": "3c8760abbe1cc1f0",
        "type": "switch",
        "z": "3faadb46568c393b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "midday",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "afternoon",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "evening",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "night",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 310,
        "y": 140,
        "wires": [
            [
                "9510d565922cee60"
            ],
            [
                "b75cbddfc0f235a6"
            ],
            [
                "d89856d0dc7d511e"
            ],
            [
                "1a05bd72e44cdf99"
            ],
            [
                "d3050f347fbb26fd"
            ]
        ],
        "inputLabels": [
            "suncalc"
        ],
        "outputLabels": [
            "morning",
            "midday",
            "afternoon",
            "evening",
            "night"
        ]
    },
    {
        "id": "23c6837d10f1e3bc",
        "type": "fan",
        "z": "3faadb46568c393b",
        "name": "",
        "x": 730,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "465f820637e0f695",
        "type": "change",
        "z": "4920eed654c67f8d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/rooms/'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 60,
        "wires": [
            [
                "e62fe5c7c72b90ee"
            ]
        ]
    },
    {
        "id": "e62fe5c7c72b90ee",
        "type": "http request",
        "z": "4920eed654c67f8d",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 60,
        "wires": [
            [
                "1ffd2b5f79995711"
            ]
        ]
    },
    {
        "id": "1ffd2b5f79995711",
        "type": "change",
        "z": "4920eed654c67f8d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$map(payload.roomData, function($room) {\t    {\t        \"name\": $base64decode($room.name),\t        \"id\": $room.id\t    }\t})",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "014121091f945d16",
        "type": "status",
        "z": "4920eed654c67f8d",
        "name": "",
        "scope": null,
        "x": 520,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "f13d464834dfe360",
        "type": "sse-client",
        "z": "efbc3338fa01d34f",
        "name": "",
        "url": "",
        "events": [],
        "headers": {},
        "proxy": "",
        "restart": false,
        "rejectUnauthorized": false,
        "withCredentials": false,
        "timeout": 1,
        "x": 490,
        "y": 140,
        "wires": [
            [
                "21ccf665fb8d3960"
            ]
        ]
    },
    {
        "id": "b5cf360a52f4a2ba",
        "type": "status",
        "z": "efbc3338fa01d34f",
        "name": "",
        "scope": [
            "f13d464834dfe360"
        ],
        "x": 1100,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "7a750a603f0568ca",
        "type": "change",
        "z": "efbc3338fa01d34f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/eventstream/clip/v2'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"hue-application-key\": $env('KEY')}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 140,
        "wires": [
            [
                "f13d464834dfe360"
            ]
        ]
    },
    {
        "id": "312782e6466abbfc",
        "type": "function",
        "z": "efbc3338fa01d34f",
        "name": "startListening",
        "func": "\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "setTimeout(() => {\n\n    node.send({payload: true})\n\n}, 1000)",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 140,
        "wires": [
            [
                "7a750a603f0568ca"
            ]
        ]
    },
    {
        "id": "88ce782dab5c1c11",
        "type": "catch",
        "z": "efbc3338fa01d34f",
        "name": "",
        "scope": [
            "f13d464834dfe360"
        ],
        "uncaught": false,
        "x": 90,
        "y": 60,
        "wires": [
            [
                "7a253adad19d296b"
            ]
        ]
    },
    {
        "id": "7a253adad19d296b",
        "type": "trigger",
        "z": "efbc3338fa01d34f",
        "name": "",
        "op1": "",
        "op2": "true",
        "op1type": "nul",
        "op2type": "bool",
        "duration": "30",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 230,
        "y": 60,
        "wires": [
            [
                "312782e6466abbfc"
            ]
        ]
    },
    {
        "id": "21ccf665fb8d3960",
        "type": "json",
        "z": "efbc3338fa01d34f",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 630,
        "y": 140,
        "wires": [
            [
                "16a4c1c41c7850b8"
            ]
        ]
    },
    {
        "id": "16a4c1c41c7850b8",
        "type": "split",
        "z": "efbc3338fa01d34f",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 750,
        "y": 140,
        "wires": [
            [
                "4d3a8b9a3a7ab1af"
            ]
        ]
    },
    {
        "id": "5d5f04c37ee373d7",
        "type": "split",
        "z": "efbc3338fa01d34f",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 1110,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "4d3a8b9a3a7ab1af",
        "type": "change",
        "z": "efbc3338fa01d34f",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.data",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 140,
        "wires": [
            [
                "5d5f04c37ee373d7"
            ]
        ]
    },
    {
        "id": "83573f8c9366c7cd",
        "type": "change",
        "z": "d11bc6d84c35d70a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "$env('TOPIC') & '/' & payload.type & '/' & payload.id",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 100,
        "wires": [
            [
                "55326c4cfd5e25e3",
                "ee3c281b455bf67c"
            ]
        ]
    },
    {
        "id": "55326c4cfd5e25e3",
        "type": "function",
        "z": "d11bc6d84c35d70a",
        "name": "updateState",
        "func": "let state = context.get('state') || {}\nlet path = msg.topic.split('/')\n\nlet merge = (currentValue, newValue) => {\n\n    for (let key in newValue) {\n\n        currentValue[key] = newValue[key]\n\n    }\n\n    return currentValue\n\n}\n\nlet updateValue = (path, state) => {\n\n    let key = path.shift()    \n    let current = state[key] || {}\n    let updated = null\n\n    if (path.length == 0) {\n    \n        updated = merge(current, msg.payload)\n        msg.payload = updated\n\n    } else {\n        \n        updated = updateValue(path, current)\n    }\n\n    state[key] = updated\n    return state\n\n}\n\nupdateValue(path, state)\ncontext.set('state', state)\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "ee3c281b455bf67c",
        "type": "change",
        "z": "d11bc6d84c35d70a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$reverse($split(topic, '/'))[0]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "48f11d601e9b48fb",
        "type": "change",
        "z": "e2cbe8e06513f144",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "$env('TOPIC') & '/' & payload.type & '/' & payload.id",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 100,
        "wires": [
            [
                "2bd82e2456749a93"
            ]
        ]
    },
    {
        "id": "2bd82e2456749a93",
        "type": "change",
        "z": "e2cbe8e06513f144",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$reverse($split(topic, '/'))[0]",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "5b40a88001ebfcee",
        "type": "split",
        "z": "e2cbe8e06513f144",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 450,
        "y": 100,
        "wires": [
            [
                "48f11d601e9b48fb"
            ]
        ]
    },
    {
        "id": "2b45a9462f18d572",
        "type": "change",
        "z": "e2cbe8e06513f144",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.grouped_light",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 240,
        "y": 100,
        "wires": [
            [
                "5b40a88001ebfcee"
            ]
        ]
    },
    {
        "id": "6f784516cba969f2",
        "type": "comment",
        "z": "e2cbe8e06513f144",
        "name": "Replace [move msg.payload.grouped_light] with a [split] node to process all device types",
        "info": "",
        "x": 340,
        "y": 140,
        "wires": []
    },
    {
        "id": "fe35b77c2eb1c1de",
        "type": "mqtt in",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 370,
        "y": 60,
        "wires": [
            [
                "bbc7401145dd43a8"
            ]
        ]
    },
    {
        "id": "bbc7401145dd43a8",
        "type": "change",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.on.on",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 60,
        "wires": [
            [
                "62331e0d934053ec"
            ]
        ]
    },
    {
        "id": "62331e0d934053ec",
        "type": "rbe",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 670,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "a3d9bd179323dad5",
        "type": "status",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "scope": [
            "fe35b77c2eb1c1de"
        ],
        "x": 300,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "16165b34f8419bb2",
        "type": "function",
        "z": "9c5370bf6c44a3a5",
        "name": "subscribe",
        "func": "let topic = 'nodered/hue/' +\n    env.get('BRIDGE_NAME') +\n    '/grouped_light/' +\n    env.get('GROUPED_LIGHT_ID')\n\nif (msg.status.text == 'node-red:common.status.connected') {\n\n    node.status({\n        text: topic,\n        shape: \"dot\",\n        fill: \"green\"\n    })\n\n    return {\n        action: \"subscribe\",\n        topic: {\n            topic: topic,\n            qos: 2\n        }\n    }\n\n} else {\n\n    node.status(msg.status)\n\n    return {\n        action: \"subscribe\",\n        topic: {\n            topic: topic,\n            qos: 2\n        }\n    }\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "node.status({\n    text: \"unsubscribed\",\n    shape: \"ring\",\n    fill: \"yellow\"\n})",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 60,
        "wires": [
            [
                "fe35b77c2eb1c1de"
            ]
        ]
    },
    {
        "id": "6bfc43429d863db6",
        "type": "catch",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "scope": [
            "fe35b77c2eb1c1de"
        ],
        "uncaught": false,
        "x": 130,
        "y": 220,
        "wires": [
            [
                "7bce3d1a00be603b"
            ]
        ]
    },
    {
        "id": "7bce3d1a00be603b",
        "type": "change",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"text\":error.message,\"shape\":\"ring\",\"fill\":\"red\"}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "09946386ddd1cd0e",
        "type": "status",
        "z": "9c5370bf6c44a3a5",
        "name": "",
        "scope": [
            "fe35b77c2eb1c1de"
        ],
        "x": 100,
        "y": 60,
        "wires": [
            [
                "16165b34f8419bb2"
            ]
        ]
    },
    {
        "id": "8c1a2d6f2deaf1d4",
        "type": "mqtt in",
        "z": "454f48125d29e6ef",
        "name": "set",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 690,
        "y": 120,
        "wires": [
            [
                "d3ca376c2c496852"
            ]
        ]
    },
    {
        "id": "8fbc58fdceaae578",
        "type": "mqtt out",
        "z": "454f48125d29e6ef",
        "name": "mqtt out",
        "topic": "",
        "qos": "2",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 1020,
        "y": 120,
        "wires": []
    },
    {
        "id": "45226efb3ae06fd5",
        "type": "mqtt in",
        "z": "454f48125d29e6ef",
        "name": "get in",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 510,
        "y": 300,
        "wires": [
            [
                "d8d21ee8eaa4c778"
            ]
        ]
    },
    {
        "id": "c56bfc3c002eaffb",
        "type": "status",
        "z": "454f48125d29e6ef",
        "name": "get in",
        "scope": [
            "45226efb3ae06fd5"
        ],
        "x": 90,
        "y": 300,
        "wires": [
            [
                "197274586411ddf6"
            ]
        ]
    },
    {
        "id": "396131102099104a",
        "type": "status",
        "z": "454f48125d29e6ef",
        "name": "set",
        "scope": [
            "8c1a2d6f2deaf1d4"
        ],
        "x": 270,
        "y": 120,
        "wires": [
            [
                "880157c6a43cf7ab"
            ]
        ]
    },
    {
        "id": "197274586411ddf6",
        "type": "switch",
        "z": "454f48125d29e6ef",
        "name": "",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node-red:common.status.connected",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 210,
        "y": 300,
        "wires": [
            [
                "6e1a049e6caac0c6"
            ]
        ]
    },
    {
        "id": "880157c6a43cf7ab",
        "type": "switch",
        "z": "454f48125d29e6ef",
        "name": "",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node-red:common.status.connected",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 120,
        "wires": [
            [
                "9e6f207648497d21"
            ]
        ]
    },
    {
        "id": "d3ca376c2c496852",
        "type": "change",
        "z": "454f48125d29e6ef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'homebridge/' & $env('NAME') & '/get/on'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 870,
        "y": 120,
        "wires": [
            [
                "8fbc58fdceaae578"
            ]
        ]
    },
    {
        "id": "9e6f207648497d21",
        "type": "change",
        "z": "454f48125d29e6ef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "subscribe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "{\"topic\":'homebridge/' & $env('NAME') & '/set/on',\"qos\":2}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 120,
        "wires": [
            [
                "8c1a2d6f2deaf1d4"
            ]
        ]
    },
    {
        "id": "6e1a049e6caac0c6",
        "type": "change",
        "z": "454f48125d29e6ef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "subscribe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "{\"topic\":'homebridge/' & $env('NAME') & '/get/on',\"qos\":2}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 300,
        "wires": [
            [
                "45226efb3ae06fd5"
            ]
        ]
    },
    {
        "id": "965757fcbe7c5f1a",
        "type": "mqtt in",
        "z": "454f48125d29e6ef",
        "name": "start",
        "topic": "",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 510,
        "y": 180,
        "wires": [
            [
                "8302ff6775be8af5"
            ]
        ]
    },
    {
        "id": "68cd09d89b3ee378",
        "type": "status",
        "z": "454f48125d29e6ef",
        "name": "start",
        "scope": [
            "965757fcbe7c5f1a"
        ],
        "x": 90,
        "y": 180,
        "wires": [
            [
                "42b512353041dbed"
            ]
        ]
    },
    {
        "id": "42b512353041dbed",
        "type": "switch",
        "z": "454f48125d29e6ef",
        "name": "",
        "property": "status.text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "node-red:common.status.connected",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 210,
        "y": 180,
        "wires": [
            [
                "75a7af3ebc533171"
            ]
        ]
    },
    {
        "id": "75a7af3ebc533171",
        "type": "change",
        "z": "454f48125d29e6ef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "action",
                "pt": "msg",
                "to": "subscribe",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "{\"topic\":'homebridge/' & $env('NAME') & '/start',\"qos\":2}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 180,
        "wires": [
            [
                "965757fcbe7c5f1a"
            ]
        ]
    },
    {
        "id": "d8d21ee8eaa4c778",
        "type": "change",
        "z": "454f48125d29e6ef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "${NAME}",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "8302ff6775be8af5",
        "type": "change",
        "z": "454f48125d29e6ef",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "${NAME}",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 180,
        "wires": [
            [
                "d3ca376c2c496852"
            ]
        ]
    },
    {
        "id": "14e5342cb50f366f",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "",
        "mode": "return",
        "links": [],
        "x": 1335,
        "y": 60,
        "wires": []
    },
    {
        "id": "7df3e5fbd6e9aa8a",
        "type": "link in",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "send to chez nous main",
        "links": [],
        "x": 1035,
        "y": 60,
        "wires": [
            [
                "3b5ab296575b53d4"
            ]
        ],
        "outputLabels": [
            "topic = uri, payload = body, method = HTTP request type"
        ]
    },
    {
        "id": "3b5ab296575b53d4",
        "type": "subflow:5785c8d9f39df67e",
        "z": "c7141ffb22d64190",
        "g": "70e9b8db12799d18",
        "name": "Send to Chez Nous Main",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.12",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "EhKZJjy5vLvz-3bz06K9a8MLfCaSSzR5WxSK8a-y",
                "type": "str"
            }
        ],
        "x": 1180,
        "y": 60,
        "wires": [
            [
                "14e5342cb50f366f"
            ]
        ]
    },
    {
        "id": "51bce99c75aa12c6",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "290b83ef8e01ae0f",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 60,
        "wires": [
            [
                "73a1ec5ed8ebc167"
            ]
        ]
    },
    {
        "id": "f3ab10cd192709b0",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "290b83ef8e01ae0f",
        "name": "chez nous main access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 670,
        "y": 60,
        "wires": []
    },
    {
        "id": "73a1ec5ed8ebc167",
        "type": "subflow:75bc72a16c4da2c8",
        "z": "c7141ffb22d64190",
        "g": "290b83ef8e01ae0f",
        "name": "Create Chez Nous Main Access Token",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.12",
                "type": "str"
            },
            {
                "name": "USERNAME",
                "value": "nodered#cheznous",
                "type": "str"
            }
        ],
        "x": 370,
        "y": 60,
        "wires": [
            [
                "f3ab10cd192709b0"
            ]
        ]
    },
    {
        "id": "d037cf6840797c18",
        "type": "subflow:efbc3338fa01d34f",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "Chez Nous Main SSE",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.12",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "EhKZJjy5vLvz-3bz06K9a8MLfCaSSzR5WxSK8a-y",
                "type": "str"
            }
        ],
        "x": 840,
        "y": 160,
        "wires": [
            [
                "dc5f811e2a68c624"
            ]
        ]
    },
    {
        "id": "dc5f811e2a68c624",
        "type": "subflow:d11bc6d84c35d70a",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "Chez Nous Main Event",
        "env": [
            {
                "name": "TOPIC",
                "value": "nodered/hue/chez-nous-main",
                "type": "str"
            }
        ],
        "x": 1080,
        "y": 200,
        "wires": [
            [
                "4d2dc9a6e42d0548"
            ]
        ]
    },
    {
        "id": "4d2dc9a6e42d0548",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [
            "eb7598c91a41f685",
            "7bb6a0db7deb5336"
        ],
        "x": 1215,
        "y": 200,
        "wires": []
    },
    {
        "id": "2d0604f94ef7bff4",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "method",
                "v": "GET",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "resource",
        "payload": "",
        "payloadType": "str",
        "x": 150,
        "y": 300,
        "wires": [
            [
                "8c9d79d2791e9b02"
            ]
        ]
    },
    {
        "id": "8c9d79d2791e9b02",
        "type": "link call",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 350,
        "y": 300,
        "wires": [
            [
                "303e0cda741131c4"
            ]
        ]
    },
    {
        "id": "303e0cda741131c4",
        "type": "subflow:e4e37acec8ce8ff8",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "Get Chez Nous Main Metadata",
        "env": [
            {
                "name": "TOPIC",
                "value": "hue/chez-nous-main",
                "type": "str"
            },
            {
                "name": "GLOBAL",
                "value": "chez-nous-main",
                "type": "str"
            }
        ],
        "x": 610,
        "y": 300,
        "wires": [
            [
                "79befa4d74086653",
                "285ab85f3bc898ab"
            ]
        ]
    },
    {
        "id": "79befa4d74086653",
        "type": "subflow:764913cd47ccb672",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "Get Chez Nous Main UI Metadata",
        "env": [
            {
                "name": "GLOBAL",
                "value": "chez-nous-main",
                "type": "str"
            }
        ],
        "x": 840,
        "y": 500,
        "wires": [
            [
                "38aac048253037d1"
            ]
        ]
    },
    {
        "id": "285ab85f3bc898ab",
        "type": "subflow:e2cbe8e06513f144",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "env": [
            {
                "name": "TOPIC",
                "value": "nodered/hue/chez-nous-main",
                "type": "str"
            }
        ],
        "x": 870,
        "y": 240,
        "wires": [
            [
                "dc5f811e2a68c624"
            ]
        ]
    },
    {
        "id": "38aac048253037d1",
        "type": "switch",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Dining Room",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Guest Bedroom",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Hall",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Kitchen",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Living Room",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Main Bathroom",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Main Floor",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Master Bedroom",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Studio",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Yard",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 11,
        "x": 1050,
        "y": 500,
        "wires": [
            [
                "b8809f079975618d"
            ],
            [
                "f495c65852c626b8"
            ],
            [
                "1e02d0d108f3d99e"
            ],
            [
                "55c3acb617442eed"
            ],
            [
                "4b02c8d98699ea1b"
            ],
            [
                "552fd9d40d2d6230"
            ],
            [
                "ca7892597e882ca4"
            ],
            [
                "4f37c583c90e46dd"
            ],
            [
                "2b25868eefa2d150"
            ],
            [
                "84181a5971ac595a"
            ],
            [
                "b59ea6517c73a038"
            ]
        ]
    },
    {
        "id": "55c3acb617442eed",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 420,
        "wires": []
    },
    {
        "id": "f495c65852c626b8",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 340,
        "wires": []
    },
    {
        "id": "1e02d0d108f3d99e",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 380,
        "wires": []
    },
    {
        "id": "b8809f079975618d",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 300,
        "wires": []
    },
    {
        "id": "4b02c8d98699ea1b",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 460,
        "wires": []
    },
    {
        "id": "4f37c583c90e46dd",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 580,
        "wires": []
    },
    {
        "id": "ca7892597e882ca4",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [
            "8465c045864905aa",
            "de9edf61dc69c857"
        ],
        "x": 1215,
        "y": 540,
        "wires": []
    },
    {
        "id": "552fd9d40d2d6230",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [
            "4a8df6a851367fc5",
            "08f8c54822856971",
            "eccb6df6363c6a14"
        ],
        "x": 1215,
        "y": 500,
        "wires": []
    },
    {
        "id": "2b25868eefa2d150",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1215,
        "y": 620,
        "wires": []
    },
    {
        "id": "84181a5971ac595a",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "mode": "link",
        "links": [
            "83168e5d7847c8c6"
        ],
        "x": 1215,
        "y": 660,
        "wires": []
    },
    {
        "id": "b59ea6517c73a038",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "11ad281459e35854",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 700,
        "wires": []
    },
    {
        "id": "ffef2ca7a90d4b74",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "",
        "mode": "return",
        "links": [],
        "x": 1335,
        "y": 80,
        "wires": []
    },
    {
        "id": "76de6350a9a0c4fe",
        "type": "link in",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "send to basement hue",
        "links": [],
        "x": 1045,
        "y": 80,
        "wires": [
            [
                "3397976f94fcc061"
            ]
        ],
        "outputLabels": [
            "topic = uri, payload = body, method = HTTP request type"
        ]
    },
    {
        "id": "3397976f94fcc061",
        "type": "subflow:5785c8d9f39df67e",
        "z": "c8c4090e523da434",
        "g": "6daca851d4692833",
        "name": "Send to Basement Hue",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.34",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "-6ay0JIz8Kd1PV00yBYQ75bo6hlVBN2mopvXnrNa",
                "type": "str"
            }
        ],
        "x": 1190,
        "y": 80,
        "wires": [
            [
                "ffef2ca7a90d4b74"
            ]
        ]
    },
    {
        "id": "07b48810bc6739bb",
        "type": "inject",
        "z": "c8c4090e523da434",
        "g": "cf29b66e60017a62",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "02ae8cd7fbb90513"
            ]
        ]
    },
    {
        "id": "0ed7befa1497d56c",
        "type": "debug",
        "z": "c8c4090e523da434",
        "g": "cf29b66e60017a62",
        "name": "basement hue access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload[0].success.username",
        "statusType": "msg",
        "x": 600,
        "y": 80,
        "wires": []
    },
    {
        "id": "02ae8cd7fbb90513",
        "type": "subflow:75bc72a16c4da2c8",
        "z": "c8c4090e523da434",
        "g": "cf29b66e60017a62",
        "name": "Basement Hue Access Token",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.34",
                "type": "str"
            },
            {
                "name": "USERNAME",
                "value": "nodered#cheznous",
                "type": "str"
            }
        ],
        "x": 340,
        "y": 80,
        "wires": [
            [
                "0ed7befa1497d56c"
            ]
        ]
    },
    {
        "id": "6dfdb240e3169ffe",
        "type": "inject",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "method",
                "v": "GET",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "20",
        "topic": "resource",
        "payload": "",
        "payloadType": "str",
        "x": 150,
        "y": 300,
        "wires": [
            [
                "715136c1ddfd2fe4"
            ]
        ]
    },
    {
        "id": "715136c1ddfd2fe4",
        "type": "link call",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "links": [
            "76de6350a9a0c4fe"
        ],
        "timeout": "30",
        "x": 340,
        "y": 300,
        "wires": [
            [
                "023bf454a695d750"
            ]
        ]
    },
    {
        "id": "023bf454a695d750",
        "type": "subflow:e4e37acec8ce8ff8",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "Get Basement Hue Metadata",
        "env": [
            {
                "name": "TOPIC",
                "value": "hue/basement-hue",
                "type": "str"
            },
            {
                "name": "GLOBAL",
                "value": "basement-hue",
                "type": "str"
            }
        ],
        "x": 580,
        "y": 300,
        "wires": [
            [
                "6427cb1332984c1c",
                "56194bdc16a7342c"
            ]
        ]
    },
    {
        "id": "6427cb1332984c1c",
        "type": "subflow:764913cd47ccb672",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "Get Basement Hue UI Metadata",
        "env": [
            {
                "name": "GLOBAL",
                "value": "basement-hue",
                "type": "str"
            }
        ],
        "x": 830,
        "y": 480,
        "wires": [
            [
                "2db42614cfe51d4e"
            ]
        ]
    },
    {
        "id": "56194bdc16a7342c",
        "type": "subflow:e2cbe8e06513f144",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "env": [
            {
                "name": "TOPIC",
                "value": "nodered/hue/basement-hue",
                "type": "str"
            }
        ],
        "x": 810,
        "y": 260,
        "wires": [
            [
                "590ba447efc05f92"
            ]
        ]
    },
    {
        "id": "590ba447efc05f92",
        "type": "subflow:d11bc6d84c35d70a",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "Basement Hue Event",
        "env": [
            {
                "name": "TOPIC",
                "value": "nodered/hue/basement-hue",
                "type": "str"
            }
        ],
        "x": 1020,
        "y": 220,
        "wires": [
            [
                "40f1f326e5252bf8"
            ]
        ]
    },
    {
        "id": "e34f0da72fccd025",
        "type": "subflow:efbc3338fa01d34f",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "Basement Hue SSE",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.34",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "-6ay0JIz8Kd1PV00yBYQ75bo6hlVBN2mopvXnrNa",
                "type": "str"
            }
        ],
        "x": 790,
        "y": 180,
        "wires": [
            [
                "590ba447efc05f92"
            ]
        ]
    },
    {
        "id": "40f1f326e5252bf8",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [
            "eb7598c91a41f685",
            "7bb6a0db7deb5336"
        ],
        "x": 1165,
        "y": 220,
        "wires": []
    },
    {
        "id": "2db42614cfe51d4e",
        "type": "switch",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Basement",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Basement Bathroom",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Downstairs",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Garage",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Laundry",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Stairwell",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Utility",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 8,
        "x": 1030,
        "y": 480,
        "wires": [
            [
                "77b058dc291d85ba"
            ],
            [
                "3165373e1a352533"
            ],
            [
                "0dcaf7d987909d6e"
            ],
            [
                "22ed3de25a495f84"
            ],
            [
                "9ea6734c5fb29211"
            ],
            [
                "0efb085d1f57522a"
            ],
            [
                "ff16255d72661bbb"
            ],
            [
                "d38dbc4565c5d33c"
            ]
        ]
    },
    {
        "id": "d38dbc4565c5d33c",
        "type": "debug",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "basement hue",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1260,
        "y": 620,
        "wires": []
    },
    {
        "id": "77b058dc291d85ba",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1195,
        "y": 340,
        "wires": []
    },
    {
        "id": "3165373e1a352533",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1195,
        "y": 380,
        "wires": []
    },
    {
        "id": "0dcaf7d987909d6e",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [
            "80ea4fc24f4dc06d"
        ],
        "x": 1195,
        "y": 420,
        "wires": []
    },
    {
        "id": "22ed3de25a495f84",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1195,
        "y": 460,
        "wires": []
    },
    {
        "id": "9ea6734c5fb29211",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1195,
        "y": 500,
        "wires": []
    },
    {
        "id": "0efb085d1f57522a",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1195,
        "y": 540,
        "wires": []
    },
    {
        "id": "ff16255d72661bbb",
        "type": "link out",
        "z": "c8c4090e523da434",
        "g": "851ce0bce3af3965",
        "name": "",
        "mode": "link",
        "links": [],
        "x": 1195,
        "y": 580,
        "wires": []
    },
    {
        "id": "536874de79956f84",
        "type": "subflow:1a6413355bbb49cc",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 810,
        "y": 80,
        "wires": [
            [
                "fc5defb4e76d244e"
            ]
        ]
    },
    {
        "id": "1cee4f351bd59563",
        "type": "debug",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "powerview scenes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 80,
        "wires": []
    },
    {
        "id": "cae953f2c04362ad",
        "type": "inject",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 80,
        "wires": [
            [
                "f42aab98c1153884"
            ]
        ]
    },
    {
        "id": "3c70a7443900cb3f",
        "type": "link call",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "links": [
            "7173aa38c9fa93dc"
        ],
        "timeout": "30",
        "x": 550,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "0514602b711a8136",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "window shade automation",
        "links": [
            "1f7aefd9b0586064",
            "21690efdfa2776cf"
        ],
        "x": 205,
        "y": 180,
        "wires": [
            [
                "a0985c083540376f"
            ]
        ]
    },
    {
        "id": "a0985c083540376f",
        "type": "subflow:3faadb46568c393b",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "x": 330,
        "y": 180,
        "wires": [
            [
                "3c70a7443900cb3f"
            ]
        ]
    },
    {
        "id": "f390ba1d460e3399",
        "type": "change",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "rooms",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 80,
        "wires": [
            [
                "536874de79956f84"
            ]
        ]
    },
    {
        "id": "fc5defb4e76d244e",
        "type": "function",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "mergeMetadata",
        "func": "let findRoomName = id => {\n    \n    for (let index = 0; index < msg.rooms.length; ++index) {\n\n        let room = msg.rooms[index]\n        \n        if (room.id == id) {\n            \n            return room.name\n            \n        }\n    }\n    \n    node.warn('no room found with id ' + id)\n    return null\n}\n\nlet metadata = msg.payload.map(scene => {\n    \n    let roomName = findRoomName(scene.roomId)\n    \n    return {\n        sceneId: scene.sceneId,\n        sceneName: scene.sceneName,\n        roomId: scene.roomId,\n        roomName: roomName\n    }\n})\n\nmsg.payload = metadata\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 80,
        "wires": [
            [
                "1cee4f351bd59563"
            ]
        ]
    },
    {
        "id": "f42aab98c1153884",
        "type": "subflow:4920eed654c67f8d",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 370,
        "y": 80,
        "wires": [
            [
                "f390ba1d460e3399"
            ]
        ]
    },
    {
        "id": "2f6cc09457939ce2",
        "type": "subflow:9c4e4702e4660adf",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 340,
        "y": 280,
        "wires": [
            [
                "618e79a58ab8143a"
            ]
        ]
    },
    {
        "id": "7173aa38c9fa93dc",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "activate powerview scene",
        "links": [],
        "x": 205,
        "y": 280,
        "wires": [
            [
                "2f6cc09457939ce2"
            ]
        ]
    },
    {
        "id": "618e79a58ab8143a",
        "type": "link out",
        "z": "1cf0490e7de2f93d",
        "g": "87285e6bf01cff03",
        "name": "",
        "mode": "return",
        "links": [],
        "x": 475,
        "y": 280,
        "wires": []
    },
    {
        "id": "6f7db4dc310c6c2f",
        "type": "subflow:5e6607a62e250494",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "x": 870,
        "y": 500,
        "wires": [
            [
                "18c9ac4127308f24",
                "58abeb0fb7d59222"
            ]
        ]
    },
    {
        "id": "18c9ac4127308f24",
        "type": "subflow:c0cc9d812cad7bfc",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "x": 1070,
        "y": 540,
        "wires": [
            [
                "21690efdfa2776cf"
            ]
        ]
    },
    {
        "id": "c09a00ecb1c547ec",
        "type": "inject",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "retain",
                "v": "false",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "00 02 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "night",
        "payloadType": "str",
        "x": 890,
        "y": 580,
        "wires": [
            [
                "18c9ac4127308f24"
            ]
        ]
    },
    {
        "id": "21690efdfa2776cf",
        "type": "link out",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "mode": "link",
        "links": [
            "1993fd8165053adf",
            "facb9598623e3675",
            "380c05275eae4338",
            "1f8dccfd42af4188",
            "23b7995dafc3f002",
            "0514602b711a8136"
        ],
        "x": 1195,
        "y": 540,
        "wires": []
    },
    {
        "id": "58abeb0fb7d59222",
        "type": "rbe",
        "z": "f03b6ceb81ed7dac",
        "g": "9b9a844a8df2769d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 1030,
        "y": 460,
        "wires": [
            [
                "114b9703250b5ff7"
            ]
        ]
    },
    {
        "id": "f086604c46663235",
        "type": "ui_switch",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "Enable Automation",
        "label": "Enable",
        "tooltip": "",
        "group": "25c7f0078ed443dd",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 650,
        "y": 100,
        "wires": [
            [
                "8221b9e4e7b1d425"
            ]
        ]
    },
    {
        "id": "9810ca9f681aaebf",
        "type": "mqtt in",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "",
        "topic": "nodered/automation/enable",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 100,
        "wires": [
            [
                "6ccc90dff91a1ab2"
            ]
        ]
    },
    {
        "id": "8221b9e4e7b1d425",
        "type": "mqtt out",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "",
        "topic": "nodered/automation/enable",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 880,
        "y": 100,
        "wires": []
    },
    {
        "id": "802ec81ddfb59441",
        "type": "sunrise",
        "z": "f03b6ceb81ed7dac",
        "g": "1723570f3a1a07a2",
        "name": "",
        "lat": "43.018400",
        "lon": "-89.289000",
        "start": "sunrise",
        "end": "sunsetStart",
        "soff": "0",
        "eoff": "0",
        "x": 130,
        "y": 420,
        "wires": [
            [
                "5085c8772606b854",
                "a3dd9bfc89e0e94a"
            ],
            []
        ]
    },
    {
        "id": "6bdf715d945fbc10",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "group": "25c7f0078ed443dd",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Time",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 670,
        "y": 520,
        "wires": []
    },
    {
        "id": "3460ef4d47e9a47b",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "group": "25c7f0078ed443dd",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Next",
        "format": "{{msg.next}}",
        "layout": "row-spread",
        "className": "",
        "x": 670,
        "y": 580,
        "wires": []
    },
    {
        "id": "26c0274d3d6b7697",
        "type": "mqtt out",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 670,
        "y": 460,
        "wires": []
    },
    {
        "id": "5085c8772606b854",
        "type": "subflow:8470ac2dde4f0946",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "name": "",
        "x": 340,
        "y": 520,
        "wires": [
            [
                "305c62d581d22adf"
            ]
        ]
    },
    {
        "id": "305c62d581d22adf",
        "type": "subflow:dacb5b6825c3fbfa",
        "z": "f03b6ceb81ed7dac",
        "g": "6d13af3b8a66acb9",
        "name": "",
        "x": 490,
        "y": 520,
        "wires": [
            [
                "26c0274d3d6b7697",
                "6bdf715d945fbc10",
                "3460ef4d47e9a47b"
            ]
        ]
    },
    {
        "id": "c168b5c3119db1de",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "31ed5707953578b9",
        "group": "25c7f0078ed443dd",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Theme",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 500,
        "y": 360,
        "wires": []
    },
    {
        "id": "ee8e24d1cd81c931",
        "type": "mqtt out",
        "z": "f03b6ceb81ed7dac",
        "g": "31ed5707953578b9",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 490,
        "y": 280,
        "wires": []
    },
    {
        "id": "a3dd9bfc89e0e94a",
        "type": "subflow:a8c212909cbdf020",
        "z": "f03b6ceb81ed7dac",
        "g": "31ed5707953578b9",
        "name": "",
        "x": 340,
        "y": 320,
        "wires": [
            [
                "ee8e24d1cd81c931",
                "c168b5c3119db1de"
            ]
        ]
    },
    {
        "id": "bbcb2a37e7e328bb",
        "type": "ui_dropdown",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "label": "Bedtime",
        "tooltip": "",
        "place": "Select option",
        "group": "ad4d885f83f029a5",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "nodered/bedtime",
        "topicType": "str",
        "className": "",
        "x": 900,
        "y": 280,
        "wires": [
            [
                "4aa998790c81c0de"
            ]
        ]
    },
    {
        "id": "cf6562b252b0fea0",
        "type": "ui_text",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "group": "ad4d885f83f029a5",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Randomized",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 910,
        "y": 200,
        "wires": []
    },
    {
        "id": "abe65b742c235eaf",
        "type": "subflow:99c62215b637bb07",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "x": 720,
        "y": 240,
        "wires": [
            [
                "cf6562b252b0fea0"
            ],
            [
                "bbcb2a37e7e328bb"
            ]
        ]
    },
    {
        "id": "4aa998790c81c0de",
        "type": "function",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "randomBedtime",
        "func": "let offset = 30 - Math.floor(Math.random() * 60)\nlet value = (msg.payload + offset) % 1440\n\nmsg.topic = 'nodered/automation/bedtime'\nmsg.qos = 2\nmsg.retain = true\n\nmsg.payload = {\n    minutes: msg.payload,\n    value: value\n}\n\nnode.status(value)\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1080,
        "y": 320,
        "wires": [
            [
                "d7fe731e9b583602"
            ]
        ]
    },
    {
        "id": "d7fe731e9b583602",
        "type": "mqtt out",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 1230,
        "y": 320,
        "wires": []
    },
    {
        "id": "114b9703250b5ff7",
        "type": "switch",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "morning?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 720,
        "y": 360,
        "wires": [
            [
                "01bd7e5d506c131c"
            ]
        ]
    },
    {
        "id": "b6d82709eb52c890",
        "type": "delay",
        "z": "f03b6ceb81ed7dac",
        "g": "71baecd2f8b62fa2",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "3",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 410,
        "y": 700,
        "wires": [
            [
                "cdbaac61adce70d0"
            ]
        ]
    },
    {
        "id": "cdbaac61adce70d0",
        "type": "mqtt out",
        "z": "f03b6ceb81ed7dac",
        "g": "71baecd2f8b62fa2",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 550,
        "y": 700,
        "wires": []
    },
    {
        "id": "7bb6a0db7deb5336",
        "type": "link in",
        "z": "f03b6ceb81ed7dac",
        "g": "71baecd2f8b62fa2",
        "name": "send to broker",
        "links": [
            "4d2dc9a6e42d0548",
            "2a3ace48408488ce",
            "ac4ea7223e34a6f8",
            "ae1f46d58671ef2d",
            "3b3c70d754a8a4d5",
            "40f1f326e5252bf8"
        ],
        "x": 305,
        "y": 700,
        "wires": [
            [
                "b6d82709eb52c890"
            ]
        ]
    },
    {
        "id": "6ccc90dff91a1ab2",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "daced5cc49fcef0a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enable-automation",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 100,
        "wires": [
            [
                "f086604c46663235"
            ]
        ]
    },
    {
        "id": "01bd7e5d506c131c",
        "type": "change",
        "z": "f03b6ceb81ed7dac",
        "g": "64b945726db0f60a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bedtime.minutes",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 360,
        "wires": [
            [
                "4aa998790c81c0de"
            ]
        ]
    },
    {
        "id": "061d8c40c8ed16ab",
        "type": "switch",
        "z": "63d8cb10398da04b",
        "g": "e936dbad3fb3b587",
        "name": "msg.payload",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "evening",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "night",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 270,
        "y": 320,
        "wires": [
            [
                "f12fbd86617caaf9"
            ],
            [
                "b9f7a65beebcddfe"
            ],
            [
                "c897f7f0ee8680dc"
            ]
        ]
    },
    {
        "id": "549a2335fb839c37",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "mode": "link",
        "links": [
            "fbd53f7f18ca6655"
        ],
        "x": 585,
        "y": 520,
        "wires": []
    },
    {
        "id": "ae9f9aeb54f6cfb1",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "mode": "link",
        "links": [
            "3ed1a4d37d1548b4"
        ],
        "x": 585,
        "y": 560,
        "wires": []
    },
    {
        "id": "8e8390b13cc5c45b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "mode": "link",
        "links": [
            "ec4c4a28a59d105e"
        ],
        "x": 585,
        "y": 600,
        "wires": []
    },
    {
        "id": "c897f7f0ee8680dc",
        "type": "fan",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "x": 470,
        "y": 560,
        "wires": [
            [
                "ae9f9aeb54f6cfb1",
                "8e8390b13cc5c45b",
                "549a2335fb839c37"
            ]
        ]
    },
    {
        "id": "2837183323a61e04",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "6cae9b1ccc68cb9e"
        ],
        "x": 585,
        "y": 280,
        "wires": []
    },
    {
        "id": "7ab1620c3349854b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "a6475288998b4e07"
        ],
        "x": 915,
        "y": 300,
        "wires": []
    },
    {
        "id": "c68369c3781694e3",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "a225232dc86a3b6f"
        ],
        "x": 915,
        "y": 340,
        "wires": []
    },
    {
        "id": "b0ee0f2f8155fe9b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "60976d31a8dafe99",
            "a225232dc86a3b6f",
            "a6475288998b4e07"
        ],
        "x": 915,
        "y": 380,
        "wires": []
    },
    {
        "id": "e270017761dfd27d",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "18f53b7627e645e4"
        ],
        "x": 915,
        "y": 420,
        "wires": []
    },
    {
        "id": "981dbc2364b09d66",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "mode": "link",
        "links": [
            "e74fcadba6a2b4ca"
        ],
        "x": 585,
        "y": 100,
        "wires": []
    },
    {
        "id": "7d12aa9a36e86798",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "mode": "link",
        "links": [
            "07ccb0b07e6fada8"
        ],
        "x": 585,
        "y": 140,
        "wires": []
    },
    {
        "id": "6c3e6b4543f8c9ac",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "mode": "link",
        "links": [
            "ec4c4a28a59d105e"
        ],
        "x": 585,
        "y": 180,
        "wires": []
    },
    {
        "id": "f12fbd86617caaf9",
        "type": "fan",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "x": 470,
        "y": 140,
        "wires": [
            [
                "981dbc2364b09d66",
                "7d12aa9a36e86798",
                "6c3e6b4543f8c9ac"
            ]
        ]
    },
    {
        "id": "1993fd8165053adf",
        "type": "link in",
        "z": "63d8cb10398da04b",
        "g": "e936dbad3fb3b587",
        "name": "lighting",
        "links": [
            "1f7aefd9b0586064",
            "21690efdfa2776cf"
        ],
        "x": 165,
        "y": 320,
        "wires": [
            [
                "061d8c40c8ed16ab"
            ]
        ]
    },
    {
        "id": "b9f7a65beebcddfe",
        "type": "fan",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "x": 480,
        "y": 320,
        "wires": [
            [
                "2837183323a61e04",
                "bb8c3929aaa44aac"
            ]
        ]
    },
    {
        "id": "98acfbdd1bdfd0c0",
        "type": "switch",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "theme",
        "property": "theme",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "tribal",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "spooky",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "jolly",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 810,
        "y": 360,
        "wires": [
            [
                "7ab1620c3349854b"
            ],
            [
                "c68369c3781694e3"
            ],
            [
                "b0ee0f2f8155fe9b"
            ],
            [
                "e270017761dfd27d"
            ]
        ]
    },
    {
        "id": "7c8305b6e16fe380",
        "type": "mqtt in",
        "z": "63d8cb10398da04b",
        "g": "e42ca696c53ad222",
        "name": "",
        "topic": "nodered/hue/+/grouped_light/+",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 190,
        "y": 720,
        "wires": [
            [
                "40da64bafb19cd84"
            ]
        ]
    },
    {
        "id": "40da64bafb19cd84",
        "type": "debug",
        "z": "63d8cb10398da04b",
        "g": "e42ca696c53ad222",
        "name": "grouped_light",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "$reverse($split(topic, '/'))[0]",
        "statusType": "jsonata",
        "x": 420,
        "y": 720,
        "wires": []
    },
    {
        "id": "bb8c3929aaa44aac",
        "type": "change",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "theme",
                "pt": "msg",
                "to": "theme",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 650,
        "y": 360,
        "wires": [
            [
                "98acfbdd1bdfd0c0"
            ]
        ]
    },
    {
        "id": "1027648dc2bca366",
        "type": "change",
        "z": "3b6d32569acb507d",
        "g": "fbf9850f0a37aefc",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.scenes",
                "pt": "msg",
                "to": "options",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 180,
        "wires": [
            [
                "7b1fbba234712d34"
            ]
        ]
    },
    {
        "id": "7b1fbba234712d34",
        "type": "ui_dropdown",
        "z": "3b6d32569acb507d",
        "g": "fbf9850f0a37aefc",
        "name": "Downstairs Scene",
        "label": "",
        "tooltip": "",
        "place": "Choose scene...",
        "group": "05be88f22ca65685",
        "order": 0,
        "width": "5",
        "height": "1",
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 570,
        "y": 180,
        "wires": [
            [
                "745d80338e7b06e2"
            ]
        ]
    },
    {
        "id": "745d80338e7b06e2",
        "type": "change",
        "z": "3b6d32569acb507d",
        "g": "fbf9850f0a37aefc",
        "name": "scene",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/scene/' & payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 180,
        "wires": [
            [
                "d1be10edf99f6a93"
            ]
        ]
    },
    {
        "id": "d1be10edf99f6a93",
        "type": "link call",
        "z": "3b6d32569acb507d",
        "g": "fbf9850f0a37aefc",
        "name": "",
        "links": [
            "76de6350a9a0c4fe"
        ],
        "timeout": "30",
        "x": 900,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "44e691312a3150a0",
        "type": "ui_switch",
        "z": "3b6d32569acb507d",
        "g": "1a0982001bbd9e21",
        "name": "Downstairs Lights",
        "label": "",
        "tooltip": "",
        "group": "05be88f22ca65685",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "36103b1467413ff0"
            ]
        ]
    },
    {
        "id": "897b73888d87a462",
        "type": "link call",
        "z": "3b6d32569acb507d",
        "g": "1a0982001bbd9e21",
        "name": "",
        "links": [
            "76de6350a9a0c4fe"
        ],
        "timeout": "30",
        "x": 780,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "2879e42cc1d7febc",
        "type": "subflow:9c5370bf6c44a3a5",
        "z": "3b6d32569acb507d",
        "g": "1a0982001bbd9e21",
        "name": "Downstairs",
        "x": 220,
        "y": 80,
        "wires": [
            [
                "44e691312a3150a0"
            ]
        ]
    },
    {
        "id": "36103b1467413ff0",
        "type": "change",
        "z": "3b6d32569acb507d",
        "g": "1a0982001bbd9e21",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/grouped_light/' & $env('GROUPED_LIGHT_ID')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":payload}}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 80,
        "wires": [
            [
                "897b73888d87a462"
            ]
        ]
    },
    {
        "id": "80ea4fc24f4dc06d",
        "type": "link in",
        "z": "3b6d32569acb507d",
        "g": "fbf9850f0a37aefc",
        "name": "initialize downstairs",
        "links": [
            "0dcaf7d987909d6e"
        ],
        "x": 175,
        "y": 180,
        "wires": [
            [
                "1027648dc2bca366"
            ]
        ]
    },
    {
        "id": "e74fcadba6a2b4ca",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "main bathroom off",
        "links": [
            "e696e0a2acb678c2",
            "f597e3f10639062f",
            "ce589288779cef4a",
            "981dbc2364b09d66"
        ],
        "x": 175,
        "y": 180,
        "wires": [
            [
                "4288f4e0d18dbff6"
            ]
        ]
    },
    {
        "id": "4288f4e0d18dbff6",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "turn off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/aea74e74-d544-4d08-ad71-3b6665045256",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 180,
        "wires": [
            [
                "d79164592fe44617"
            ]
        ]
    },
    {
        "id": "d79164592fe44617",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 460,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "fbd53f7f18ca6655",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "main bathroom nightlight",
        "links": [
            "1fa973a7d8e65e3c",
            "549a2335fb839c37"
        ],
        "x": 175,
        "y": 80,
        "wires": [
            [
                "26ad3b6fd956be59"
            ]
        ]
    },
    {
        "id": "a4c3ecea47eed101",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 470,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "26ad3b6fd956be59",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "night light",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/5d507fb6-89f6-459a-b327-0fffd0c6dc48",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 80,
        "wires": [
            [
                "a4c3ecea47eed101"
            ]
        ]
    },
    {
        "id": "4a8df6a851367fc5",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "e473ec1af3fbe117",
        "name": "initialize main bathroom",
        "links": [
            "552fd9d40d2d6230"
        ],
        "x": 175,
        "y": 380,
        "wires": [
            [
                "bc63e05761a0d07a"
            ]
        ]
    },
    {
        "id": "bc63e05761a0d07a",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "e473ec1af3fbe117",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.scenes",
                "pt": "msg",
                "to": "options",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 380,
        "wires": [
            [
                "ee3252501a60964c"
            ]
        ]
    },
    {
        "id": "ee3252501a60964c",
        "type": "ui_dropdown",
        "z": "1344247d533f754a",
        "g": "e473ec1af3fbe117",
        "name": "Main Bathroom Scene",
        "label": "",
        "tooltip": "",
        "place": "Choose scene...",
        "group": "76ef8fc7d96d4fe5",
        "order": 0,
        "width": "5",
        "height": "1",
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 580,
        "y": 380,
        "wires": [
            [
                "cb098cd1b9e6bc91"
            ]
        ]
    },
    {
        "id": "cb098cd1b9e6bc91",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "e473ec1af3fbe117",
        "name": "scene",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/scene/' & payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 380,
        "wires": [
            [
                "2a7d60d3f040bce2"
            ]
        ]
    },
    {
        "id": "2a7d60d3f040bce2",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "e473ec1af3fbe117",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 930,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "b04ce8dc0e45f95c",
        "type": "ui_switch",
        "z": "1344247d533f754a",
        "g": "9c0627f771f74ac9",
        "name": "Main Bathroom Lights",
        "label": "",
        "tooltip": "",
        "group": "76ef8fc7d96d4fe5",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 440,
        "y": 280,
        "wires": [
            [
                "da01554e00b01389"
            ]
        ]
    },
    {
        "id": "00195b9d300d86fb",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "9c0627f771f74ac9",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 850,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "698fe18078385cd6",
        "type": "subflow:9c5370bf6c44a3a5",
        "z": "1344247d533f754a",
        "g": "9c0627f771f74ac9",
        "name": "Main Bathroom",
        "x": 240,
        "y": 280,
        "wires": [
            [
                "b04ce8dc0e45f95c"
            ]
        ]
    },
    {
        "id": "da01554e00b01389",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "9c0627f771f74ac9",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/grouped_light/' & $env('GROUPED_LIGHT_ID')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":payload}}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 280,
        "wires": [
            [
                "00195b9d300d86fb"
            ]
        ]
    },
    {
        "id": "07ccb0b07e6fada8",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "main floor off",
        "links": [
            "7d12aa9a36e86798"
        ],
        "x": 185,
        "y": 60,
        "wires": [
            [
                "4baea86ab327a4b9"
            ]
        ]
    },
    {
        "id": "3ed1a4d37d1548b4",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "main floor nightlight",
        "links": [
            "ae9f9aeb54f6cfb1"
        ],
        "x": 185,
        "y": 260,
        "wires": [
            [
                "7b10a17dd5bc4c0f"
            ]
        ]
    },
    {
        "id": "53509cbc2f897eb4",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 1010,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "3fd4ceb10de1cfab",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 990,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "7b10a17dd5bc4c0f",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 260,
        "wires": [
            [
                "08d74ad519cdaa27"
            ]
        ]
    },
    {
        "id": "7519f356aef82889",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "77c6ae6853e648c7"
            ]
        ]
    },
    {
        "id": "4104b520ce069209",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "main floor bright",
        "links": [],
        "x": 185,
        "y": 160,
        "wires": [
            [
                "7519f356aef82889"
            ]
        ]
    },
    {
        "id": "6cae9b1ccc68cb9e",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "main floor sunset",
        "links": [
            "2837183323a61e04"
        ],
        "x": 185,
        "y": 360,
        "wires": [
            [
                "edc2f01358673517"
            ]
        ]
    },
    {
        "id": "8ae7ee0c87df1191",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 990,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "edc2f01358673517",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 360,
        "wires": [
            [
                "c99382ee9ae33d16"
            ]
        ]
    },
    {
        "id": "ec1b9da9a2a0dde0",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/9c1c7975-2f47-4552-bac8-c19b643cd678",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 60,
        "wires": [
            [
                "33533dc0ac4ff870"
            ]
        ]
    },
    {
        "id": "33533dc0ac4ff870",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "4baea86ab327a4b9",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 60,
        "wires": [
            [
                "76e95a00d6e3b9ad"
            ]
        ]
    },
    {
        "id": "2efdae9d98c90cf9",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 60,
        "wires": [
            [
                "ec1b9da9a2a0dde0"
            ]
        ]
    },
    {
        "id": "c24b271f1c0a013a",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/8c5f011c-bc6f-49a8-8d82-9d1db302c87c",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 160,
        "wires": [
            [
                "3fd4ceb10de1cfab"
            ]
        ]
    },
    {
        "id": "5b9644b03821362f",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 630,
        "y": 160,
        "wires": [
            [
                "c24b271f1c0a013a"
            ]
        ]
    },
    {
        "id": "1462dac4d5543f0a",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/48c39b9f-1599-4a5c-b7f6-bad6cad4029a",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 260,
        "wires": [
            [
                "53509cbc2f897eb4"
            ]
        ]
    },
    {
        "id": "c4ad8310f9a121b0",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 650,
        "y": 260,
        "wires": [
            [
                "1462dac4d5543f0a"
            ]
        ]
    },
    {
        "id": "76f3eb6c53a0310c",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/6eff0801-01e2-4803-9840-e31c06cee079",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 360,
        "wires": [
            [
                "8ae7ee0c87df1191"
            ]
        ]
    },
    {
        "id": "66b239fbae02c252",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 630,
        "y": 360,
        "wires": [
            [
                "76f3eb6c53a0310c"
            ]
        ]
    },
    {
        "id": "8465c045864905aa",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "ed0ae9fed36f8120",
        "name": "initialize main floor",
        "links": [
            "ca7892597e882ca4"
        ],
        "x": 185,
        "y": 560,
        "wires": [
            [
                "e8cad2d9dc25fafc"
            ]
        ]
    },
    {
        "id": "e8cad2d9dc25fafc",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "ed0ae9fed36f8120",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.scenes",
                "pt": "msg",
                "to": "options",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 560,
        "wires": [
            [
                "3b2393cf0f89d70f"
            ]
        ]
    },
    {
        "id": "3b2393cf0f89d70f",
        "type": "ui_dropdown",
        "z": "e44149a93fbe9b1b",
        "g": "ed0ae9fed36f8120",
        "name": "Main Floor Scene",
        "label": "",
        "tooltip": "",
        "place": "Choose scene...",
        "group": "1cfe5b09ac4ad35f",
        "order": 2,
        "width": "5",
        "height": "1",
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 570,
        "y": 560,
        "wires": [
            [
                "f8b018621c94b655"
            ]
        ]
    },
    {
        "id": "f8b018621c94b655",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "ed0ae9fed36f8120",
        "name": "scene",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/scene/' & payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 730,
        "y": 560,
        "wires": [
            [
                "e382f045dd1a840b"
            ]
        ]
    },
    {
        "id": "e382f045dd1a840b",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "ed0ae9fed36f8120",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 910,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "1f3f63aa76eb31f7",
        "type": "ui_switch",
        "z": "e44149a93fbe9b1b",
        "g": "4a52d10ef0e20b15",
        "name": "Main Floor Lights",
        "label": "",
        "tooltip": "",
        "group": "1cfe5b09ac4ad35f",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 410,
        "y": 460,
        "wires": [
            [
                "beec2a6c6e6f63f5"
            ]
        ]
    },
    {
        "id": "7133f430a04cea7f",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "4a52d10ef0e20b15",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 810,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "209a46c2681410be",
        "type": "subflow:9c5370bf6c44a3a5",
        "z": "e44149a93fbe9b1b",
        "g": "4a52d10ef0e20b15",
        "name": "Main Floor",
        "x": 230,
        "y": 460,
        "wires": [
            [
                "1f3f63aa76eb31f7"
            ]
        ]
    },
    {
        "id": "beec2a6c6e6f63f5",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "4a52d10ef0e20b15",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/grouped_light/' & $env('GROUPED_LIGHT_ID')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":payload}}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 460,
        "wires": [
            [
                "7133f430a04cea7f"
            ]
        ]
    },
    {
        "id": "76e95a00d6e3b9ad",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "main-floor-off",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-off",
                "type": "str"
            }
        ],
        "x": 470,
        "y": 60,
        "wires": [
            [
                "2efdae9d98c90cf9"
            ]
        ]
    },
    {
        "id": "08d74ad519cdaa27",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "main-floor-nightlight",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-nightlight",
                "type": "str"
            }
        ],
        "x": 490,
        "y": 260,
        "wires": [
            [
                "c4ad8310f9a121b0"
            ]
        ]
    },
    {
        "id": "77c6ae6853e648c7",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "main-floor-bright",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-bright",
                "type": "str"
            }
        ],
        "x": 480,
        "y": 160,
        "wires": [
            [
                "5b9644b03821362f"
            ]
        ]
    },
    {
        "id": "c99382ee9ae33d16",
        "type": "subflow:454f48125d29e6ef",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "main-floor-sunset",
        "env": [
            {
                "name": "NAME",
                "value": "main-floor-sunset",
                "type": "str"
            }
        ],
        "x": 480,
        "y": 360,
        "wires": [
            [
                "66b239fbae02c252"
            ]
        ]
    },
    {
        "id": "af712bf4ec4004b4",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "074874e0ff13a7b1",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 950,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "18f53b7627e645e4",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "yard sunset",
        "links": [
            "e270017761dfd27d"
        ],
        "x": 175,
        "y": 160,
        "wires": [
            [
                "b22f3931c3a7aaa9"
            ]
        ]
    },
    {
        "id": "b22f3931c3a7aaa9",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 160,
        "wires": [
            [
                "74a870cad9944a03"
            ]
        ]
    },
    {
        "id": "60976d31a8dafe99",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "yard jolly",
        "links": [
            "b0ee0f2f8155fe9b"
        ],
        "x": 175,
        "y": 460,
        "wires": [
            [
                "a5ea4f7eb61a9136"
            ]
        ]
    },
    {
        "id": "a5ea4f7eb61a9136",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 460,
        "wires": [
            [
                "40657a16668306c1"
            ]
        ]
    },
    {
        "id": "ec4c4a28a59d105e",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "yard off",
        "links": [
            "6c3e6b4543f8c9ac",
            "8e8390b13cc5c45b"
        ],
        "x": 175,
        "y": 60,
        "wires": [
            [
                "fb388fbfb4e38ca3"
            ]
        ]
    },
    {
        "id": "fb388fbfb4e38ca3",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "turn off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/bad8480b-b404-42d1-a9e7-a4a69f400971",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 60,
        "wires": [
            [
                "dc1d9849661717f1"
            ]
        ]
    },
    {
        "id": "dc1d9849661717f1",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 450,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "34a695c0d0260e5a",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/9b6935e2-f8ed-4f91-83a2-2bff1850da99",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 160,
        "wires": [
            [
                "af712bf4ec4004b4"
            ]
        ]
    },
    {
        "id": "d07f9471a4a06ae8",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 160,
        "wires": [
            [
                "34a695c0d0260e5a"
            ]
        ]
    },
    {
        "id": "256ba437f41dfbcf",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/12571f23-7714-4b47-8e75-a3040389b788",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 460,
        "wires": [
            [
                "074874e0ff13a7b1"
            ]
        ]
    },
    {
        "id": "6cf088c77229de1d",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 460,
        "wires": [
            [
                "256ba437f41dfbcf"
            ]
        ]
    },
    {
        "id": "29a6f065ab64d562",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 970,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "53afc06e5cea0b0d",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 360,
        "wires": [
            [
                "ecf996995825cb3e"
            ]
        ]
    },
    {
        "id": "a225232dc86a3b6f",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "yard spooky",
        "links": [
            "b0ee0f2f8155fe9b",
            "c68369c3781694e3"
        ],
        "x": 175,
        "y": 360,
        "wires": [
            [
                "53afc06e5cea0b0d"
            ]
        ]
    },
    {
        "id": "ce692ff752c427a6",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/70a0a8a6-b4b7-4b24-a9cf-0ecea0f359cc",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 360,
        "wires": [
            [
                "29a6f065ab64d562"
            ]
        ]
    },
    {
        "id": "9fd4f397e5d23392",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 610,
        "y": 360,
        "wires": [
            [
                "ce692ff752c427a6"
            ]
        ]
    },
    {
        "id": "816be5cd3b82bf0b",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 950,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "ed68842beab6579e",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 260,
        "wires": [
            [
                "2e85bfabe8b4104b"
            ]
        ]
    },
    {
        "id": "a6475288998b4e07",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "yard tribal",
        "links": [
            "b0ee0f2f8155fe9b",
            "7ab1620c3349854b"
        ],
        "x": 175,
        "y": 260,
        "wires": [
            [
                "ed68842beab6579e"
            ]
        ]
    },
    {
        "id": "35ec7b633401cd2e",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/c4681d32-3368-43cd-9cf1-436132521068",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 740,
        "y": 260,
        "wires": [
            [
                "816be5cd3b82bf0b"
            ]
        ]
    },
    {
        "id": "c5dfb48af9335c64",
        "type": "switch",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 260,
        "wires": [
            [
                "35ec7b633401cd2e"
            ]
        ]
    },
    {
        "id": "83168e5d7847c8c6",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "560697371f3db13c",
        "name": "initialize yard",
        "links": [
            "84181a5971ac595a"
        ],
        "x": 175,
        "y": 660,
        "wires": [
            [
                "25c2139286d4bdc2"
            ]
        ]
    },
    {
        "id": "25c2139286d4bdc2",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "560697371f3db13c",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "payload.scenes",
                "pt": "msg",
                "to": "options",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 660,
        "wires": [
            [
                "5b037c1dc36fb7b6"
            ]
        ]
    },
    {
        "id": "5b037c1dc36fb7b6",
        "type": "ui_dropdown",
        "z": "adfd8ae4a2eaf844",
        "g": "560697371f3db13c",
        "name": "Yard Scene",
        "label": "",
        "tooltip": "",
        "place": "Choose scene...",
        "group": "a14f974504f5a504",
        "order": 2,
        "width": "5",
        "height": "1",
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 550,
        "y": 660,
        "wires": [
            [
                "42f80726fba6424c"
            ]
        ]
    },
    {
        "id": "42f80726fba6424c",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "560697371f3db13c",
        "name": "scene",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/scene/' & payload",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 660,
        "wires": [
            [
                "fdca4c3d3432da19"
            ]
        ]
    },
    {
        "id": "fdca4c3d3432da19",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "560697371f3db13c",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 870,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "13729e19d2f78a2f",
        "type": "ui_switch",
        "z": "adfd8ae4a2eaf844",
        "g": "65d303ac6b6c8a3a",
        "name": "Yard Lights",
        "label": "",
        "tooltip": "",
        "group": "a14f974504f5a504",
        "order": 1,
        "width": "1",
        "height": "1",
        "passthru": false,
        "decouple": "true",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 560,
        "wires": [
            [
                "ea698f91d3fe0804"
            ]
        ]
    },
    {
        "id": "5551026e4fa6c94a",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "65d303ac6b6c8a3a",
        "name": "",
        "links": [
            "7df3e5fbd6e9aa8a"
        ],
        "timeout": "30",
        "x": 730,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "1c310e455fa0d7cc",
        "type": "subflow:9c5370bf6c44a3a5",
        "z": "adfd8ae4a2eaf844",
        "g": "65d303ac6b6c8a3a",
        "name": "Yard",
        "x": 210,
        "y": 560,
        "wires": [
            [
                "13729e19d2f78a2f"
            ]
        ]
    },
    {
        "id": "ea698f91d3fe0804",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "65d303ac6b6c8a3a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "'resource/grouped_light/' & $env('GROUPED_LIGHT_ID')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":payload}}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 560,
        "wires": [
            [
                "5551026e4fa6c94a"
            ]
        ]
    },
    {
        "id": "2e85bfabe8b4104b",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "0117b53379eade19",
        "name": "yard-tribal",
        "env": [
            {
                "name": "NAME",
                "value": "yard-tribal",
                "type": "str"
            }
        ],
        "x": 460,
        "y": 260,
        "wires": [
            [
                "c5dfb48af9335c64"
            ]
        ]
    },
    {
        "id": "ecf996995825cb3e",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "dd577488786042ba",
        "name": "yard-spooky",
        "env": [
            {
                "name": "NAME",
                "value": "yard-spooky",
                "type": "str"
            }
        ],
        "x": 470,
        "y": 360,
        "wires": [
            [
                "9fd4f397e5d23392"
            ]
        ]
    },
    {
        "id": "40657a16668306c1",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "yard-jolly",
        "env": [
            {
                "name": "NAME",
                "value": "yard-jolly",
                "type": "str"
            }
        ],
        "x": 460,
        "y": 460,
        "wires": [
            [
                "6cf088c77229de1d"
            ]
        ]
    },
    {
        "id": "74a870cad9944a03",
        "type": "subflow:454f48125d29e6ef",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "yard-sunset",
        "env": [
            {
                "name": "NAME",
                "value": "yard-sunset",
                "type": "str"
            }
        ],
        "x": 470,
        "y": 160,
        "wires": [
            [
                "d07f9471a4a06ae8"
            ]
        ]
    }
]