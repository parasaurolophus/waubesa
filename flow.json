[
    {
        "id": "98d51762f6f2dad5",
        "type": "tab",
        "label": "MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a767582f3959afc9",
        "type": "tab",
        "label": "Timer",
        "disabled": false,
        "info": "Send the output of a `suncalc` node once per minute to the _Theme_ and _Time of Day_ subflows (q.v.) The output of each subflow is sent as a retained MQTT message to drive lighting and window covering automation.",
        "env": []
    },
    {
        "id": "c7141ffb22d64190",
        "type": "tab",
        "label": "Automation",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "7689d3d4b864d0dd",
        "type": "tab",
        "label": "Bedtime",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "63d8cb10398da04b",
        "type": "tab",
        "label": "Lighting",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "a00ccef1301f21e3",
        "type": "tab",
        "label": "Chez Nous Main",
        "disabled": false,
        "info": "Helper subroutine flows for accessing the Hue Bridge API on Chez Nous Main."
    },
    {
        "id": "ccf1967ecbc089aa",
        "type": "tab",
        "label": "Basement Hue",
        "disabled": false,
        "info": ""
    },
    {
        "id": "1cf0490e7de2f93d",
        "type": "tab",
        "label": "Chez Nous Shades",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "1344247d533f754a",
        "type": "tab",
        "label": "Main Bathroom",
        "disabled": false,
        "info": "Main Bathroom home automation integration.",
        "env": []
    },
    {
        "id": "e44149a93fbe9b1b",
        "type": "tab",
        "label": "Main Floor",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "adfd8ae4a2eaf844",
        "type": "tab",
        "label": "Yard",
        "disabled": false,
        "info": "Front Yard home automation integration.",
        "env": []
    },
    {
        "id": "a03a3519abf4e656",
        "type": "subflow",
        "name": "HomeKit Switch Auto-Off",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "3111257f22032077"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 630,
                "y": 100,
                "wires": [
                    {
                        "id": "6580878296a2c6db",
                        "port": 0
                    }
                ]
            },
            {
                "x": 450,
                "y": 180,
                "wires": [
                    {
                        "id": "73c278982d46a137",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "URI",
                "type": "str",
                "value": ""
            },
            {
                "name": "PAYLOAD",
                "type": "json",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-homekit-switch-auto-off",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Make a HomeKit switch simulate a button",
            "keywords": "homekit",
            "license": "Apache-2.0"
        },
        "color": "#C7E9C0",
        "inputLabels": [
            "from HomeKit switch"
        ],
        "outputLabels": [
            "to Hue Bridge API",
            "to HomeKit switch"
        ],
        "icon": "node-red-dashboard/ui_switch.png",
        "status": {
            "x": 200,
            "y": 260,
            "wires": [
                {
                    "id": "3b0d56ef21d73352",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "5785c8d9f39df67e",
        "type": "subflow",
        "name": "Hue Send",
        "info": "Send a message to the API (version 2) on a given Hue Bridge.\n\nSee <https://developers.meethue.com/develop/hue-api-v2/> for details.\n\n# Configuration\n\n`ADDRESS` environment variable is the bridge's IP address.\n\n`KEY` environment variable is the client access token for the message.\n\n# Input\n\n`msg.topic` is the API URI, e.g. `/resource`, `/room/0ca8f049-7ac9-4872-8069-4770834e4f11` etc.\n\n`msg.payload` is the message body, if any.\n\n`msg.method` is the HTTP request method, e.g. `GET`, `PUT` etc.\n\n# Outputs\n\nIf successful, the HTTP response will be sent as a parsed JSON object from output 1.\n\nA standard Node-RED error message will be sent on output 2 if the `http request` node throws an exception.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "c9c806d81ab63ac4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 600,
                "y": 40,
                "wires": [
                    {
                        "id": "20ac42d7649c260a",
                        "port": 0
                    }
                ]
            },
            {
                "x": 600,
                "y": 100,
                "wires": [
                    {
                        "id": "518d311e4301013a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            },
            {
                "name": "KEY",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-send",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Send a command to the Hue Bridge API",
            "keywords": "http, philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 600,
            "y": 160,
            "wires": [
                {
                    "id": "1e35b6e766e6b3d1",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "75bc72a16c4da2c8",
        "type": "subflow",
        "name": "Hue Access Token",
        "info": "Use the Hue Bridge API to create a client access token.\n\n**Invoke this subflow within 30 seconds of pressing the button on top of the bridge. Watch the debug console output to see the response. If successful, you will see the generated key among the response payload's properties.**\n\nSee <https://developers.meethue.com/develop/hue-api-v2/getting-started/> for details.\n\n# Configuration\n\n`ADDRESS` environment variable is the bridge's IP address.\n\n`USERNAME` environment variable is the client \"user name\" for which a key is being requested.\n\n# Input\n\nIncoming message is ignored.\n\n# Outputs\n\nThe HTTP response will be sent as a parsed JSON object. If successful, look for the value of the `msg.payload.success.username` property in the output. That is the string you should use as the access token header in all subsequent Hue Bridge API request messages.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "7316ae1eef4c6295"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 440,
                "y": 40,
                "wires": [
                    {
                        "id": "e4718ecfdb248cc7",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            },
            {
                "name": "USERNAME",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-access-token",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Invoke the Hue Bridge API for registering a client",
            "keywords": "http, philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 440,
            "y": 100,
            "wires": [
                {
                    "id": "64ad1b43047cb836",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "acfe4e875b80c543",
        "type": "subflow",
        "name": "Hue SSE",
        "info": "**Depends on [node-red-contrib-sse-client](https://flows.nodered.org/node/node-red-contrib-sse-client) (see <https://flows.nodered.org/node/node-red-contrib-sse-client>) which must be installed before this subflow.**\n\nSubscribe to the SSE message stream from a given Hue Bridge. Forward received events as retained MQTT messages. Along the way, persist in node context a cumulative representation of the values of all the attributes of each message as it passes through. Pass along the updated, cumulative payload. This is a work around for a number of crippling defects in the design of the Hue Bridge API V2.\n\nThis subflow is intended to be used in concert with complementary logic when `GET` and `PUT` API entry points are invoked. The net effect is that over time a comprehensive representation of the instantaneous state of all the Hue devices and other resources for a given bridge is built up as the values of a collection of retained MQTT messages, kept in sync with an in-memory snapshot of that representation in this subflow's context storage (really, the node context storage of a particular `function` node within this subflow).\n\nSee <https://developers.meethue.com/develop/hue-api-v2/core-concepts/#events> for details.\n\n# Configuration\n\n`ADDRESS` environment variable is the bridge's IP address.\n\n`KEY` environment variable is the client access token for the message.\n\n`TOPIC` environment variable is the base MQTT topic to prepend to each output message as events are received. Each output message will have a complete topic string of the form `${TOPIC}/<uri>`, where `<uri>` is based on the type of event. Such topic strings are designed to align with the URI's for corresponding `GET` and `PUT` API messages. This allows the use of retained MQTT in a \"closed loop\" for persistence, synchronizing the displayed state of dashboard controls and so on.\n\n# Input\n\n`msg.topic` is passed through from the input message, for maintaining a \"closed loop\" of Hue device or other resource state that will be persisted using flow context in sync with retained MQTT messages.\n\n`msg.payload` is the updated state of some device or other resource received through retained MQTT messages.\n\n# Output\n\nA stream of messages with MQTT topics and payloads that correspond to events received from the Hue Bridge. The output messages have `msg.retain` set to `true` so that the state of each device or other resource will be persisted by the MQTT broker.\n\n# Side Effects\n\nA cumulative snapshot of the complete state of each Hue device or other resource is maintained in flow context as this subflow processes individual SSE messages. That internal snapshot is also updated on receipt of corresponding retained MQTT messages. Thus, this subflow acts as an in-memory representation of the external state of Hue hardware and keeps that in-memory in sync across reboots, using the MQTT broker as a persistence mechanism as well as a communication medium. All of this is designed as a work around for crippling defects in the overall design of the Hue Bridge API that make it challenging to use for its intended purpose without a great deal of pre- and post-processing of SSE messages and other API calls.",
        "category": "hue",
        "in": [],
        "out": [
            {
                "x": 840,
                "y": 240,
                "wires": [
                    {
                        "id": "f0f2ac4aab7a4c46",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            },
            {
                "name": "KEY",
                "type": "str",
                "value": ""
            },
            {
                "name": "TOPIC",
                "type": "str",
                "value": "hue"
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-sse",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Forward Philips Hue Bridge SSE messages to MQTT",
            "keywords": "sse, philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "outputLabels": [
            "event message"
        ],
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 180,
            "y": 200,
            "wires": [
                {
                    "id": "3138d66f2debfe3f",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e4e37acec8ce8ff8",
        "type": "subflow",
        "name": "Hue Metadata",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "cb88b646e431c69a"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 520,
                "y": 40,
                "wires": [
                    {
                        "id": "0db5fb5377e50287",
                        "port": 0
                    }
                ]
            },
            {
                "x": 620,
                "y": 320,
                "wires": [
                    {
                        "id": "2b2d52288fccad35",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "TOPIC",
                "type": "str",
                "value": "hue"
            },
            {
                "name": "GLOBAL",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Parse the response from a GET request for all metadata from a Hue bridge",
            "keywords": "philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 800,
            "y": 240,
            "wires": [
                {
                    "id": "7e8a765a307e5767",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "d0a1d8f666dafcc0",
        "type": "subflow",
        "name": "Hue Group Metadata",
        "info": "Extract and consolidate metadata for a room or a zone. Note that from an API point of view, the only difference between rooms and zones is the URI used to access them.",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "ead0e15743d4fae3"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 880,
                "y": 480,
                "wires": [
                    {
                        "id": "305a7fead9d0cfcb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "GLOBAL",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-group-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Extract and reformat frequently used Hue metadata for rooms and \"zones\"",
            "keywords": "philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 880,
            "y": 540,
            "wires": [
                {
                    "id": "ceedd7f5abe60f4c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c930ca19d66e430d",
        "type": "subflow",
        "name": "PowerView Rooms",
        "info": "Use the _Hunter Douglas PowerView_&reg; hub API to get metadata for rooms.\n\n\nSee <https://motorisation.hde.nl/hd/powerview/general-guides/API/> for details.\n\n# Configuration\n\nThe `ADDRESS` environment variable must be configured with the IP address of the hub.\n\n# Input\n\nAll input message properties are ignored but care should be taken not to pass any through that could affect the behavior of a `http request` node in unintended ways.\n\n# Output\n\nHTTP response from the hub.\n",
        "category": "powerview",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "f6dd79192e142da8"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 480,
                "y": 120,
                "wires": [
                    {
                        "id": "b716edcd37c1e93b",
                        "port": 0
                    }
                ]
            },
            {
                "x": 480,
                "y": 200,
                "wires": [
                    {
                        "id": "a1e93b0a11ef71a5",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-powerview-rooms",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Get the room configuration from a PowerView hub",
            "keywords": "http, powerview, hunter douglas",
            "license": "Apache-2.0"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 480,
            "y": 280,
            "wires": [
                {
                    "id": "68115d50b5cdb27d",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "1a6413355bbb49cc",
        "type": "subflow",
        "name": "PowerView Scenes",
        "info": "Use the _Hunter Douglas PowerView_&reg; hub API to get metadata for scenes.\n\n\nSee <https://motorisation.hde.nl/hd/powerview/general-guides/API/> for details.\n\n# Configuration\n\nThe `ADDRESS` environment variable must be configured with the IP address of the hub.\n\n# Input\n\nAll input message properties are ignored but care should be taken not to pass any through that could affect the behavior of a `http request` node in unintended ways.\n\n# Output\n\nHTTP response from the hub.\n",
        "category": "powerview",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "643e95dd6df2d982"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 500,
                "y": 120,
                "wires": [
                    {
                        "id": "233e95db4a2e39b3",
                        "port": 0
                    }
                ]
            },
            {
                "x": 500,
                "y": 180,
                "wires": [
                    {
                        "id": "1ea0cbef01c0daaa",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-powerview-scenes",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Get the scene configuration from a PowerView hub",
            "keywords": "http, powerview, hunter douglas",
            "license": "Apache-2.0"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 500,
            "y": 240,
            "wires": [
                {
                    "id": "013c4b7388921d23",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "9c4e4702e4660adf",
        "type": "subflow",
        "name": "PowerView Set Scene",
        "info": "Use the _Hunter Douglas PowerView_&reg; hub API to activate a given window shade scene.\n\n\nSee <https://motorisation.hde.nl/hd/powerview/general-guides/API/> for details.\n\n# Configuration\n\nThe `ADDRESS` environment variable must be configured with the IP address of the hub.\n\n# Input\n\n`msg.payload` containing the id of the scene to activate.\n\nAll other input message properties are ignored but care should be taken not to pass any through that could affect the behavior of a `http request` node in unintended ways.\n\n# Output\n\nHTTP response from the hub.\n\n# Side Effects\n\nIf successful, the window shades will move to the settings defined by the specified scene as configured using the _PowerView_&reg; mobile app.",
        "category": "powerview",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "dcd553804e687131"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 580,
                "y": 40,
                "wires": [
                    {
                        "id": "8dc3bcf508fc6c98",
                        "port": 0
                    }
                ]
            },
            {
                "x": 580,
                "y": 100,
                "wires": [
                    {
                        "id": "9391004cf711e2ea",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "ADDRESS",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-powerview-set-scene",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Activate a PowerView scene",
            "keywords": "http, hunter douglas, powerview",
            "license": "Apache-2.0"
        },
        "color": "#C0DEED",
        "icon": "font-awesome/fa-align-justify",
        "status": {
            "x": 580,
            "y": 160,
            "wires": [
                {
                    "id": "728ab503eb1eb941",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "764913cd47ccb672",
        "type": "subflow",
        "name": "Hue UI Metadata",
        "info": "",
        "category": "hue",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "82422755412f473d"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 800,
                "y": 160,
                "wires": [
                    {
                        "id": "cd0f0860d8795bcf",
                        "port": 0
                    },
                    {
                        "id": "b36d0601f4e482d5",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "GLOBAL",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {
            "module": "node-red-subflow-hue-ui-metadata",
            "version": "1.0.0",
            "author": "parasaurolophus <apps@rader.us>",
            "desc": "Extract Hue metadata used to author dashboard and HomeKit integration",
            "keywords": "philips, hue",
            "license": "Apache-2.0"
        },
        "color": "#3FADB5",
        "icon": "font-awesome/fa-lightbulb-o",
        "status": {
            "x": 800,
            "y": 220,
            "wires": [
                {
                    "id": "701c769269c83bb0",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "726649588d2df715",
        "type": "subflow",
        "name": "Time of Day",
        "info": "Determine the time of day based on the latest `suncalc` event. This will be one of the following values:\n\n| `msg.payload` | Time of Day |\n|:-:|-|\n| `morning` | Sunrise to 5 hours after sunrise |\n| `midday` | 5 hours after sunrise to 5 hours before sunset |\n| `afternoon` | 5 hours before sunset to sunset |\n| `evening` | Sunset to bedtime |\n| `night` | Bedtime to sunrise |\n\n\"Bedtime\" is configurable using the dashboard. The actual time at which `evening` transitions to `night` varies from day to day by adding a randomly generated offset from 30 minutes before to 30 minutes after the configured time. A new random offset is generated each morning.",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "a1d1e45137e94cbc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 860,
                "y": 380,
                "wires": [
                    {
                        "id": "775af628329ee46c",
                        "port": 0
                    }
                ]
            },
            {
                "x": 650,
                "y": 580,
                "wires": [
                    {
                        "id": "2d2ba9af968fc7b4",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "inputLabels": [
            "from suncalc"
        ],
        "outputLabels": [
            "to mqtt",
            "error"
        ],
        "status": {
            "x": 820,
            "y": 460,
            "wires": [
                {
                    "id": "775af628329ee46c",
                    "port": 0
                },
                {
                    "id": "8a4abdf235b35e26",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "dd922212d29c22cf",
        "type": "subflow",
        "name": "Theme",
        "info": "Use the most recent `suncalc` event to determine the theme for lighting automation based on the current month and day. This will be one of the following:\n\n| `msg.payload` | Current Date                     |\n|:-------------:|----------------------------------|\n| `tribal`      | July 1 - 4 |\n| `spooky`      | Any day in October               |\n| `jolly`       | Any day in December              |\n| `standard`    | Any other day                    |",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 60,
                "wires": [
                    {
                        "id": "574b361c81d6154c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 800,
                "y": 200,
                "wires": [
                    {
                        "id": "70719fd47b7d8309",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "inputLabels": [
            "from suncalc"
        ],
        "outputLabels": [
            "to mqtt"
        ],
        "status": {
            "x": 760,
            "y": 280,
            "wires": [
                {
                    "id": "70719fd47b7d8309",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "c32d8a09391c0c3c",
        "type": "subflow",
        "name": "Timer Event",
        "category": "waubesa",
        "in": [],
        "out": [
            {
                "x": 740,
                "y": 100,
                "wires": [
                    {
                        "id": "bc9643fcb15a2542",
                        "port": 0
                    }
                ]
            },
            {
                "x": 850,
                "y": 180,
                "wires": [
                    {
                        "id": "e6020d90de95f8b2",
                        "port": 0
                    }
                ]
            },
            {
                "x": 510,
                "y": 380,
                "wires": [
                    {
                        "id": "fd71908c8986c904",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "to automation",
            "to bedtime",
            "error"
        ],
        "status": {
            "x": 680,
            "y": 260,
            "wires": [
                {
                    "id": "4b26463cd0d8bc44",
                    "port": 0
                },
                {
                    "id": "0e51b7c6a82dff66",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "ca7f1257fb7eb85f",
        "type": "subflow",
        "name": "Filter Timer Events",
        "info": "Pass messages through if and only if all of the following conditions are met:\n\n1. `global.enableAutomation` is `true`\n2. Payload has changed since last event\n3. This is not the first event since the flow was started",
        "category": "waubesa",
        "in": [
            {
                "x": 40,
                "y": 40,
                "wires": [
                    {
                        "id": "eaf6d39ea4e3cda7"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 640,
                "y": 120,
                "wires": [
                    {
                        "id": "3626b73dafe1ce84",
                        "port": 0
                    }
                ]
            },
            {
                "x": 370,
                "y": 360,
                "wires": [
                    {
                        "id": "97032e5163c94809",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "inputLabels": [
            "timer event"
        ],
        "outputLabels": [
            "to automation",
            "error"
        ],
        "status": {
            "x": 540,
            "y": 240,
            "wires": [
                {
                    "id": "554b77aac75a45b1",
                    "port": 0
                },
                {
                    "id": "f06385e67c533aae",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "92cadf0a47e0253a",
        "type": "subflow",
        "name": "Set Global Bedtime",
        "info": "Set `global.bedtime` to the value of `msg.payload`",
        "category": "waubesa",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "327b8c6e03e4763f"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 840,
                "y": 40,
                "wires": [
                    {
                        "id": "1de7044c47282d94",
                        "port": 0
                    }
                ]
            },
            {
                "x": 670,
                "y": 240,
                "wires": [
                    {
                        "id": "3c13c912c5346552",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 840,
            "y": 120,
            "wires": [
                {
                    "id": "1de7044c47282d94",
                    "port": 0
                },
                {
                    "id": "a7e5e5a9b5591067",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "343ba5a6d075c19c",
        "type": "subflow",
        "name": "Get Global Bedtime",
        "info": "Set `msg.payload` to the current value of `global.bedtime.minutes`",
        "category": "waubesa",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "489473811921e26b"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 700,
                "y": 40,
                "wires": [
                    {
                        "id": "a58b94f7d37ad9dc",
                        "port": 0
                    }
                ]
            },
            {
                "x": 470,
                "y": 240,
                "wires": [
                    {
                        "id": "4c8f41753bbeb552",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "global.bedtime",
            "error"
        ],
        "status": {
            "x": 640,
            "y": 120,
            "wires": [
                {
                    "id": "a58b94f7d37ad9dc",
                    "port": 0
                },
                {
                    "id": "fbc57db19bf87304",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "38bb2b1449bd9b96",
        "type": "subflow",
        "name": "Yard Evening",
        "info": "Set `msg.theme` to the current value of `global.theme`. Select which output on which to forward the message based on the current theme.",
        "category": "waubesa",
        "in": [
            {
                "x": 40,
                "y": 280,
                "wires": [
                    {
                        "id": "9bcc61425fa0f7a0"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 850,
                "y": 40,
                "wires": [
                    {
                        "id": "490cc0ba5f699f8a",
                        "port": 0
                    }
                ]
            },
            {
                "x": 860,
                "y": 120,
                "wires": [
                    {
                        "id": "490cc0ba5f699f8a",
                        "port": 1
                    }
                ]
            },
            {
                "x": 850,
                "y": 200,
                "wires": [
                    {
                        "id": "490cc0ba5f699f8a",
                        "port": 2
                    }
                ]
            },
            {
                "x": 860,
                "y": 280,
                "wires": [
                    {
                        "id": "490cc0ba5f699f8a",
                        "port": 3
                    }
                ]
            },
            {
                "x": 610,
                "y": 480,
                "wires": [
                    {
                        "id": "2e4a539865cff7ae",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "outputLabels": [
            "tribal",
            "spooky",
            "jolly",
            "standard",
            "error"
        ],
        "status": {
            "x": 780,
            "y": 360,
            "wires": [
                {
                    "id": "1584448d523e5745",
                    "port": 0
                },
                {
                    "id": "2d51832744aee4af",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "88644a5a56fdab5e",
        "type": "subflow",
        "name": "Shade Scene",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 140,
                "wires": [
                    {
                        "id": "e797467935e3715b"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 100,
                "wires": [
                    {
                        "id": "ca4cb57dd2404456",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 1000,
            "y": 180,
            "wires": [
                {
                    "id": "580c156e36e3c889",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "e467d9c73202b5bf",
        "type": "subflow",
        "name": "Filter Shade Automation",
        "info": "",
        "category": "waubesa",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "bd9e10e67860b954"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1000,
                "y": 60,
                "wires": [
                    {
                        "id": "74140919f0bc2a8a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "status": {
            "x": 880,
            "y": 140,
            "wires": [
                {
                    "id": "444501da35d4a5b2",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "be3fb84e6a4c7720",
        "type": "subflow",
        "name": "Homebridge Switch",
        "info": "",
        "category": "homebridge",
        "in": [
            {
                "x": 60,
                "y": 100,
                "wires": [
                    {
                        "id": "ee2c58a644a8f266"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 340,
                "y": 60,
                "wires": [
                    {
                        "id": "ee2c58a644a8f266",
                        "port": 0
                    }
                ]
            },
            {
                "x": 340,
                "y": 140,
                "wires": [
                    {
                        "id": "ee2c58a644a8f266",
                        "port": 0
                    },
                    {
                        "id": "af8694bdb5aec294",
                        "port": 0
                    }
                ]
            },
            {
                "x": 270,
                "y": 260,
                "wires": [
                    {
                        "id": "ee54ef10ed3eaafc",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "GET",
                "type": "str",
                "value": ""
            },
            {
                "name": "SET",
                "type": "str",
                "value": ""
            }
        ],
        "meta": {},
        "color": "#AAAA66",
        "inputLabels": [
            "get"
        ],
        "outputLabels": [
            "get",
            "set",
            "error"
        ],
        "icon": "node-red-dashboard/ui_switch.png"
    },
    {
        "id": "1ccf0bc875015428",
        "type": "group",
        "z": "a00ccef1301f21e3",
        "name": "Send requests to the Hue API on the Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "cd3d6cfea67f490b",
            "a9378d8ba74f3f4f",
            "6e6586249457134b",
            "a87a245333d87177"
        ],
        "x": 14,
        "y": 219
    },
    {
        "id": "ea7b9754db9fd0cd",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard sunset scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "e2139e7bb021147f",
            "af712bf4ec4004b4",
            "0bdc1e921a0eafd6",
            "b33691546f7f459a",
            "fb7fed76720fc92b",
            "18f53b7627e645e4",
            "b22f3931c3a7aaa9"
        ],
        "x": 104,
        "y": 179
    },
    {
        "id": "afbdc8b60c682c85",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard jolly scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ca1e17d731e4816a",
            "074874e0ff13a7b1",
            "af85ec2f67fb223d",
            "edbb89b1218fdd21",
            "a5ed6c2a7a6ecc4b",
            "a5ea4f7eb61a9136",
            "60976d31a8dafe99"
        ],
        "x": 104,
        "y": 319
    },
    {
        "id": "03822925b892df4a",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard spooky scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "61d42601aace19ae",
            "3dc20d8212996ca2",
            "241098d9131aaff5",
            "58da5eea28596fe8",
            "44286bc52974ad2c",
            "54e2411e6d2fa497",
            "cc9a7b174ce21d63"
        ],
        "x": 104,
        "y": 459
    },
    {
        "id": "ce88172c5dbc9f67",
        "type": "group",
        "z": "a00ccef1301f21e3",
        "name": "Use within 30 seconds of pressing link button on Chez Nous Main bridge",
        "style": {
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "stroke": "none",
            "fill": "#000000"
        },
        "nodes": [
            "42d607d0bcefe3a3",
            "fd7babc23ade7d52",
            "dde4b6e7207eaaa2"
        ],
        "x": 14,
        "y": 19
    },
    {
        "id": "1ce03cecd5db8bc6",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Turn off main floor lights group using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "07ccb0b07e6fada8",
            "4baea86ab327a4b9",
            "e1b2c4c65a54e028",
            "6e689aadd1f722a9",
            "ec1b9da9a2a0dde0",
            "33533dc0ac4ff870",
            "0b9ce30f50e82911",
            "2efdae9d98c90cf9",
            "955cc461db6d2ee1",
            "cdfe4f6ec3551a19"
        ],
        "x": 54,
        "y": 39,
        "w": 1242,
        "h": 162
    },
    {
        "id": "3483ce20c1996e6c",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor nightlight scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3ed1a4d37d1548b4",
            "53509cbc2f897eb4",
            "7b10a17dd5bc4c0f",
            "1462dac4d5543f0a",
            "c4ad8310f9a121b0",
            "75718c47ae5aab65",
            "2becbd293c0348ad",
            "cf3d3a3da0c079db",
            "81b0e480955e02c8",
            "59700d692d2c3561"
        ],
        "x": 54,
        "y": 399,
        "w": 1292,
        "h": 162
    },
    {
        "id": "7872f889f870b7ea",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Activate yard tribal scene on Chez Nous Main bridge using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "5fed7c286b1b64b0",
            "f52db1057ce1acdf",
            "e3399cac6bef15a2",
            "1b86868f195f85f4",
            "1e9eea60806a6dc1",
            "3a372efc2402f538",
            "04ad8639f667bd76"
        ],
        "x": 104,
        "y": 599
    },
    {
        "id": "83a2d6e5f2f3347b",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor bright scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3fd4ceb10de1cfab",
            "7519f356aef82889",
            "4104b520ce069209",
            "c24b271f1c0a013a",
            "6e235cc35896e53f",
            "d7de78cf904fbc6a",
            "5b9644b03821362f",
            "f91a88d8cf38b464",
            "673aef6e72d03b7b",
            "280e11df2383a1be"
        ],
        "x": 54,
        "y": 219,
        "w": 1272,
        "h": 162
    },
    {
        "id": "96bfb32777af9e2c",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Turn off main bathroom lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "e74fcadba6a2b4ca",
            "4288f4e0d18dbff6",
            "d79164592fe44617",
            "744875d6afbd2253"
        ],
        "x": 44,
        "y": 179
    },
    {
        "id": "e936dbad3fb3b587",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Select lighting mode",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "061d8c40c8ed16ab",
            "1993fd8165053adf"
        ],
        "x": 124,
        "y": 271.5
    },
    {
        "id": "2af1d2a51c281b62",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Activate \"night\" lighting mode",
        "style": {
            "label": true,
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "color": "#000000"
        },
        "nodes": [
            "549a2335fb839c37",
            "ae9f9aeb54f6cfb1",
            "8e8390b13cc5c45b",
            "c897f7f0ee8680dc"
        ],
        "x": 394,
        "y": 519
    },
    {
        "id": "73991d26373b19c7",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Activate \"evening\" lighting mode",
        "style": {
            "stroke": "none",
            "label": true,
            "fill": "#000000",
            "fill-opacity": "0.1",
            "color": "#000000"
        },
        "nodes": [
            "2837183323a61e04",
            "7ab1620c3349854b",
            "c68369c3781694e3",
            "b0ee0f2f8155fe9b",
            "e270017761dfd27d",
            "68ab3d466afd4596",
            "b9f7a65beebcddfe",
            "76d1cf6057f1e9bf"
        ],
        "x": 394,
        "y": 219
    },
    {
        "id": "b940bf3a0df755de",
        "type": "group",
        "z": "63d8cb10398da04b",
        "name": "Activate \"morning\" lighting mode",
        "style": {
            "stroke": "none",
            "label": true,
            "fill": "#000000",
            "fill-opacity": "0.1",
            "color": "#000000"
        },
        "nodes": [
            "981dbc2364b09d66",
            "7d12aa9a36e86798",
            "6c3e6b4543f8c9ac",
            "f12fbd86617caaf9"
        ],
        "x": 394,
        "y": 39
    },
    {
        "id": "716a5e2d5b07383b",
        "type": "group",
        "z": "a00ccef1301f21e3",
        "name": "Handle SSE messages from Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "110ffac1ab9d4035",
            "9402de8cb82a7cb9"
        ],
        "x": 14,
        "y": 119
    },
    {
        "id": "c49a717c63369963",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Activate PowerView scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ff97f036e34831b8",
            "03385520953758c9",
            "db81cf75a2ca1776"
        ],
        "x": 44,
        "y": 339
    },
    {
        "id": "cccd3d3ae4af3207",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Fetch the PowerView window shade room and scene metadata from the Chez Nous Shades hub",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "577c54a2be0d38c9",
            "67d809df8ea595ac",
            "fac99573a09374b0",
            "cae953f2c04362ad",
            "536874de79956f84",
            "986a93941fd0726d",
            "1cee4f351bd59563"
        ],
        "x": 34,
        "y": 19
    },
    {
        "id": "5a2c18585609cfae",
        "type": "group",
        "z": "1344247d533f754a",
        "name": "Activate main bathroom nightlight scene",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "a4c3ecea47eed101",
            "fbd53f7f18ca6655",
            "26ad3b6fd956be59",
            "6d42b6ceb063165f"
        ],
        "x": 44,
        "y": 39
    },
    {
        "id": "4b0e89ddb66673e4",
        "type": "group",
        "z": "98d51762f6f2dad5",
        "name": "Limit rate at which messages are sent to the MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "30286901101a6095",
            "259af303254337ad",
            "18038cbbe3f73104"
        ],
        "x": 134,
        "y": 59
    },
    {
        "id": "9f344af23b60f386",
        "type": "group",
        "z": "a767582f3959afc9",
        "name": "Current time each minute",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "0e03f7b1c487930f"
        ],
        "x": 34,
        "y": 139
    },
    {
        "id": "7c175ce901294697",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Trigger automation from MQTT",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "1f7aefd9b0586064",
            "bcacc67a0668b8ad",
            "1980b7a63222124d",
            "b499489bb8e8a9b9",
            "73f1ea44d20509b6",
            "219600424ec359a5",
            "611c11b1ba6aa270"
        ],
        "x": 34,
        "y": 39,
        "w": 612,
        "h": 222
    },
    {
        "id": "875ab4538bb22f15",
        "type": "group",
        "z": "7689d3d4b864d0dd",
        "name": "Set global.bedtime",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "2111a7129946fc0e",
            "0d2076033917b70d",
            "e2f5213b9ccd0528"
        ],
        "x": 354,
        "y": 39
    },
    {
        "id": "0fe686a291277b71",
        "type": "group",
        "z": "7689d3d4b864d0dd",
        "name": "User interface for setting bedtime",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "label-position": "ne"
        },
        "nodes": [
            "79709f226d61bff5",
            "7f53ee2f29d4da93",
            "53b63e2bae9ee295",
            "801bc206cfa0803d",
            "4a8fa45a5356afb7"
        ],
        "x": 54,
        "y": 319
    },
    {
        "id": "541f223d7251abbe",
        "type": "group",
        "z": "7689d3d4b864d0dd",
        "name": "",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "d31eac19e524875d"
        ],
        "x": 34,
        "y": 119
    },
    {
        "id": "98379557a8077dc0",
        "type": "group",
        "z": "7689d3d4b864d0dd",
        "name": "Regenerate randomized bedtime every morning",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "label-position": "sw"
        },
        "nodes": [
            "e0ff654341b45f3b",
            "6c2fdbf2b5ebd351",
            "02a7ad03458a135e",
            "095af1f6e9620187"
        ],
        "x": 344,
        "y": 519
    },
    {
        "id": "2afac67683a580f7",
        "type": "group",
        "z": "1cf0490e7de2f93d",
        "name": "Window shade automation",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "3c70a7443900cb3f",
            "0514602b711a8136",
            "7a1f5cbf9b84c489",
            "6a01fdc18127e8e9",
            "48bae5dfd9e5eceb",
            "2ab3e93641907bc5",
            "eece269a0f652f42",
            "8c4fab16172ba280"
        ],
        "x": 34,
        "y": 119
    },
    {
        "id": "41cef0af2772c23a",
        "type": "group",
        "z": "a00ccef1301f21e3",
        "name": "Periodically fetch all metdata from Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "06fb360d1605eee4",
            "5c11ca5b24ca72d8",
            "69a8648256e320f4",
            "c0d1759df573b02a",
            "b5ef755eebfb11fb",
            "358804a740fed977",
            "9a4ad6cbad7170d7",
            "0a7975b261bc92b0",
            "b879dc87b86093fc",
            "bb32f45d1a4e196d",
            "c6e09ee6553c5587"
        ],
        "x": 14,
        "y": 359
    },
    {
        "id": "d596f90a11f948b5",
        "type": "group",
        "z": "ccf1967ecbc089aa",
        "name": "Use within 30 seconds of pressing link button on Basement Hue bridge",
        "style": {
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000",
            "stroke": "none",
            "fill": "#000000"
        },
        "nodes": [
            "646c1166e094edb8",
            "dfe3c5cff4adfbe1",
            "528ecfb852f1b92e"
        ],
        "x": 14,
        "y": 19
    },
    {
        "id": "d906806776a15be5",
        "type": "group",
        "z": "ccf1967ecbc089aa",
        "name": "Send requests to the Hue API on the Chez Nous Main bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "726b4d347f62a02d",
            "befc9498e0e538c3",
            "1c27f4a9b46c4f7d",
            "3dd9a3ccf38d705a"
        ],
        "x": 14,
        "y": 219
    },
    {
        "id": "80d5524b4b86d1df",
        "type": "group",
        "z": "ccf1967ecbc089aa",
        "name": "Handle SSE messages fromBasement Hue bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "023068eedd0bb4cc",
            "15164c46a7616484"
        ],
        "x": 14,
        "y": 119
    },
    {
        "id": "a72897abb2ba46cf",
        "type": "group",
        "z": "ccf1967ecbc089aa",
        "name": "Periodically fetch all metdata from Basement Hue bridge",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "83db9630b63b06ef",
            "4a9fc38baa50aaaf",
            "34d791c69d030139",
            "bb63b6666fb34d48",
            "9ad2fe3514535451",
            "d1d040779b99fb0a",
            "74f5393b9872d6a3",
            "ef6a6e44d928aace",
            "4828d97867b2ea95",
            "3021b1bb30da53b0",
            "14c5c6675b345fe3"
        ],
        "x": 14,
        "y": 359
    },
    {
        "id": "2238e89a8f0c976d",
        "type": "group",
        "z": "adfd8ae4a2eaf844",
        "name": "Turn off yard lights",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ec4c4a28a59d105e",
            "fb388fbfb4e38ca3",
            "dc1d9849661717f1",
            "1c30eff0cb020362"
        ],
        "x": 104,
        "y": 39
    },
    {
        "id": "3eef89f5b02c9489",
        "type": "group",
        "z": "a767582f3959afc9",
        "name": "Send time of day to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "af7e30f7cdeee1d9",
            "334c712c4536ed30",
            "5cd93cf4487a1623",
            "825f2ffa1e2be0dc",
            "4cecaa56f15ef51c"
        ],
        "x": 244,
        "y": 179
    },
    {
        "id": "2b6a7b4485e6a4ea",
        "type": "group",
        "z": "a767582f3959afc9",
        "name": "Send theme to MQTT broker",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "ffa002c8041b26c0",
            "7c2338efb1da51bb",
            "cd8c2f0951248f55"
        ],
        "x": 244,
        "y": 39
    },
    {
        "id": "afca2ae3ed3cb5fc",
        "type": "group",
        "z": "7689d3d4b864d0dd",
        "name": "Add random offset",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "bc385f9e10d6a793",
            "477668ef1f02bcfd"
        ],
        "x": 804,
        "y": 419
    },
    {
        "id": "e1fa765ec5a5ebd7",
        "type": "group",
        "z": "e44149a93fbe9b1b",
        "name": "Activate main floor sunset scene using HomeKit",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "6cae9b1ccc68cb9e",
            "8ae7ee0c87df1191",
            "edc2f01358673517",
            "76f3eb6c53a0310c",
            "4dfc07b3a5a352ec",
            "66b239fbae02c252",
            "460cb90e2fef9ac5",
            "c5035f88195b0a8e",
            "75b7b97213341620",
            "943ad59722b07bd3"
        ],
        "x": 54,
        "y": 579,
        "w": 1292,
        "h": 162
    },
    {
        "id": "af92fe447a5b5c32",
        "type": "group",
        "z": "7689d3d4b864d0dd",
        "name": "Filter shade automation events according to bedtime",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "cf7f0464e17fe251",
            "3169b6e6e492bf2d"
        ],
        "x": 354,
        "y": 219
    },
    {
        "id": "9568bdc73703ef81",
        "type": "group",
        "z": "98d51762f6f2dad5",
        "name": "Debug Homebridge MQTT traffic",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "dc8cb6097cfe4097",
            "10827bec6097b5f7",
            "5eb12c0188e7ed86",
            "615814ef789eb7fc"
        ],
        "x": 134,
        "y": 159
    },
    {
        "id": "d20094d180b611cb",
        "type": "group",
        "z": "c7141ffb22d64190",
        "name": "Enable Automation switch",
        "style": {
            "stroke": "none",
            "fill": "#000000",
            "fill-opacity": "0.1",
            "label": true,
            "color": "#000000"
        },
        "nodes": [
            "98f637cf7cc7d148",
            "ca33dbcb9d89e509",
            "1c76ee40a22aa969",
            "d9ccacf1c1072873",
            "d782e2dc7ed5876c",
            "82f5435131125669",
            "e2c95a57106e0678",
            "ed9e0aa24066f024"
        ],
        "x": 34,
        "y": 279,
        "w": 1032,
        "h": 202
    },
    {
        "id": "e79e0110c2317edb",
        "type": "tls-config",
        "name": "",
        "cert": "",
        "key": "",
        "ca": "",
        "certname": "",
        "keyname": "",
        "caname": "",
        "servername": "",
        "verifyservercert": false,
        "alpnprotocol": ""
    },
    {
        "id": "63c00f105cc3255f",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#9929bd",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#9929bd",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#9929bd",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#bb58db",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#9929bd",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Waubesa",
            "hideToolbar": "false",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "MM/DD/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "722d62f3b93039c3",
        "type": "mqtt-broker",
        "name": "",
        "broker": "broker.local",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "ec4d94df679f3b11",
        "type": "ui_tab",
        "name": "Automation",
        "icon": "fa-clock-o",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ad4d885f83f029a5",
        "type": "ui_group",
        "name": "Bedtime",
        "tab": "ec4d94df679f3b11",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "25c7f0078ed443dd",
        "type": "ui_group",
        "name": "Automation",
        "tab": "ec4d94df679f3b11",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "2e4541b20001f580",
        "type": "semaphore-config",
        "name": "enable",
        "capacity": "1"
    },
    {
        "id": "42cf9f6ae4b51f49",
        "type": "semaphore-config",
        "name": "theme",
        "capacity": "1"
    },
    {
        "id": "8adeed565b07fe45",
        "type": "semaphore-config",
        "name": "bedtime",
        "capacity": "1"
    },
    {
        "id": "535a2813bb8f3319",
        "type": "semaphore-config",
        "name": "chez nous main",
        "capacity": "1"
    },
    {
        "id": "739cc6382b87f23e",
        "type": "semaphore-config",
        "name": "basement hue",
        "capacity": "1"
    },
    {
        "id": "9baaf509ad48bed9",
        "type": "homekit-standalone",
        "accessoryCategory": "8",
        "bridgeName": "Yard Dynamic Sunset",
        "hostType": 1,
        "pinCode": "855-88-078",
        "port": "",
        "advertiser": "bonjour-hap",
        "allowInsecureRequest": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "0101",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "customMdnsConfig": false,
        "mdnsMulticast": true,
        "mdnsInterface": "",
        "mdnsPort": "",
        "mdnsIp": "",
        "mdnsTtl": "",
        "mdnsLoopback": true,
        "mdnsReuseAddr": true,
        "allowMessagePassthrough": true
    },
    {
        "id": "3530c15956a26d05",
        "type": "homekit-standalone",
        "accessoryCategory": "8",
        "bridgeName": "Yard Dynamic Jolly",
        "hostType": 1,
        "pinCode": "063-84-163",
        "port": "",
        "advertiser": "bonjour-hap",
        "allowInsecureRequest": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "0102",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "customMdnsConfig": false,
        "mdnsMulticast": true,
        "mdnsInterface": "",
        "mdnsPort": "",
        "mdnsIp": "",
        "mdnsTtl": "",
        "mdnsLoopback": true,
        "mdnsReuseAddr": true,
        "allowMessagePassthrough": true
    },
    {
        "id": "b1e430888ffe3cb4",
        "type": "homekit-standalone",
        "accessoryCategory": "8",
        "bridgeName": "Yard Dynamic Spooky",
        "hostType": 1,
        "pinCode": "968-27-870",
        "port": "",
        "advertiser": "bonjour-hap",
        "allowInsecureRequest": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "0103",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "customMdnsConfig": false,
        "mdnsMulticast": true,
        "mdnsInterface": "",
        "mdnsPort": "",
        "mdnsIp": "",
        "mdnsTtl": "",
        "mdnsLoopback": true,
        "mdnsReuseAddr": true,
        "allowMessagePassthrough": true
    },
    {
        "id": "90af3b55ec091c59",
        "type": "homekit-standalone",
        "accessoryCategory": "8",
        "bridgeName": "Yard Dynamic Tribal",
        "hostType": 1,
        "pinCode": "706-42-885",
        "port": "",
        "advertiser": "bonjour-hap",
        "allowInsecureRequest": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "0104",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "customMdnsConfig": false,
        "mdnsMulticast": true,
        "mdnsInterface": "",
        "mdnsPort": "",
        "mdnsIp": "",
        "mdnsTtl": "",
        "mdnsLoopback": true,
        "mdnsReuseAddr": true,
        "allowMessagePassthrough": true
    },
    {
        "id": "3111257f22032077",
        "type": "switch",
        "z": "a03a3519abf4e656",
        "name": "payload is {\"On\":true}",
        "property": "payload.On",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 200,
        "y": 60,
        "wires": [
            [
                "73c278982d46a137"
            ]
        ]
    },
    {
        "id": "73c278982d46a137",
        "type": "trigger",
        "z": "a03a3519abf4e656",
        "name": "send {\"On\":false} after 1 second",
        "op1": "",
        "op2": "{\"On\":false}",
        "op1type": "pay",
        "op2type": "json",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 190,
        "y": 140,
        "wires": [
            [
                "6580878296a2c6db"
            ],
            []
        ]
    },
    {
        "id": "3b0d56ef21d73352",
        "type": "status",
        "z": "a03a3519abf4e656",
        "name": "",
        "scope": [
            "73c278982d46a137"
        ],
        "x": 100,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "6580878296a2c6db",
        "type": "change",
        "z": "a03a3519abf4e656",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "URI",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "PAYLOAD",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 440,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "c9c806d81ab63ac4",
        "type": "delay",
        "z": "5785c8d9f39df67e",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 150,
        "y": 40,
        "wires": [
            [
                "fa870f94fa1ea10b"
            ]
        ]
    },
    {
        "id": "fa870f94fa1ea10b",
        "type": "change",
        "z": "5785c8d9f39df67e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"hue-application-key\": $env('KEY')}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/clip/v2/' & topic",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 40,
        "wires": [
            [
                "20ac42d7649c260a"
            ]
        ]
    },
    {
        "id": "20ac42d7649c260a",
        "type": "http request",
        "z": "5785c8d9f39df67e",
        "name": "",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "e79e0110c2317edb",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 490,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "518d311e4301013a",
        "type": "catch",
        "z": "5785c8d9f39df67e",
        "name": "",
        "scope": [
            "20ac42d7649c260a"
        ],
        "uncaught": false,
        "x": 510,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "1e35b6e766e6b3d1",
        "type": "status",
        "z": "5785c8d9f39df67e",
        "name": "",
        "scope": [
            "c9c806d81ab63ac4"
        ],
        "x": 500,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "e4718ecfdb248cc7",
        "type": "http request",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "method": "POST",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "e79e0110c2317edb",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7316ae1eef4c6295",
        "type": "change",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"devicetype\":$env('USERNAME'),\"generateclientkey\":true}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/api'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 40,
        "wires": [
            [
                "e4718ecfdb248cc7"
            ]
        ]
    },
    {
        "id": "64ad1b43047cb836",
        "type": "status",
        "z": "75bc72a16c4da2c8",
        "name": "",
        "scope": [
            "e4718ecfdb248cc7"
        ],
        "x": 340,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "206d7b60d1ef33b4",
        "type": "sse-client",
        "z": "acfe4e875b80c543",
        "name": "",
        "url": "",
        "events": [],
        "headers": {},
        "proxy": "",
        "restart": true,
        "rejectUnauthorized": false,
        "withCredentials": true,
        "timeout": "60",
        "x": 550,
        "y": 80,
        "wires": [
            [
                "cfd7e92440c5d24a"
            ]
        ]
    },
    {
        "id": "cfd7e92440c5d24a",
        "type": "json",
        "z": "acfe4e875b80c543",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 690,
        "y": 80,
        "wires": [
            [
                "37c6783cf4d6a4a7"
            ]
        ]
    },
    {
        "id": "400f654f1ed89c9b",
        "type": "change",
        "z": "acfe4e875b80c543",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "headers",
                "pt": "msg",
                "to": "{\"hue-application-key\": $env('KEY')}",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'https://' & $env('ADDRESS') & '/eventstream/clip/v2'",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 80,
        "wires": [
            [
                "206d7b60d1ef33b4"
            ]
        ]
    },
    {
        "id": "9d515bab91d941ea",
        "type": "catch",
        "z": "acfe4e875b80c543",
        "name": "",
        "scope": [
            "206d7b60d1ef33b4"
        ],
        "uncaught": false,
        "x": 70,
        "y": 40,
        "wires": [
            [
                "96a5e8522f64a1b0"
            ]
        ]
    },
    {
        "id": "96a5e8522f64a1b0",
        "type": "delay",
        "z": "acfe4e875b80c543",
        "name": "",
        "pauseType": "delay",
        "timeout": "30",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 200,
        "y": 40,
        "wires": [
            [
                "400f654f1ed89c9b"
            ]
        ]
    },
    {
        "id": "37c6783cf4d6a4a7",
        "type": "split",
        "z": "acfe4e875b80c543",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 390,
        "y": 160,
        "wires": [
            [
                "049a9d86a4cc9f76"
            ]
        ]
    },
    {
        "id": "3138d66f2debfe3f",
        "type": "status",
        "z": "acfe4e875b80c543",
        "name": "",
        "scope": [
            "206d7b60d1ef33b4",
            "74bcc1fbdf609991"
        ],
        "x": 80,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "049a9d86a4cc9f76",
        "type": "change",
        "z": "acfe4e875b80c543",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.data",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 160,
        "wires": [
            [
                "0edfd51d5e69df8d"
            ]
        ]
    },
    {
        "id": "0edfd51d5e69df8d",
        "type": "split",
        "z": "acfe4e875b80c543",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 690,
        "y": 160,
        "wires": [
            [
                "cd4f06fa4e36b8c6"
            ]
        ]
    },
    {
        "id": "a7d422f5b4f60196",
        "type": "change",
        "z": "acfe4e875b80c543",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "$env('TOPIC') & '/' & payload.type & '/' & payload.id",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 240,
        "wires": [
            [
                "f0f2ac4aab7a4c46"
            ]
        ]
    },
    {
        "id": "cd4f06fa4e36b8c6",
        "type": "function",
        "z": "acfe4e875b80c543",
        "name": "updateState",
        "func": "let key = msg.payload.type + '/' + msg.payload.id\nlet state = context.get(key) || {}\n\nfor (let attribute in msg.payload) {\n    state[attribute] = msg.payload[attribute]\n}\n\ncontext.set(key, state)\nmsg.payload = state\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 240,
        "wires": [
            [
                "a7d422f5b4f60196"
            ]
        ],
        "info": "Persist in node context a cumulative representation of the values of all the attributes of each message as it passes through. Pass along the updated, cumulative payload. This is a work around for a number of crippling defects in the Hue Bridge API V2."
    },
    {
        "id": "f0f2ac4aab7a4c46",
        "type": "rbe",
        "z": "acfe4e875b80c543",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 690,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "577e400ca2ea74ae",
        "type": "switch",
        "z": "acfe4e875b80c543",
        "name": "",
        "property": "retain",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 210,
        "y": 280,
        "wires": [
            [
                "cd4f06fa4e36b8c6"
            ]
        ]
    },
    {
        "id": "6bafa753de19cd40",
        "type": "function",
        "z": "acfe4e875b80c543",
        "name": "atStart",
        "func": "let now = Date.now()\n\nnode.status({text: now, fill: 'yellow', shape: 'dot'})\nmsg.payload = now\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "setTimeout(() => {\n\n        let now = Date.now()\n        \n        node.status({text: now, fill: 'green', shape: 'dot'})\n        node.send({payload: now})\n\n    },\n\n    1000)\n",
        "finalize": "",
        "libs": [],
        "x": 210,
        "y": 120,
        "wires": [
            [
                "400f654f1ed89c9b"
            ]
        ],
        "info": "Send a message when the flow starts and, optionally, at a fixed interval thereafter.\n\nSubsequent messages can also be generated on demand by sending anything to this function node's input. In the latter case, the input message is ignored and the triggered message will have the same content as those generated by timers.\n\nUse in subflows where `trigger` nodes are not allowed.\n\n| Environment Variable | Default   | Description                                                                       |\n|----------------------|-----------|-----------------------------------------------------------------------------------|\n| `DELAY`              | `1000`    | Milliseconds to wait at start before sending a message                            |\n| `INTERVAL`           | `0`       | If greater than 0, milliseconds to wait between subsequent messages               |\n| `TOPIC`              | `\"timer\"` | Value for `msg.topic`                                                             |\n| `PAYLOAD`            | `null`    | Value for `msg.topic`; if `null`, then payload will contain the current timestamp |"
    },
    {
        "id": "74bcc1fbdf609991",
        "type": "mqtt in",
        "z": "acfe4e875b80c543",
        "name": "",
        "topic": "${TOPIC}",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 80,
        "y": 280,
        "wires": [
            [
                "577e400ca2ea74ae"
            ]
        ]
    },
    {
        "id": "0ced85e29fd61f45",
        "type": "split",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "topic",
        "x": 550,
        "y": 120,
        "wires": [
            [
                "a45e3a5a5fe0fefd"
            ]
        ]
    },
    {
        "id": "a45e3a5a5fe0fefd",
        "type": "change",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "$env('TOPIC') & '/' & topic",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 120,
        "y": 220,
        "wires": [
            [
                "4a8994fb6eac6d69"
            ]
        ]
    },
    {
        "id": "4a8994fb6eac6d69",
        "type": "switch",
        "z": "e4e37acec8ce8ff8",
        "name": "array",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "array",
                "vt": "array"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 270,
        "y": 220,
        "wires": [
            [
                "b8db07d6160e53c2"
            ],
            [
                "2b2d52288fccad35"
            ]
        ]
    },
    {
        "id": "b8db07d6160e53c2",
        "type": "split",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 390,
        "y": 200,
        "wires": [
            [
                "2b2d52288fccad35"
            ]
        ]
    },
    {
        "id": "2b2d52288fccad35",
        "type": "change",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "topic & '/' & payload.id",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 280,
        "wires": [
            [
                "7e8a765a307e5767"
            ]
        ]
    },
    {
        "id": "cb88b646e431c69a",
        "type": "function",
        "z": "e4e37acec8ce8ff8",
        "name": "segregateTypes",
        "func": "if (msg.payload.errors.length > 0) {\n\n    throw msg.payload.errors\n\n}\n\nlet resources = msg.payload.data\n\nlet arrays = {}\n\nresources.forEach(resource => {\n\n    let array = arrays[resource.type] || []\n    \n    array.push(resource)\n    arrays[resource.type] = array\n\n})\n\nmsg.payload = arrays\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 80,
        "wires": [
            [
                "0db5fb5377e50287"
            ]
        ]
    },
    {
        "id": "0db5fb5377e50287",
        "type": "change",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "${GLOBAL}",
                "pt": "global",
                "to": "payload",
                "tot": "msg",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 360,
        "y": 80,
        "wires": [
            [
                "0ced85e29fd61f45"
            ]
        ]
    },
    {
        "id": "7e8a765a307e5767",
        "type": "change",
        "z": "e4e37acec8ce8ff8",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.type",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "ead0e15743d4fae3",
        "type": "split",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 130,
        "y": 40,
        "wires": [
            [
                "04c837cc198de867"
            ]
        ]
    },
    {
        "id": "50f53825110eb50b",
        "type": "join",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 730,
        "y": 200,
        "wires": [
            [
                "39d39fe20c924bd4"
            ]
        ]
    },
    {
        "id": "04c837cc198de867",
        "type": "switch",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "parts.index + 1 >= parts.count",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 110,
        "y": 140,
        "wires": [
            [
                "3ecf91f3ad2bca8b"
            ],
            [
                "4e6f1f1f5f059d17"
            ]
        ]
    },
    {
        "id": "3ecf91f3ad2bca8b",
        "type": "change",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "last",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 250,
        "y": 120,
        "wires": [
            [
                "4e6f1f1f5f059d17"
            ]
        ]
    },
    {
        "id": "39d39fe20c924bd4",
        "type": "switch",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "property": "last",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 360,
        "wires": [
            [
                "f22ab48e2361fa72"
            ],
            [
                "2ec0eb1e91670554"
            ]
        ]
    },
    {
        "id": "f22ab48e2361fa72",
        "type": "change",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "rules": [
            {
                "t": "move",
                "p": "last",
                "pt": "msg",
                "to": "complete",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 340,
        "wires": [
            [
                "2ec0eb1e91670554"
            ]
        ]
    },
    {
        "id": "2ec0eb1e91670554",
        "type": "join",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 730,
        "y": 400,
        "wires": [
            [
                "305a7fead9d0cfcb"
            ]
        ]
    },
    {
        "id": "88c9d382af974358",
        "type": "function",
        "z": "d0a1d8f666dafcc0",
        "name": "groupedLightForGroup",
        "func": "let bridge = global.get(env.get('GLOBAL'))\n\nlet findGroupedLightService = group => {\n\n    for (let index = 0; index < group.services.length; ++index) {\n\n        let service = group.services[index]\n\n        if (service.rtype == 'grouped_light') {\n\n             return service\n\n        }\n    }\n    \n    throw 'no grouped_light service found in ' + JSON.stringify(group)\n\n}\n\nlet findGroupedLight = id => {\n    \n    for (let key in bridge.grouped_light) {\n        \n        let grouped_light = bridge.grouped_light[key]\n        \n        if (grouped_light.id == id) {\n            \n            return grouped_light\n            \n        }\n    }\n    \n    throw 'no grouped light found with id ' + id\n\n}\n\ntry {\n\n    let service = findGroupedLightService(msg.payload)\n    let groupedLight = findGroupedLight(service.rid)\n\n    node.status({\n        text: groupedLight.id,\n        fill: 'green',\n        shape: 'dot'\n    })\n\n    return {\n        topic: 'grouped_light',\n        payload: groupedLight\n    }\n\n} catch (e) {\n\n    node.warn(e)\n    return null\n\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 140,
        "wires": [
            [
                "50f53825110eb50b"
            ]
        ]
    },
    {
        "id": "564c65fb7e534107",
        "type": "function",
        "z": "d0a1d8f666dafcc0",
        "name": "scenesForGroup",
        "func": "let bridge = global.get(env.get('GLOBAL'))\nlet group = msg.payload\n\nlet scenes = []\n\nbridge.scene.forEach(scene => {\n\n    if (scene.group.rid == group.id) {\n\n        scenes.push(scene)\n\n    }\n})\n\nnode.status({\n    text: 'added ' + scenes.length + ' scenes for group ' + group.metadata.name,\n    fill: 'green',\n    shape: 'dot'\n})\n\nreturn {\n    topic: 'scene',\n    payload: scenes\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 200,
        "wires": [
            [
                "50f53825110eb50b"
            ]
        ]
    },
    {
        "id": "ceedd7f5abe60f4c",
        "type": "status",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "scope": [
            "98b8b9c0174dc6b0",
            "564c65fb7e534107",
            "88c9d382af974358"
        ],
        "x": 780,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "98b8b9c0174dc6b0",
        "type": "function",
        "z": "d0a1d8f666dafcc0",
        "name": "passThroughGroup",
        "func": "node.status({\n    text: msg.payload.metadata.name,\n    fill: 'green',\n    shape: 'dot'\n})\n\nlet last = msg.last\n\nif (last === undefined) {\n    \n    last = false\n\n}\n\nreturn {\n    topic: 'group',\n    payload: msg.payload,\n    last: last,\n    type: msg.payload.type\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 260,
        "wires": [
            [
                "50f53825110eb50b"
            ]
        ]
    },
    {
        "id": "4e6f1f1f5f059d17",
        "type": "fan",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "x": 310,
        "y": 200,
        "wires": [
            [
                "88c9d382af974358",
                "564c65fb7e534107",
                "98b8b9c0174dc6b0"
            ]
        ]
    },
    {
        "id": "305a7fead9d0cfcb",
        "type": "change",
        "z": "d0a1d8f666dafcc0",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "type",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "f6dd79192e142da8",
        "type": "change",
        "z": "c930ca19d66e430d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/rooms/'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 150,
        "y": 40,
        "wires": [
            [
                "c5daa27f12b90801"
            ]
        ]
    },
    {
        "id": "c5daa27f12b90801",
        "type": "http request",
        "z": "c930ca19d66e430d",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 310,
        "y": 40,
        "wires": [
            [
                "75a9ea27882a0d6d"
            ]
        ]
    },
    {
        "id": "75a9ea27882a0d6d",
        "type": "change",
        "z": "c930ca19d66e430d",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.roomData",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 40,
        "wires": [
            [
                "c32ed953ad953c08"
            ]
        ]
    },
    {
        "id": "c32ed953ad953c08",
        "type": "split",
        "z": "c930ca19d66e430d",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 110,
        "y": 120,
        "wires": [
            [
                "5a4fa813fbb18022"
            ]
        ]
    },
    {
        "id": "5a4fa813fbb18022",
        "type": "base64",
        "z": "c930ca19d66e430d",
        "name": "",
        "action": "b64",
        "property": "payload.name",
        "x": 240,
        "y": 120,
        "wires": [
            [
                "b716edcd37c1e93b"
            ]
        ]
    },
    {
        "id": "b716edcd37c1e93b",
        "type": "template",
        "z": "c930ca19d66e430d",
        "name": "",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "{\"id\":{{payload.id}},\"name\":\"{{payload.name}}\"}",
        "output": "json",
        "x": 380,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "68115d50b5cdb27d",
        "type": "status",
        "z": "c930ca19d66e430d",
        "name": "",
        "scope": [
            "c5daa27f12b90801"
        ],
        "x": 380,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "a1e93b0a11ef71a5",
        "type": "catch",
        "z": "c930ca19d66e430d",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 380,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "643e95dd6df2d982",
        "type": "change",
        "z": "1a6413355bbb49cc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "rooms",
                "pt": "flow",
                "to": "payload",
                "tot": "msg",
                "dc": true
            },
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/scenes/'",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 40,
        "wires": [
            [
                "f9e32f55c8917d91"
            ]
        ]
    },
    {
        "id": "f9e32f55c8917d91",
        "type": "http request",
        "z": "1a6413355bbb49cc",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 330,
        "y": 40,
        "wires": [
            [
                "b47b1889ebf029bd"
            ]
        ]
    },
    {
        "id": "b47b1889ebf029bd",
        "type": "change",
        "z": "1a6413355bbb49cc",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.sceneData",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 40,
        "wires": [
            [
                "86ceba4b5ba11d2e"
            ]
        ]
    },
    {
        "id": "86ceba4b5ba11d2e",
        "type": "split",
        "z": "1a6413355bbb49cc",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 110,
        "y": 120,
        "wires": [
            [
                "18956352f21a6233"
            ]
        ]
    },
    {
        "id": "18956352f21a6233",
        "type": "base64",
        "z": "1a6413355bbb49cc",
        "name": "",
        "action": "b64",
        "property": "payload.name",
        "x": 240,
        "y": 120,
        "wires": [
            [
                "233e95db4a2e39b3"
            ]
        ]
    },
    {
        "id": "013c4b7388921d23",
        "type": "status",
        "z": "1a6413355bbb49cc",
        "name": "",
        "scope": [
            "f9e32f55c8917d91"
        ],
        "x": 400,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "1ea0cbef01c0daaa",
        "type": "catch",
        "z": "1a6413355bbb49cc",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 400,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "233e95db4a2e39b3",
        "type": "function",
        "z": "1a6413355bbb49cc",
        "name": "formatOption",
        "func": "let rooms = flow.get('rooms')\n\nlet findRoom = id => {\n    \n    for (let index = 0; index < rooms.length; ++index) {\n        \n        let room = rooms[index]\n        \n        if (room.id == id) {\n            \n            return room\n            \n        }\n    }\n    \n    throw 'no room found with id ' + id\n    \n}\n\nlet room = findRoom(msg.payload.roomId)\n\nmsg.topic = room.name\nlet option = {}\noption[msg.payload.name] = msg.payload.id\nmsg.payload = option\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "cd442f62fd059172",
        "type": "change",
        "z": "9c4e4702e4660adf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "url",
                "pt": "msg",
                "to": "'http://' & $env('ADDRESS') & '/api/scenes?sceneId=' & payload",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 40,
        "wires": [
            [
                "8dc3bcf508fc6c98"
            ]
        ]
    },
    {
        "id": "8dc3bcf508fc6c98",
        "type": "http request",
        "z": "9c4e4702e4660adf",
        "name": "",
        "method": "GET",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 470,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "728ab503eb1eb941",
        "type": "status",
        "z": "9c4e4702e4660adf",
        "name": "",
        "scope": [
            "8dc3bcf508fc6c98"
        ],
        "x": 480,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "9391004cf711e2ea",
        "type": "catch",
        "z": "9c4e4702e4660adf",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 480,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "dcd553804e687131",
        "type": "delay",
        "z": "9c4e4702e4660adf",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 150,
        "y": 40,
        "wires": [
            [
                "cd442f62fd059172"
            ]
        ]
    },
    {
        "id": "82422755412f473d",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext($env('GLOBAL')).room",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 160,
        "y": 40,
        "wires": [
            [
                "82f5745796e93e00"
            ]
        ]
    },
    {
        "id": "03b09291b4b78bea",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$globalContext($env('GLOBAL')).zone",
                "tot": "jsonata",
                "dc": true
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 120,
        "wires": [
            [
                "c0483ea0bf84b4c8"
            ]
        ]
    },
    {
        "id": "82f5745796e93e00",
        "type": "subflow:d0a1d8f666dafcc0",
        "z": "764913cd47ccb672",
        "name": "Extract Room Metadata",
        "env": [
            {
                "name": "GLOBAL",
                "value": "GLOBAL",
                "type": "env"
            }
        ],
        "x": 370,
        "y": 40,
        "wires": [
            [
                "cd0f0860d8795bcf",
                "570f6d531cb787a4"
            ]
        ]
    },
    {
        "id": "cd0f0860d8795bcf",
        "type": "join",
        "z": "764913cd47ccb672",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 650,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "c0483ea0bf84b4c8",
        "type": "subflow:d0a1d8f666dafcc0",
        "z": "764913cd47ccb672",
        "name": "Extract Zone Metadata",
        "env": [
            {
                "name": "GLOBAL",
                "value": "GLOBAL",
                "type": "env"
            }
        ],
        "x": 460,
        "y": 120,
        "wires": [
            [
                "cd0f0860d8795bcf"
            ]
        ]
    },
    {
        "id": "570f6d531cb787a4",
        "type": "switch",
        "z": "764913cd47ccb672",
        "name": "",
        "property": "${GLOBAL}",
        "propertyType": "global",
        "rules": [
            {
                "t": "hask",
                "v": "zone",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 110,
        "y": 140,
        "wires": [
            [
                "03b09291b4b78bea"
            ],
            [
                "b36d0601f4e482d5"
            ]
        ]
    },
    {
        "id": "b36d0601f4e482d5",
        "type": "change",
        "z": "764913cd47ccb672",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"room\":payload}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "701c769269c83bb0",
        "type": "status",
        "z": "764913cd47ccb672",
        "name": "",
        "scope": [
            "82f5745796e93e00",
            "c0483ea0bf84b4c8"
        ],
        "x": 700,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "775af628329ee46c",
        "type": "change",
        "z": "726649588d2df715",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "$formatInteger($floor(next / 60), '00') & ':' & $formatInteger(next % 60, '00')",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/time",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "e4a210c169af8454",
        "type": "moment",
        "z": "726649588d2df715",
        "name": "sunrise",
        "topic": "",
        "input": "start",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "sunrise",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 300,
        "y": 60,
        "wires": [
            [
                "6f43cabea1d8122f"
            ]
        ]
    },
    {
        "id": "6f43cabea1d8122f",
        "type": "moment",
        "z": "726649588d2df715",
        "name": "sunset",
        "topic": "",
        "input": "end",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "sunset",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 430,
        "y": 60,
        "wires": [
            [
                "17854c7df7aab4bf"
            ]
        ]
    },
    {
        "id": "1feb74f9604ff761",
        "type": "change",
        "z": "726649588d2df715",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bedtime",
                "pt": "msg",
                "to": "bedtime.value",
                "tot": "global"
            },
            {
                "t": "set",
                "p": "minutes",
                "pt": "msg",
                "to": "(\t   $parts := $map($split(minutes, ':'), $number);\t   $parts[0] * 60 + $parts[1];\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "sunrise",
                "pt": "msg",
                "to": "(\t   $parts := $map($split(sunrise, ':'), $number);\t   $parts[0] * 60 + $parts[1];\t)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "sunset",
                "pt": "msg",
                "to": "(\t   $parts := $map($split(sunset, ':'), $number);\t   $parts[0] * 60 + $parts[1];\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 140,
        "wires": [
            [
                "9ce07408cf64a96c"
            ]
        ]
    },
    {
        "id": "5c8927246e2f5894",
        "type": "rbe",
        "z": "726649588d2df715",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 730,
        "y": 280,
        "wires": [
            [
                "775af628329ee46c"
            ]
        ]
    },
    {
        "id": "3fbeb013d4883c13",
        "type": "change",
        "z": "726649588d2df715",
        "name": "night",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "night",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunrise",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 360,
        "wires": [
            [
                "5c8927246e2f5894"
            ]
        ]
    },
    {
        "id": "ca53406bbd12573d",
        "type": "change",
        "z": "726649588d2df715",
        "name": "evening",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "evening",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "bedtime.value",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 320,
        "wires": [
            [
                "5c8927246e2f5894"
            ]
        ]
    },
    {
        "id": "dbfd15bc7651777c",
        "type": "change",
        "z": "726649588d2df715",
        "name": "afternoon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "afternoon",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunset",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 280,
        "wires": [
            [
                "5c8927246e2f5894"
            ]
        ]
    },
    {
        "id": "c2b01cf48e122156",
        "type": "change",
        "z": "726649588d2df715",
        "name": "midday",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "midday",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunset - 300",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 240,
        "wires": [
            [
                "5c8927246e2f5894"
            ]
        ]
    },
    {
        "id": "a452f89148e0ce93",
        "type": "change",
        "z": "726649588d2df715",
        "name": "morning",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "morning",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "next",
                "pt": "msg",
                "to": "sunrise + 300",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 200,
        "wires": [
            [
                "5c8927246e2f5894"
            ]
        ]
    },
    {
        "id": "c3f326fb39a2914f",
        "type": "switch",
        "z": "726649588d2df715",
        "name": "",
        "property": "minutes",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "sunrise",
                "vt": "msg",
                "v2": "sunrise + 300",
                "v2t": "jsonata"
            },
            {
                "t": "btwn",
                "v": "sunrise + 300",
                "vt": "jsonata",
                "v2": "sunset - 300",
                "v2t": "jsonata"
            },
            {
                "t": "btwn",
                "v": "sunset - 300",
                "vt": "jsonata",
                "v2": "sunset",
                "v2t": "msg"
            },
            {
                "t": "btwn",
                "v": "sunset",
                "vt": "msg",
                "v2": "bedtime",
                "v2t": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 310,
        "y": 280,
        "wires": [
            [
                "a452f89148e0ce93"
            ],
            [
                "c2b01cf48e122156"
            ],
            [
                "dbfd15bc7651777c"
            ],
            [
                "ca53406bbd12573d"
            ],
            [
                "3fbeb013d4883c13"
            ]
        ],
        "inputLabels": [
            "suncalc"
        ]
    },
    {
        "id": "a1d1e45137e94cbc",
        "type": "moment",
        "z": "726649588d2df715",
        "name": "minutes",
        "topic": "",
        "input": "now",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "minutes",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 160,
        "y": 60,
        "wires": [
            [
                "e4a210c169af8454"
            ]
        ]
    },
    {
        "id": "8a4abdf235b35e26",
        "type": "change",
        "z": "726649588d2df715",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "51549b36f6839c28",
        "type": "catch",
        "z": "726649588d2df715",
        "name": "",
        "scope": [
            "1feb74f9604ff761"
        ],
        "uncaught": false,
        "x": 330,
        "y": 540,
        "wires": [
            [
                "2d2ba9af968fc7b4"
            ]
        ]
    },
    {
        "id": "2d2ba9af968fc7b4",
        "type": "semaphore-leave",
        "z": "726649588d2df715",
        "config": "8adeed565b07fe45",
        "name": "leave bedtime",
        "x": 480,
        "y": 540,
        "wires": [
            [
                "8a4abdf235b35e26"
            ]
        ]
    },
    {
        "id": "9ce07408cf64a96c",
        "type": "semaphore-leave",
        "z": "726649588d2df715",
        "config": "8adeed565b07fe45",
        "name": "leave bedtime",
        "x": 160,
        "y": 280,
        "wires": [
            [
                "c3f326fb39a2914f"
            ]
        ]
    },
    {
        "id": "17854c7df7aab4bf",
        "type": "semaphore-take",
        "z": "726649588d2df715",
        "config": "8adeed565b07fe45",
        "name": "take bedtime",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "1feb74f9604ff761"
            ]
        ]
    },
    {
        "id": "8f558b513187e180",
        "type": "switch",
        "z": "dd922212d29c22cf",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload[0] = 7 and payload[1] <= 4",
                "vt": "jsonata"
            },
            {
                "t": "jsonata_exp",
                "v": "payload[0] = 10",
                "vt": "jsonata"
            },
            {
                "t": "jsonata_exp",
                "v": "payload[0] = 12",
                "vt": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 130,
        "y": 240,
        "wires": [
            [
                "df7c986edbdc25f9"
            ],
            [
                "572433092e427d92"
            ],
            [
                "b55f029a1a37cb57"
            ],
            [
                "505d716a59c0b8d2"
            ]
        ],
        "inputLabels": [
            "month day"
        ],
        "outputLabels": [
            "tribal",
            "spooky",
            "jolly",
            "standard"
        ]
    },
    {
        "id": "df7c986edbdc25f9",
        "type": "change",
        "z": "dd922212d29c22cf",
        "name": "tribal",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "tribal",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 180,
        "wires": [
            [
                "fe5ea81e599054e8"
            ]
        ]
    },
    {
        "id": "572433092e427d92",
        "type": "change",
        "z": "dd922212d29c22cf",
        "name": "spooky",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "spooky",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 220,
        "wires": [
            [
                "fe5ea81e599054e8"
            ]
        ]
    },
    {
        "id": "b55f029a1a37cb57",
        "type": "change",
        "z": "dd922212d29c22cf",
        "name": "jolly",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "jolly",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 260,
        "wires": [
            [
                "fe5ea81e599054e8"
            ]
        ]
    },
    {
        "id": "fe5ea81e599054e8",
        "type": "rbe",
        "z": "dd922212d29c22cf",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 470,
        "y": 240,
        "wires": [
            [
                "70719fd47b7d8309"
            ]
        ]
    },
    {
        "id": "70719fd47b7d8309",
        "type": "change",
        "z": "dd922212d29c22cf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "nodered/automation/theme",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "a58e4240490b6708",
        "type": "change",
        "z": "dd922212d29c22cf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$map($split($trim(payload), ' '), $number)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 300,
        "y": 60,
        "wires": [
            [
                "8f558b513187e180"
            ]
        ]
    },
    {
        "id": "574b361c81d6154c",
        "type": "moment",
        "z": "dd922212d29c22cf",
        "name": "",
        "topic": "date",
        "input": "now",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "M D",
        "locale": "en-US",
        "output": "payload",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "a58e4240490b6708"
            ]
        ]
    },
    {
        "id": "505d716a59c0b8d2",
        "type": "change",
        "z": "dd922212d29c22cf",
        "name": "standard",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "standard",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 300,
        "wires": [
            [
                "fe5ea81e599054e8"
            ]
        ]
    },
    {
        "id": "bc9643fcb15a2542",
        "type": "change",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.nodered/automation/time",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 140,
        "wires": [
            [
                "e6020d90de95f8b2"
            ]
        ]
    },
    {
        "id": "4fad32ede021852a",
        "type": "join",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 370,
        "y": 180,
        "wires": [
            [
                "bc9643fcb15a2542",
                "0e51b7c6a82dff66"
            ]
        ]
    },
    {
        "id": "532b9b7b5f117137",
        "type": "mqtt in",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "topic": "nodered/automation/time",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 220,
        "wires": [
            [
                "4fad32ede021852a"
            ]
        ]
    },
    {
        "id": "65338ef15d9ca237",
        "type": "semaphore-take",
        "z": "c32d8a09391c0c3c",
        "config": "42cf9f6ae4b51f49",
        "name": "take theme",
        "x": 350,
        "y": 40,
        "wires": [
            [
                "1149f01bfef43bc7"
            ]
        ]
    },
    {
        "id": "4ce2836aefb78546",
        "type": "semaphore-leave",
        "z": "c32d8a09391c0c3c",
        "config": "42cf9f6ae4b51f49",
        "name": "leave theme",
        "x": 210,
        "y": 140,
        "wires": [
            [
                "4fad32ede021852a"
            ]
        ]
    },
    {
        "id": "1149f01bfef43bc7",
        "type": "change",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "theme",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 40,
        "wires": [
            [
                "4ce2836aefb78546"
            ]
        ]
    },
    {
        "id": "9c59ba31035e94bb",
        "type": "mqtt in",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "topic": "nodered/automation/theme",
        "qos": "2",
        "datatype": "utf8",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 140,
        "y": 40,
        "wires": [
            [
                "65338ef15d9ca237"
            ]
        ]
    },
    {
        "id": "e6020d90de95f8b2",
        "type": "rbe",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 710,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "757779f1250772a9",
        "type": "catch",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "scope": [],
        "uncaught": false,
        "x": 210,
        "y": 340,
        "wires": [
            [
                "fd71908c8986c904"
            ]
        ]
    },
    {
        "id": "fd71908c8986c904",
        "type": "semaphore-leave",
        "z": "c32d8a09391c0c3c",
        "config": "42cf9f6ae4b51f49",
        "name": "leave theme",
        "x": 350,
        "y": 340,
        "wires": [
            [
                "4b26463cd0d8bc44"
            ]
        ]
    },
    {
        "id": "4b26463cd0d8bc44",
        "type": "change",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "0e51b7c6a82dff66",
        "type": "change",
        "z": "c32d8a09391c0c3c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "$lookup(payload,'nodered/automation/theme') & ' | ' & $lookup(payload, 'nodered/automation/time')",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "eaf6d39ea4e3cda7",
        "type": "semaphore-take",
        "z": "ca7f1257fb7eb85f",
        "config": "2e4541b20001f580",
        "name": "take enable",
        "x": 150,
        "y": 40,
        "wires": [
            [
                "0a23b15cdf887cf7"
            ]
        ]
    },
    {
        "id": "0a23b15cdf887cf7",
        "type": "change",
        "z": "ca7f1257fb7eb85f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enable",
                "pt": "msg",
                "to": "enableAutomation",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 40,
        "wires": [
            [
                "cbd94eae9cfa1a41"
            ]
        ]
    },
    {
        "id": "cbd94eae9cfa1a41",
        "type": "semaphore-leave",
        "z": "ca7f1257fb7eb85f",
        "config": "2e4541b20001f580",
        "name": "leave enable",
        "x": 210,
        "y": 160,
        "wires": [
            [
                "4d0e88a63b7175a8",
                "554b77aac75a45b1"
            ]
        ]
    },
    {
        "id": "4d0e88a63b7175a8",
        "type": "switch",
        "z": "ca7f1257fb7eb85f",
        "name": "",
        "property": "enable",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 120,
        "wires": [
            [
                "3626b73dafe1ce84"
            ]
        ]
    },
    {
        "id": "3626b73dafe1ce84",
        "type": "rbe",
        "z": "ca7f1257fb7eb85f",
        "name": "",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 490,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "554b77aac75a45b1",
        "type": "change",
        "z": "ca7f1257fb7eb85f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload & ' | ' & enable",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "d1c698a747024041",
        "type": "catch",
        "z": "ca7f1257fb7eb85f",
        "name": "",
        "scope": [
            "0a23b15cdf887cf7"
        ],
        "uncaught": false,
        "x": 70,
        "y": 320,
        "wires": [
            [
                "97032e5163c94809"
            ]
        ]
    },
    {
        "id": "97032e5163c94809",
        "type": "semaphore-leave",
        "z": "ca7f1257fb7eb85f",
        "config": "2e4541b20001f580",
        "name": "leave enable",
        "x": 210,
        "y": 320,
        "wires": [
            [
                "f06385e67c533aae"
            ]
        ]
    },
    {
        "id": "f06385e67c533aae",
        "type": "change",
        "z": "ca7f1257fb7eb85f",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "327b8c6e03e4763f",
        "type": "semaphore-take",
        "z": "92cadf0a47e0253a",
        "config": "8adeed565b07fe45",
        "name": "take bedtime",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "c67cce4d72b508f2"
            ]
        ]
    },
    {
        "id": "c67cce4d72b508f2",
        "type": "change",
        "z": "92cadf0a47e0253a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "bedtime",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 80,
        "wires": [
            [
                "015a293c96d16612"
            ]
        ]
    },
    {
        "id": "015a293c96d16612",
        "type": "semaphore-leave",
        "z": "92cadf0a47e0253a",
        "config": "8adeed565b07fe45",
        "name": "leave bedtime",
        "x": 520,
        "y": 80,
        "wires": [
            [
                "1de7044c47282d94"
            ]
        ]
    },
    {
        "id": "1de7044c47282d94",
        "type": "change",
        "z": "92cadf0a47e0253a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t$hour := $floor(payload.value / 60);\t$minute := payload.value % 60;\t$formatInteger($hour, '00') & ':' & $formatInteger($minute, '00')\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "612b6473028fa121",
        "type": "catch",
        "z": "92cadf0a47e0253a",
        "name": "",
        "scope": [
            "c67cce4d72b508f2"
        ],
        "uncaught": false,
        "x": 350,
        "y": 200,
        "wires": [
            [
                "3c13c912c5346552"
            ]
        ]
    },
    {
        "id": "3c13c912c5346552",
        "type": "semaphore-leave",
        "z": "92cadf0a47e0253a",
        "config": "8adeed565b07fe45",
        "name": "leave bedtime",
        "x": 500,
        "y": 200,
        "wires": [
            [
                "a7e5e5a9b5591067"
            ]
        ]
    },
    {
        "id": "a7e5e5a9b5591067",
        "type": "change",
        "z": "92cadf0a47e0253a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "489473811921e26b",
        "type": "semaphore-take",
        "z": "343ba5a6d075c19c",
        "config": "8adeed565b07fe45",
        "name": "take bedtime",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "637aacd3ef3f2054"
            ]
        ]
    },
    {
        "id": "637aacd3ef3f2054",
        "type": "change",
        "z": "343ba5a6d075c19c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "bedtime.minutes",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 80,
        "wires": [
            [
                "a58b94f7d37ad9dc"
            ]
        ]
    },
    {
        "id": "a58b94f7d37ad9dc",
        "type": "semaphore-leave",
        "z": "343ba5a6d075c19c",
        "config": "8adeed565b07fe45",
        "name": "leave bedtime",
        "x": 500,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "12453bc3558dbf23",
        "type": "catch",
        "z": "343ba5a6d075c19c",
        "name": "",
        "scope": [
            "637aacd3ef3f2054"
        ],
        "uncaught": false,
        "x": 150,
        "y": 200,
        "wires": [
            [
                "4c8f41753bbeb552"
            ]
        ]
    },
    {
        "id": "4c8f41753bbeb552",
        "type": "semaphore-leave",
        "z": "343ba5a6d075c19c",
        "config": "8adeed565b07fe45",
        "name": "leave bedtime",
        "x": 300,
        "y": 200,
        "wires": [
            [
                "fbc57db19bf87304"
            ]
        ]
    },
    {
        "id": "fbc57db19bf87304",
        "type": "change",
        "z": "343ba5a6d075c19c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "490cc0ba5f699f8a",
        "type": "switch",
        "z": "38bb2b1449bd9b96",
        "name": "theme",
        "property": "theme",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "tribal",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "spooky",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "jolly",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 670,
        "y": 160,
        "wires": [
            [],
            [],
            [],
            []
        ]
    },
    {
        "id": "9bcc61425fa0f7a0",
        "type": "semaphore-take",
        "z": "38bb2b1449bd9b96",
        "config": "42cf9f6ae4b51f49",
        "name": "take theme",
        "x": 150,
        "y": 280,
        "wires": [
            [
                "2cdfb3f10ab73e60"
            ]
        ]
    },
    {
        "id": "2cdfb3f10ab73e60",
        "type": "change",
        "z": "38bb2b1449bd9b96",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "theme",
                "pt": "msg",
                "to": "theme",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 280,
        "wires": [
            [
                "1584448d523e5745"
            ]
        ]
    },
    {
        "id": "1584448d523e5745",
        "type": "semaphore-leave",
        "z": "38bb2b1449bd9b96",
        "config": "42cf9f6ae4b51f49",
        "name": "leave theme",
        "x": 490,
        "y": 280,
        "wires": [
            [
                "490cc0ba5f699f8a"
            ]
        ]
    },
    {
        "id": "b2358d47303c40c3",
        "type": "catch",
        "z": "38bb2b1449bd9b96",
        "name": "",
        "scope": [
            "2cdfb3f10ab73e60"
        ],
        "uncaught": false,
        "x": 310,
        "y": 440,
        "wires": [
            [
                "2e4a539865cff7ae"
            ]
        ]
    },
    {
        "id": "2e4a539865cff7ae",
        "type": "semaphore-leave",
        "z": "38bb2b1449bd9b96",
        "config": "42cf9f6ae4b51f49",
        "name": "leave theme",
        "x": 450,
        "y": 440,
        "wires": [
            [
                "2d51832744aee4af"
            ]
        ]
    },
    {
        "id": "2d51832744aee4af",
        "type": "change",
        "z": "38bb2b1449bd9b96",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "error.message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "e797467935e3715b",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 170,
        "y": 140,
        "wires": [
            [
                "8d87f0a974962f5d"
            ]
        ]
    },
    {
        "id": "162e297daa627b34",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "morning",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "3405",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 60,
        "wires": [
            [
                "ca4cb57dd2404456"
            ]
        ]
    },
    {
        "id": "1b7497699a302769",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "midday",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "47566",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 100,
        "wires": [
            [
                "ca4cb57dd2404456"
            ]
        ]
    },
    {
        "id": "3d81914aa2112914",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "afternoon",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "44035",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 140,
        "wires": [
            [
                "ca4cb57dd2404456"
            ]
        ]
    },
    {
        "id": "b1a74d925cb7f287",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "evening",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "32086",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 490,
        "y": 180,
        "wires": [
            [
                "ca4cb57dd2404456"
            ]
        ]
    },
    {
        "id": "5a7531f79deb707f",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "night",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "31086",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 220,
        "wires": [
            [
                "ca4cb57dd2404456"
            ]
        ]
    },
    {
        "id": "8d87f0a974962f5d",
        "type": "switch",
        "z": "88644a5a56fdab5e",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "midday",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "afternoon",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "evening",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "night",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 320,
        "y": 140,
        "wires": [
            [
                "162e297daa627b34"
            ],
            [
                "1b7497699a302769"
            ],
            [
                "3d81914aa2112914"
            ],
            [
                "b1a74d925cb7f287"
            ],
            [
                "5a7531f79deb707f"
            ]
        ],
        "inputLabels": [
            "suncalc"
        ],
        "outputLabels": [
            "morning",
            "midday",
            "afternoon",
            "evening",
            "night"
        ]
    },
    {
        "id": "ca4cb57dd2404456",
        "type": "fan",
        "z": "88644a5a56fdab5e",
        "name": "",
        "x": 710,
        "y": 140,
        "wires": [
            [
                "580c156e36e3c889"
            ]
        ]
    },
    {
        "id": "580c156e36e3c889",
        "type": "change",
        "z": "88644a5a56fdab5e",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "topic & ' | ' & payload",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "c144399d0f7b43c7",
        "type": "change",
        "z": "e467d9c73202b5bf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "now",
                "pt": "msg",
                "to": "",
                "tot": "date"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 100,
        "wires": [
            [
                "584435dc9a838f9d"
            ]
        ]
    },
    {
        "id": "584435dc9a838f9d",
        "type": "moment",
        "z": "e467d9c73202b5bf",
        "name": "H:mm",
        "topic": "",
        "input": "now",
        "inputType": "msg",
        "inTz": "ETC/utc",
        "adjAmount": 0,
        "adjType": "days",
        "adjDir": "add",
        "format": "H:mm",
        "locale": "en-US",
        "output": "now",
        "outputType": "msg",
        "outTz": "America/Chicago",
        "x": 430,
        "y": 100,
        "wires": [
            [
                "07be31b13645f4d3"
            ]
        ]
    },
    {
        "id": "07be31b13645f4d3",
        "type": "change",
        "z": "e467d9c73202b5bf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "now",
                "pt": "msg",
                "to": "(\t$now := $map($split(now,':'), $number);\t$now[0] * 60 + $now[1]\t)",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 100,
        "wires": [
            [
                "efa9b74bc824457f",
                "444501da35d4a5b2"
            ]
        ]
    },
    {
        "id": "efa9b74bc824457f",
        "type": "switch",
        "z": "e467d9c73202b5bf",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload.bedtime - now > 60",
                "vt": "jsonata"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 60,
        "wires": [
            [
                "74140919f0bc2a8a"
            ]
        ]
    },
    {
        "id": "74140919f0bc2a8a",
        "type": "change",
        "z": "e467d9c73202b5bf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.trigger",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "444501da35d4a5b2",
        "type": "change",
        "z": "e467d9c73202b5bf",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.bedtime - now & ' | ' & payload.trigger",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "bd9e10e67860b954",
        "type": "join",
        "z": "e467d9c73202b5bf",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": true,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "c144399d0f7b43c7"
            ]
        ]
    },
    {
        "id": "ee2c58a644a8f266",
        "type": "change",
        "z": "be3fb84e6a4c7720",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "GET",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "qos",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "retain",
                "pt": "msg",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 180,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "82805395425b2e61",
        "type": "mqtt in",
        "z": "be3fb84e6a4c7720",
        "name": "",
        "topic": "${SET}",
        "qos": "2",
        "datatype": "auto",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 90,
        "y": 180,
        "wires": [
            [
                "af8694bdb5aec294"
            ]
        ]
    },
    {
        "id": "af8694bdb5aec294",
        "type": "json",
        "z": "be3fb84e6a4c7720",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 210,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ee54ef10ed3eaafc",
        "type": "catch",
        "z": "be3fb84e6a4c7720",
        "name": "",
        "scope": null,
        "uncaught": true,
        "x": 120,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "30286901101a6095",
        "type": "link in",
        "z": "98d51762f6f2dad5",
        "g": "4b0e89ddb66673e4",
        "name": "send mqtt",
        "links": [
            "c0d1759df573b02a",
            "9402de8cb82a7cb9",
            "4adc5542e5edbdb8",
            "965aef35a29adb4d",
            "e4866ec4b53aef10",
            "f5efecdff7b47cad",
            "7931ca5cf51400c8",
            "1c95ddcf58382f2f",
            "5d3a1288aafe978e",
            "5820d0ee968e1f47",
            "0280fb73c6510d6c",
            "bc371e391d7584a9",
            "48112bfc329a4440",
            "abf2dde9b0fd41f7",
            "b5c6f6381e98b274",
            "041309e5ee07af3e",
            "ffa002c8041b26c0",
            "af7e30f7cdeee1d9",
            "477668ef1f02bcfd",
            "511dc87372e29413",
            "0bdb0a47cc4399b4",
            "15164c46a7616484",
            "bb63b6666fb34d48",
            "f4c43d9a8fef9e50",
            "178d4f2dbc5ba382",
            "46cb802132d9dbd6",
            "154da22b0bda9528",
            "67e26c99e554e229",
            "a58e2d5bbdd0f94b",
            "fb98cf2f7c37f861",
            "d782e2dc7ed5876c",
            "6e689aadd1f722a9",
            "673aef6e72d03b7b",
            "81b0e480955e02c8",
            "75b7b97213341620"
        ],
        "x": 175,
        "y": 100,
        "wires": [
            [
                "18038cbbe3f73104"
            ]
        ]
    },
    {
        "id": "259af303254337ad",
        "type": "mqtt out",
        "z": "98d51762f6f2dad5",
        "g": "4b0e89ddb66673e4",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "722d62f3b93039c3",
        "x": 420,
        "y": 100,
        "wires": []
    },
    {
        "id": "18038cbbe3f73104",
        "type": "delay",
        "z": "98d51762f6f2dad5",
        "g": "4b0e89ddb66673e4",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "3",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 280,
        "y": 100,
        "wires": [
            [
                "259af303254337ad"
            ]
        ]
    },
    {
        "id": "dc8cb6097cfe4097",
        "type": "mqtt in",
        "z": "98d51762f6f2dad5",
        "g": "9568bdc73703ef81",
        "name": "",
        "topic": "homebridge/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 230,
        "y": 200,
        "wires": [
            [
                "10827bec6097b5f7"
            ]
        ]
    },
    {
        "id": "10827bec6097b5f7",
        "type": "json",
        "z": "98d51762f6f2dad5",
        "g": "9568bdc73703ef81",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 370,
        "y": 200,
        "wires": [
            [
                "615814ef789eb7fc"
            ]
        ]
    },
    {
        "id": "5eb12c0188e7ed86",
        "type": "catch",
        "z": "98d51762f6f2dad5",
        "g": "9568bdc73703ef81",
        "name": "",
        "scope": [
            "10827bec6097b5f7"
        ],
        "uncaught": false,
        "x": 370,
        "y": 240,
        "wires": [
            [
                "615814ef789eb7fc"
            ]
        ]
    },
    {
        "id": "615814ef789eb7fc",
        "type": "debug",
        "z": "98d51762f6f2dad5",
        "g": "9568bdc73703ef81",
        "name": "homebridge",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "topic",
        "statusType": "msg",
        "x": 510,
        "y": 220,
        "wires": []
    },
    {
        "id": "0e03f7b1c487930f",
        "type": "sunrise",
        "z": "a767582f3959afc9",
        "g": "9f344af23b60f386",
        "name": "",
        "lat": "43.018400",
        "lon": "-89.289000",
        "start": "sunrise",
        "end": "sunsetStart",
        "soff": "0",
        "eoff": "0",
        "x": 130,
        "y": 180,
        "wires": [
            [
                "4cecaa56f15ef51c",
                "cd8c2f0951248f55"
            ],
            []
        ]
    },
    {
        "id": "ffa002c8041b26c0",
        "type": "link out",
        "z": "a767582f3959afc9",
        "g": "2b6a7b4485e6a4ea",
        "name": "",
        "mode": "link",
        "links": [
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 435,
        "y": 80,
        "wires": []
    },
    {
        "id": "7c2338efb1da51bb",
        "type": "ui_text",
        "z": "a767582f3959afc9",
        "g": "2b6a7b4485e6a4ea",
        "group": "25c7f0078ed443dd",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Theme",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 480,
        "y": 120,
        "wires": []
    },
    {
        "id": "af7e30f7cdeee1d9",
        "type": "link out",
        "z": "a767582f3959afc9",
        "g": "3eef89f5b02c9489",
        "name": "",
        "mode": "link",
        "links": [
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 515,
        "y": 220,
        "wires": []
    },
    {
        "id": "334c712c4536ed30",
        "type": "ui_text",
        "z": "a767582f3959afc9",
        "g": "3eef89f5b02c9489",
        "group": "25c7f0078ed443dd",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Time",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 260,
        "wires": []
    },
    {
        "id": "5cd93cf4487a1623",
        "type": "ui_text",
        "z": "a767582f3959afc9",
        "g": "3eef89f5b02c9489",
        "group": "25c7f0078ed443dd",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Next",
        "format": "{{msg.next}}",
        "layout": "row-spread",
        "className": "",
        "x": 540,
        "y": 300,
        "wires": []
    },
    {
        "id": "825f2ffa1e2be0dc",
        "type": "debug",
        "z": "a767582f3959afc9",
        "g": "3eef89f5b02c9489",
        "name": "get global.bedtime",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 580,
        "y": 340,
        "wires": []
    },
    {
        "id": "4cecaa56f15ef51c",
        "type": "subflow:726649588d2df715",
        "z": "a767582f3959afc9",
        "g": "3eef89f5b02c9489",
        "name": "",
        "x": 340,
        "y": 280,
        "wires": [
            [
                "af7e30f7cdeee1d9",
                "334c712c4536ed30",
                "5cd93cf4487a1623"
            ],
            [
                "825f2ffa1e2be0dc"
            ]
        ]
    },
    {
        "id": "cd8c2f0951248f55",
        "type": "subflow:dd922212d29c22cf",
        "z": "a767582f3959afc9",
        "g": "2b6a7b4485e6a4ea",
        "name": "",
        "x": 330,
        "y": 100,
        "wires": [
            [
                "ffa002c8041b26c0",
                "7c2338efb1da51bb"
            ]
        ]
    },
    {
        "id": "1f7aefd9b0586064",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "",
        "mode": "link",
        "links": [
            "1993fd8165053adf",
            "facb9598623e3675",
            "380c05275eae4338",
            "1f8dccfd42af4188",
            "23b7995dafc3f002",
            "0514602b711a8136"
        ],
        "x": 475,
        "y": 80,
        "wires": []
    },
    {
        "id": "bcacc67a0668b8ad",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "retain",
                "v": "false",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "00 02 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "night",
        "payloadType": "str",
        "x": 150,
        "y": 80,
        "wires": [
            [
                "219600424ec359a5"
            ]
        ]
    },
    {
        "id": "1980b7a63222124d",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "",
        "mode": "link",
        "links": [
            "e0ff654341b45f3b"
        ],
        "x": 245,
        "y": 180,
        "wires": []
    },
    {
        "id": "b499489bb8e8a9b9",
        "type": "subflow:c32d8a09391c0c3c",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "",
        "x": 130,
        "y": 180,
        "wires": [
            [
                "219600424ec359a5"
            ],
            [
                "1980b7a63222124d"
            ],
            [
                "73f1ea44d20509b6"
            ]
        ]
    },
    {
        "id": "73f1ea44d20509b6",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "timer event",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 310,
        "y": 220,
        "wires": []
    },
    {
        "id": "219600424ec359a5",
        "type": "subflow:ca7f1257fb7eb85f",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "",
        "x": 330,
        "y": 120,
        "wires": [
            [
                "1f7aefd9b0586064"
            ],
            [
                "611c11b1ba6aa270"
            ]
        ]
    },
    {
        "id": "611c11b1ba6aa270",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "7c175ce901294697",
        "name": "filtered event",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 530,
        "y": 160,
        "wires": []
    },
    {
        "id": "98f637cf7cc7d148",
        "type": "debug",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.messsage",
        "statusType": "msg",
        "x": 530,
        "y": 440,
        "wires": []
    },
    {
        "id": "ca33dbcb9d89e509",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 130,
        "y": 360,
        "wires": [
            [
                "d9ccacf1c1072873"
            ]
        ]
    },
    {
        "id": "1c76ee40a22aa969",
        "type": "inject",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 130,
        "y": 400,
        "wires": [
            [
                "d9ccacf1c1072873"
            ]
        ]
    },
    {
        "id": "d9ccacf1c1072873",
        "type": "subflow:be3fb84e6a4c7720",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "name": "enable-automation switch",
        "env": [
            {
                "name": "GET",
                "value": "homebridge/enable-automation/get/on",
                "type": "str"
            },
            {
                "name": "SET",
                "value": "homebridge/enable-automation/set/on",
                "type": "str"
            },
            {
                "name": "GLOBAL",
                "value": "enable-automation",
                "type": "str"
            }
        ],
        "x": 310,
        "y": 380,
        "wires": [
            [
                "d782e2dc7ed5876c"
            ],
            [
                "82f5435131125669"
            ],
            [
                "98f637cf7cc7d148"
            ]
        ]
    },
    {
        "id": "d782e2dc7ed5876c",
        "type": "link out",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "name": "",
        "mode": "link",
        "links": [
            "30286901101a6095"
        ],
        "x": 495,
        "y": 320,
        "wires": []
    },
    {
        "id": "82f5435131125669",
        "type": "semaphore-take",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "config": "2e4541b20001f580",
        "name": "take enable",
        "x": 550,
        "y": 380,
        "wires": [
            [
                "e2c95a57106e0678"
            ]
        ]
    },
    {
        "id": "e2c95a57106e0678",
        "type": "change",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "enableAutomation",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 380,
        "wires": [
            [
                "ed9e0aa24066f024"
            ]
        ]
    },
    {
        "id": "ed9e0aa24066f024",
        "type": "semaphore-leave",
        "z": "c7141ffb22d64190",
        "g": "d20094d180b611cb",
        "config": "2e4541b20001f580",
        "name": "leave enable",
        "x": 970,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "d31eac19e524875d",
        "type": "mqtt in",
        "z": "7689d3d4b864d0dd",
        "g": "541f223d7251abbe",
        "name": "",
        "topic": "nodered/automation/bedtime",
        "qos": "2",
        "datatype": "json",
        "broker": "722d62f3b93039c3",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 180,
        "y": 160,
        "wires": [
            [
                "53b63e2bae9ee295",
                "0d2076033917b70d",
                "3169b6e6e492bf2d"
            ]
        ]
    },
    {
        "id": "79709f226d61bff5",
        "type": "function",
        "z": "7689d3d4b864d0dd",
        "g": "0fe686a291277b71",
        "name": "bedtimeOptions",
        "func": "return",
        "outputs": 1,
        "noerr": 0,
        "initialize": "setTimeout(() => {\n\n    let pad = (n) => {\n\n        return ('00' + n).slice(-2)\n\n    }\n\n    let options = []\n\n    for (let minutes = 1260; minutes <= 1380; minutes += 30) {\n\n        let label = pad(Math.floor(minutes / 60)) + ':' + pad(minutes % 60)\n        let option = {}\n\n        option[label] = minutes\n        options.push(option)\n\n    }\n\n    node.send({\n        options: options\n    })\n\n}, 500)",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 420,
        "wires": [
            [
                "801bc206cfa0803d"
            ]
        ]
    },
    {
        "id": "7f53ee2f29d4da93",
        "type": "ui_dropdown",
        "z": "7689d3d4b864d0dd",
        "g": "0fe686a291277b71",
        "name": "",
        "label": "Bedtime",
        "tooltip": "",
        "place": "Select option",
        "group": "ad4d885f83f029a5",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": false,
        "multiple": false,
        "options": [],
        "payload": "",
        "topic": "nodered/bedtime",
        "topicType": "str",
        "className": "",
        "x": 700,
        "y": 420,
        "wires": [
            [
                "bc385f9e10d6a793"
            ]
        ]
    },
    {
        "id": "bc385f9e10d6a793",
        "type": "function",
        "z": "7689d3d4b864d0dd",
        "g": "afca2ae3ed3cb5fc",
        "name": "randomBedtime",
        "func": "let offset = 30 - Math.floor(Math.random() * 60)\nlet value = (msg.payload + offset) % 1440\n\nmsg.topic = 'nodered/automation/bedtime'\nmsg.qos = 2\nmsg.retain = true\n\nmsg.payload = {\n    minutes: msg.payload,\n    value: value\n}\n\nreturn msg",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 910,
        "y": 460,
        "wires": [
            [
                "477668ef1f02bcfd"
            ]
        ]
    },
    {
        "id": "477668ef1f02bcfd",
        "type": "link out",
        "z": "7689d3d4b864d0dd",
        "g": "afca2ae3ed3cb5fc",
        "name": "",
        "mode": "link",
        "links": [
            "49a3148e23e3ff94",
            "1dfaa2404fcc8cbc",
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 1025,
        "y": 460,
        "wires": []
    },
    {
        "id": "2111a7129946fc0e",
        "type": "ui_text",
        "z": "7689d3d4b864d0dd",
        "g": "875ab4538bb22f15",
        "group": "ad4d885f83f029a5",
        "order": 6,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Randomized",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "x": 670,
        "y": 80,
        "wires": []
    },
    {
        "id": "53b63e2bae9ee295",
        "type": "change",
        "z": "7689d3d4b864d0dd",
        "g": "0fe686a291277b71",
        "name": "minutes",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.minutes",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 360,
        "wires": [
            [
                "7f53ee2f29d4da93"
            ]
        ]
    },
    {
        "id": "801bc206cfa0803d",
        "type": "trigger",
        "z": "7689d3d4b864d0dd",
        "g": "0fe686a291277b71",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "date",
        "duration": "5",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 320,
        "y": 420,
        "wires": [
            [
                "7f53ee2f29d4da93"
            ],
            [
                "4a8fa45a5356afb7"
            ]
        ]
    },
    {
        "id": "e0ff654341b45f3b",
        "type": "link in",
        "z": "7689d3d4b864d0dd",
        "g": "98379557a8077dc0",
        "name": "bedtime",
        "links": [
            "1980b7a63222124d"
        ],
        "x": 385,
        "y": 560,
        "wires": [
            [
                "095af1f6e9620187"
            ]
        ]
    },
    {
        "id": "0d2076033917b70d",
        "type": "subflow:92cadf0a47e0253a",
        "z": "7689d3d4b864d0dd",
        "g": "875ab4538bb22f15",
        "name": "",
        "x": 470,
        "y": 120,
        "wires": [
            [
                "2111a7129946fc0e"
            ],
            [
                "e2f5213b9ccd0528"
            ]
        ]
    },
    {
        "id": "e2f5213b9ccd0528",
        "type": "debug",
        "z": "7689d3d4b864d0dd",
        "g": "875ab4538bb22f15",
        "name": "set global bedtime",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 690,
        "y": 160,
        "wires": []
    },
    {
        "id": "6c2fdbf2b5ebd351",
        "type": "subflow:343ba5a6d075c19c",
        "z": "7689d3d4b864d0dd",
        "g": "98379557a8077dc0",
        "name": "",
        "x": 660,
        "y": 560,
        "wires": [
            [
                "bc385f9e10d6a793"
            ],
            [
                "02a7ad03458a135e"
            ]
        ]
    },
    {
        "id": "02a7ad03458a135e",
        "type": "debug",
        "z": "7689d3d4b864d0dd",
        "g": "98379557a8077dc0",
        "name": "get global bedtime",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 870,
        "y": 580,
        "wires": []
    },
    {
        "id": "095af1f6e9620187",
        "type": "switch",
        "z": "7689d3d4b864d0dd",
        "g": "98379557a8077dc0",
        "name": "morning?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 560,
        "wires": [
            [
                "6c2fdbf2b5ebd351"
            ]
        ]
    },
    {
        "id": "4a8fa45a5356afb7",
        "type": "subflow:343ba5a6d075c19c",
        "z": "7689d3d4b864d0dd",
        "g": "0fe686a291277b71",
        "name": "",
        "x": 510,
        "y": 460,
        "wires": [
            [
                "7f53ee2f29d4da93"
            ],
            []
        ]
    },
    {
        "id": "cf7f0464e17fe251",
        "type": "link out",
        "z": "7689d3d4b864d0dd",
        "g": "af92fe447a5b5c32",
        "name": "",
        "mode": "link",
        "links": [
            "6a01fdc18127e8e9"
        ],
        "x": 575,
        "y": 260,
        "wires": []
    },
    {
        "id": "3169b6e6e492bf2d",
        "type": "change",
        "z": "7689d3d4b864d0dd",
        "g": "af92fe447a5b5c32",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "bedtime",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 260,
        "wires": [
            [
                "cf7f0464e17fe251"
            ]
        ]
    },
    {
        "id": "061d8c40c8ed16ab",
        "type": "switch",
        "z": "63d8cb10398da04b",
        "g": "e936dbad3fb3b587",
        "name": "msg.payload",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "morning",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "evening",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "night",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 270,
        "y": 320,
        "wires": [
            [
                "f12fbd86617caaf9"
            ],
            [
                "b9f7a65beebcddfe"
            ],
            [
                "c897f7f0ee8680dc"
            ]
        ]
    },
    {
        "id": "549a2335fb839c37",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "mode": "link",
        "links": [
            "fbd53f7f18ca6655"
        ],
        "x": 585,
        "y": 560,
        "wires": []
    },
    {
        "id": "ae9f9aeb54f6cfb1",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "mode": "link",
        "links": [
            "3ed1a4d37d1548b4"
        ],
        "x": 585,
        "y": 600,
        "wires": []
    },
    {
        "id": "8e8390b13cc5c45b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "mode": "link",
        "links": [
            "ec4c4a28a59d105e"
        ],
        "x": 585,
        "y": 640,
        "wires": []
    },
    {
        "id": "c897f7f0ee8680dc",
        "type": "fan",
        "z": "63d8cb10398da04b",
        "g": "2af1d2a51c281b62",
        "name": "",
        "x": 470,
        "y": 600,
        "wires": [
            [
                "ae9f9aeb54f6cfb1",
                "8e8390b13cc5c45b",
                "549a2335fb839c37"
            ]
        ]
    },
    {
        "id": "2837183323a61e04",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "6cae9b1ccc68cb9e"
        ],
        "x": 595,
        "y": 260,
        "wires": []
    },
    {
        "id": "7ab1620c3349854b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "04ad8639f667bd76"
        ],
        "x": 795,
        "y": 300,
        "wires": []
    },
    {
        "id": "c68369c3781694e3",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "cc9a7b174ce21d63"
        ],
        "x": 795,
        "y": 340,
        "wires": []
    },
    {
        "id": "b0ee0f2f8155fe9b",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "60976d31a8dafe99"
        ],
        "x": 795,
        "y": 380,
        "wires": []
    },
    {
        "id": "e270017761dfd27d",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "mode": "link",
        "links": [
            "18f53b7627e645e4"
        ],
        "x": 795,
        "y": 420,
        "wires": []
    },
    {
        "id": "981dbc2364b09d66",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "mode": "link",
        "links": [
            "e74fcadba6a2b4ca"
        ],
        "x": 585,
        "y": 80,
        "wires": []
    },
    {
        "id": "7d12aa9a36e86798",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "mode": "link",
        "links": [
            "07ccb0b07e6fada8"
        ],
        "x": 585,
        "y": 120,
        "wires": []
    },
    {
        "id": "6c3e6b4543f8c9ac",
        "type": "link out",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "mode": "link",
        "links": [
            "ec4c4a28a59d105e"
        ],
        "x": 585,
        "y": 160,
        "wires": []
    },
    {
        "id": "f12fbd86617caaf9",
        "type": "fan",
        "z": "63d8cb10398da04b",
        "g": "b940bf3a0df755de",
        "name": "",
        "x": 470,
        "y": 120,
        "wires": [
            [
                "981dbc2364b09d66",
                "7d12aa9a36e86798",
                "6c3e6b4543f8c9ac"
            ]
        ]
    },
    {
        "id": "1993fd8165053adf",
        "type": "link in",
        "z": "63d8cb10398da04b",
        "g": "e936dbad3fb3b587",
        "name": "lighting",
        "links": [
            "1f7aefd9b0586064"
        ],
        "x": 165,
        "y": 320,
        "wires": [
            [
                "061d8c40c8ed16ab"
            ]
        ]
    },
    {
        "id": "68ab3d466afd4596",
        "type": "subflow:38bb2b1449bd9b96",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "x": 650,
        "y": 380,
        "wires": [
            [
                "7ab1620c3349854b"
            ],
            [
                "c68369c3781694e3"
            ],
            [
                "b0ee0f2f8155fe9b"
            ],
            [
                "e270017761dfd27d"
            ],
            [
                "76d1cf6057f1e9bf"
            ]
        ]
    },
    {
        "id": "b9f7a65beebcddfe",
        "type": "fan",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "",
        "x": 470,
        "y": 320,
        "wires": [
            [
                "68ab3d466afd4596",
                "2837183323a61e04"
            ]
        ]
    },
    {
        "id": "76d1cf6057f1e9bf",
        "type": "debug",
        "z": "63d8cb10398da04b",
        "g": "73991d26373b19c7",
        "name": "yard evening",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 850,
        "y": 460,
        "wires": []
    },
    {
        "id": "cd3d6cfea67f490b",
        "type": "link out",
        "z": "a00ccef1301f21e3",
        "g": "1ccf0bc875015428",
        "name": "",
        "mode": "return",
        "links": [],
        "x": 345,
        "y": 260,
        "wires": []
    },
    {
        "id": "42d607d0bcefe3a3",
        "type": "inject",
        "z": "a00ccef1301f21e3",
        "g": "ce88172c5dbc9f67",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 60,
        "wires": [
            [
                "dde4b6e7207eaaa2"
            ]
        ]
    },
    {
        "id": "fd7babc23ade7d52",
        "type": "debug",
        "z": "a00ccef1301f21e3",
        "g": "ce88172c5dbc9f67",
        "name": "chez nous main access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload",
        "statusType": "msg",
        "x": 650,
        "y": 60,
        "wires": []
    },
    {
        "id": "dde4b6e7207eaaa2",
        "type": "subflow:75bc72a16c4da2c8",
        "z": "a00ccef1301f21e3",
        "g": "ce88172c5dbc9f67",
        "name": "Create Chez Nous Main Access Token",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.12",
                "type": "str"
            },
            {
                "name": "USERNAME",
                "value": "nodered#cheznous",
                "type": "str"
            }
        ],
        "x": 350,
        "y": 60,
        "wires": [
            [
                "fd7babc23ade7d52"
            ]
        ]
    },
    {
        "id": "a9378d8ba74f3f4f",
        "type": "link in",
        "z": "a00ccef1301f21e3",
        "g": "1ccf0bc875015428",
        "name": "send to chez nous main",
        "links": [],
        "x": 55,
        "y": 280,
        "wires": [
            [
                "6e6586249457134b"
            ]
        ],
        "outputLabels": [
            "topic = uri, payload = body, method = HTTP request type"
        ]
    },
    {
        "id": "110ffac1ab9d4035",
        "type": "subflow:acfe4e875b80c543",
        "z": "a00ccef1301f21e3",
        "g": "716a5e2d5b07383b",
        "name": "Chez Nous Main SSE",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.12",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "EhKZJjy5vLvz-3bz06K9a8MLfCaSSzR5WxSK8a-y",
                "type": "str"
            },
            {
                "name": "TOPIC",
                "value": "hue/chez-nous-main",
                "type": "str"
            }
        ],
        "x": 140,
        "y": 160,
        "wires": [
            [
                "9402de8cb82a7cb9"
            ]
        ]
    },
    {
        "id": "9402de8cb82a7cb9",
        "type": "link out",
        "z": "a00ccef1301f21e3",
        "g": "716a5e2d5b07383b",
        "name": "",
        "mode": "link",
        "links": [
            "49a3148e23e3ff94",
            "1dfaa2404fcc8cbc",
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 275,
        "y": 160,
        "wires": []
    },
    {
        "id": "c6e09ee6553c5587",
        "type": "debug",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "chez nous main",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1370,
        "y": 400,
        "wires": []
    },
    {
        "id": "6e6586249457134b",
        "type": "subflow:5785c8d9f39df67e",
        "z": "a00ccef1301f21e3",
        "g": "1ccf0bc875015428",
        "name": "Send to Chez Nous Main",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.12",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "EhKZJjy5vLvz-3bz06K9a8MLfCaSSzR5WxSK8a-y",
                "type": "str"
            }
        ],
        "x": 200,
        "y": 280,
        "wires": [
            [
                "cd3d6cfea67f490b"
            ],
            [
                "a87a245333d87177"
            ]
        ]
    },
    {
        "id": "06fb360d1605eee4",
        "type": "inject",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "method",
                "v": "GET",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "resource",
        "payload": "",
        "payloadType": "str",
        "x": 130,
        "y": 420,
        "wires": [
            [
                "5c11ca5b24ca72d8"
            ]
        ]
    },
    {
        "id": "5c11ca5b24ca72d8",
        "type": "link call",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 340,
        "y": 420,
        "wires": [
            [
                "b5ef755eebfb11fb"
            ]
        ]
    },
    {
        "id": "69a8648256e320f4",
        "type": "subflow:e4e37acec8ce8ff8",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "",
        "env": [
            {
                "name": "TOPIC",
                "value": "hue/chez-nous-main",
                "type": "str"
            },
            {
                "name": "GLOBAL",
                "value": "chez-nous-main",
                "type": "str"
            }
        ],
        "x": 770,
        "y": 420,
        "wires": [
            [
                "358804a740fed977"
            ],
            [
                "c0d1759df573b02a"
            ]
        ]
    },
    {
        "id": "c0d1759df573b02a",
        "type": "link out",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "",
        "mode": "link",
        "links": [
            "49a3148e23e3ff94",
            "1dfaa2404fcc8cbc",
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 885,
        "y": 440,
        "wires": []
    },
    {
        "id": "b5ef755eebfb11fb",
        "type": "semaphore-take",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "config": "535a2813bb8f3319",
        "name": "take chez nous main",
        "x": 570,
        "y": 420,
        "wires": [
            [
                "69a8648256e320f4"
            ]
        ]
    },
    {
        "id": "358804a740fed977",
        "type": "semaphore-leave",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "config": "535a2813bb8f3319",
        "name": "leave chez nous main",
        "x": 970,
        "y": 400,
        "wires": [
            [
                "bb32f45d1a4e196d"
            ]
        ]
    },
    {
        "id": "9a4ad6cbad7170d7",
        "type": "catch",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "",
        "scope": [
            "69a8648256e320f4"
        ],
        "uncaught": false,
        "x": 90,
        "y": 500,
        "wires": [
            [
                "0a7975b261bc92b0"
            ]
        ]
    },
    {
        "id": "0a7975b261bc92b0",
        "type": "semaphore-leave",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "config": "535a2813bb8f3319",
        "name": "leave chez nous main",
        "x": 260,
        "y": 500,
        "wires": [
            [
                "b879dc87b86093fc"
            ]
        ]
    },
    {
        "id": "b879dc87b86093fc",
        "type": "debug",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "chez nous main metadata",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 490,
        "y": 500,
        "wires": []
    },
    {
        "id": "a87a245333d87177",
        "type": "debug",
        "z": "a00ccef1301f21e3",
        "g": "1ccf0bc875015428",
        "name": "chez nous main send",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 430,
        "y": 300,
        "wires": []
    },
    {
        "id": "bb32f45d1a4e196d",
        "type": "subflow:764913cd47ccb672",
        "z": "a00ccef1301f21e3",
        "g": "41cef0af2772c23a",
        "name": "",
        "env": [
            {
                "name": "GLOBAL",
                "value": "chez-nous-main",
                "type": "str"
            }
        ],
        "x": 1180,
        "y": 400,
        "wires": [
            [
                "c6e09ee6553c5587"
            ]
        ]
    },
    {
        "id": "646c1166e094edb8",
        "type": "inject",
        "z": "ccf1967ecbc089aa",
        "g": "d596f90a11f948b5",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 60,
        "wires": [
            [
                "528ecfb852f1b92e"
            ]
        ]
    },
    {
        "id": "dfe3c5cff4adfbe1",
        "type": "debug",
        "z": "ccf1967ecbc089aa",
        "g": "d596f90a11f948b5",
        "name": "basement hue access token",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "payload[0].success.username",
        "statusType": "msg",
        "x": 580,
        "y": 60,
        "wires": []
    },
    {
        "id": "528ecfb852f1b92e",
        "type": "subflow:75bc72a16c4da2c8",
        "z": "ccf1967ecbc089aa",
        "g": "d596f90a11f948b5",
        "name": "Basement Hue Access Token",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.34",
                "type": "str"
            },
            {
                "name": "USERNAME",
                "value": "nodered#cheznous",
                "type": "str"
            }
        ],
        "x": 320,
        "y": 60,
        "wires": [
            [
                "dfe3c5cff4adfbe1"
            ]
        ]
    },
    {
        "id": "726b4d347f62a02d",
        "type": "link out",
        "z": "ccf1967ecbc089aa",
        "g": "d906806776a15be5",
        "name": "",
        "mode": "return",
        "links": [],
        "x": 345,
        "y": 260,
        "wires": []
    },
    {
        "id": "befc9498e0e538c3",
        "type": "link in",
        "z": "ccf1967ecbc089aa",
        "g": "d906806776a15be5",
        "name": "send to basement hue",
        "links": [],
        "x": 55,
        "y": 280,
        "wires": [
            [
                "1c27f4a9b46c4f7d"
            ]
        ],
        "outputLabels": [
            "topic = uri, payload = body, method = HTTP request type"
        ]
    },
    {
        "id": "1c27f4a9b46c4f7d",
        "type": "subflow:5785c8d9f39df67e",
        "z": "ccf1967ecbc089aa",
        "g": "d906806776a15be5",
        "name": "Send to Basement Hue",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.34",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "-6ay0JIz8Kd1PV00yBYQ75bo6hlVBN2mopvXnrNa",
                "type": "str"
            }
        ],
        "x": 200,
        "y": 280,
        "wires": [
            [
                "726b4d347f62a02d"
            ],
            [
                "3dd9a3ccf38d705a"
            ]
        ]
    },
    {
        "id": "3dd9a3ccf38d705a",
        "type": "debug",
        "z": "ccf1967ecbc089aa",
        "g": "d906806776a15be5",
        "name": "basement hue send",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 420,
        "y": 300,
        "wires": []
    },
    {
        "id": "023068eedd0bb4cc",
        "type": "subflow:acfe4e875b80c543",
        "z": "ccf1967ecbc089aa",
        "g": "80d5524b4b86d1df",
        "name": "Basement Hue SSE",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.34",
                "type": "str"
            },
            {
                "name": "KEY",
                "value": "-6ay0JIz8Kd1PV00yBYQ75bo6hlVBN2mopvXnrNa",
                "type": "str"
            },
            {
                "name": "TOPIC",
                "value": "hue/basement-hue",
                "type": "str"
            }
        ],
        "x": 130,
        "y": 160,
        "wires": [
            [
                "15164c46a7616484"
            ]
        ]
    },
    {
        "id": "15164c46a7616484",
        "type": "link out",
        "z": "ccf1967ecbc089aa",
        "g": "80d5524b4b86d1df",
        "name": "",
        "mode": "link",
        "links": [
            "49a3148e23e3ff94",
            "1dfaa2404fcc8cbc",
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 255,
        "y": 160,
        "wires": []
    },
    {
        "id": "4828d97867b2ea95",
        "type": "debug",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "basement hue",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1340,
        "y": 400,
        "wires": []
    },
    {
        "id": "83db9630b63b06ef",
        "type": "inject",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "method",
                "v": "GET",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "20",
        "topic": "resource",
        "payload": "",
        "payloadType": "str",
        "x": 130,
        "y": 420,
        "wires": [
            [
                "4a9fc38baa50aaaf"
            ]
        ]
    },
    {
        "id": "4a9fc38baa50aaaf",
        "type": "link call",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "",
        "links": [
            "befc9498e0e538c3"
        ],
        "timeout": "30",
        "x": 330,
        "y": 420,
        "wires": [
            [
                "9ad2fe3514535451"
            ]
        ]
    },
    {
        "id": "34d791c69d030139",
        "type": "subflow:e4e37acec8ce8ff8",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "",
        "env": [
            {
                "name": "TOPIC",
                "value": "hue/basement-hue",
                "type": "str"
            },
            {
                "name": "GLOBAL",
                "value": "basement-hue",
                "type": "str"
            }
        ],
        "x": 740,
        "y": 420,
        "wires": [
            [
                "d1d040779b99fb0a"
            ],
            [
                "bb63b6666fb34d48"
            ]
        ]
    },
    {
        "id": "bb63b6666fb34d48",
        "type": "link out",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "",
        "mode": "link",
        "links": [
            "49a3148e23e3ff94",
            "1dfaa2404fcc8cbc",
            "8510638dbc5dd48c",
            "f495f33164cc7b42",
            "30286901101a6095"
        ],
        "x": 855,
        "y": 440,
        "wires": []
    },
    {
        "id": "9ad2fe3514535451",
        "type": "semaphore-take",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "config": "739cc6382b87f23e",
        "name": "take basement hue",
        "x": 540,
        "y": 420,
        "wires": [
            [
                "34d791c69d030139"
            ]
        ]
    },
    {
        "id": "d1d040779b99fb0a",
        "type": "semaphore-leave",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "config": "739cc6382b87f23e",
        "name": "leave basement hue",
        "x": 940,
        "y": 400,
        "wires": [
            [
                "ef6a6e44d928aace"
            ]
        ]
    },
    {
        "id": "74f5393b9872d6a3",
        "type": "debug",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "basement hue metadata",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.message",
        "statusType": "msg",
        "x": 490,
        "y": 500,
        "wires": []
    },
    {
        "id": "ef6a6e44d928aace",
        "type": "subflow:764913cd47ccb672",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "",
        "env": [
            {
                "name": "GLOBAL",
                "value": "basement-hue",
                "type": "str"
            }
        ],
        "x": 1150,
        "y": 400,
        "wires": [
            [
                "4828d97867b2ea95"
            ]
        ]
    },
    {
        "id": "3021b1bb30da53b0",
        "type": "semaphore-leave",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "config": "739cc6382b87f23e",
        "name": "leave basement hue",
        "x": 260,
        "y": 500,
        "wires": [
            [
                "74f5393b9872d6a3"
            ]
        ]
    },
    {
        "id": "14c5c6675b345fe3",
        "type": "catch",
        "z": "ccf1967ecbc089aa",
        "g": "a72897abb2ba46cf",
        "name": "",
        "scope": [
            "34d791c69d030139"
        ],
        "uncaught": false,
        "x": 90,
        "y": 500,
        "wires": [
            [
                "3021b1bb30da53b0"
            ]
        ]
    },
    {
        "id": "577c54a2be0d38c9",
        "type": "subflow:c930ca19d66e430d",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 330,
        "y": 60,
        "wires": [
            [
                "fac99573a09374b0"
            ],
            []
        ]
    },
    {
        "id": "67d809df8ea595ac",
        "type": "join",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "3",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 610,
        "y": 60,
        "wires": [
            [
                "536874de79956f84"
            ]
        ]
    },
    {
        "id": "536874de79956f84",
        "type": "subflow:1a6413355bbb49cc",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 770,
        "y": 60,
        "wires": [
            [
                "986a93941fd0726d"
            ],
            []
        ]
    },
    {
        "id": "fac99573a09374b0",
        "type": "switch",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "jsonata_exp",
                "v": "payload.name = 'Living Room' or payload.name = 'Dining Room' or payload.name = 'Default Room'",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 60,
        "wires": [
            [
                "67d809df8ea595ac"
            ]
        ]
    },
    {
        "id": "ff97f036e34831b8",
        "type": "subflow:9c4e4702e4660adf",
        "z": "1cf0490e7de2f93d",
        "g": "c49a717c63369963",
        "name": "",
        "env": [
            {
                "name": "ADDRESS",
                "value": "192.168.1.30",
                "type": "str"
            }
        ],
        "x": 220,
        "y": 380,
        "wires": [
            [
                "db81cf75a2ca1776"
            ],
            []
        ]
    },
    {
        "id": "03385520953758c9",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "c49a717c63369963",
        "name": "activate powerview scene",
        "links": [],
        "x": 85,
        "y": 380,
        "wires": [
            [
                "ff97f036e34831b8"
            ]
        ]
    },
    {
        "id": "db81cf75a2ca1776",
        "type": "link out",
        "z": "1cf0490e7de2f93d",
        "g": "c49a717c63369963",
        "name": "",
        "mode": "return",
        "links": [],
        "x": 355,
        "y": 380,
        "wires": []
    },
    {
        "id": "986a93941fd0726d",
        "type": "join",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "mode": "auto",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": "false",
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "x": 930,
        "y": 60,
        "wires": [
            [
                "1cee4f351bd59563"
            ]
        ]
    },
    {
        "id": "1cee4f351bd59563",
        "type": "debug",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "powerview scenes",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1090,
        "y": 60,
        "wires": []
    },
    {
        "id": "cae953f2c04362ad",
        "type": "inject",
        "z": "1cf0490e7de2f93d",
        "g": "cccd3d3ae4af3207",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 60,
        "wires": [
            [
                "577c54a2be0d38c9"
            ]
        ]
    },
    {
        "id": "3c70a7443900cb3f",
        "type": "link call",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "links": [
            "03385520953758c9"
        ],
        "timeout": "30",
        "x": 910,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "0514602b711a8136",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "window shade automation",
        "links": [
            "1f7aefd9b0586064"
        ],
        "x": 185,
        "y": 240,
        "wires": [
            [
                "48bae5dfd9e5eceb"
            ]
        ]
    },
    {
        "id": "7a1f5cbf9b84c489",
        "type": "subflow:88644a5a56fdab5e",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "x": 700,
        "y": 240,
        "wires": [
            [
                "3c70a7443900cb3f"
            ]
        ]
    },
    {
        "id": "6a01fdc18127e8e9",
        "type": "link in",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "window shade bedtime",
        "links": [
            "cf7f0464e17fe251"
        ],
        "x": 325,
        "y": 280,
        "wires": [
            [
                "2ab3e93641907bc5"
            ]
        ]
    },
    {
        "id": "48bae5dfd9e5eceb",
        "type": "change",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "trigger",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "trigger",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "2ab3e93641907bc5"
            ]
        ]
    },
    {
        "id": "eece269a0f652f42",
        "type": "inject",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "morning",
        "payloadType": "str",
        "x": 140,
        "y": 160,
        "wires": [
            [
                "48bae5dfd9e5eceb"
            ]
        ]
    },
    {
        "id": "2ab3e93641907bc5",
        "type": "subflow:e467d9c73202b5bf",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "x": 490,
        "y": 240,
        "wires": [
            [
                "7a1f5cbf9b84c489"
            ]
        ]
    },
    {
        "id": "8c4fab16172ba280",
        "type": "inject",
        "z": "1cf0490e7de2f93d",
        "g": "2afac67683a580f7",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "night",
        "payloadType": "str",
        "x": 150,
        "y": 200,
        "wires": [
            [
                "48bae5dfd9e5eceb"
            ]
        ]
    },
    {
        "id": "e74fcadba6a2b4ca",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "main bathroom off",
        "links": [
            "e696e0a2acb678c2",
            "f597e3f10639062f",
            "ce589288779cef4a",
            "981dbc2364b09d66"
        ],
        "x": 175,
        "y": 260,
        "wires": [
            [
                "4288f4e0d18dbff6"
            ]
        ]
    },
    {
        "id": "4288f4e0d18dbff6",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "turn off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/aea74e74-d544-4d08-ad71-3b6665045256",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 240,
        "wires": [
            [
                "d79164592fe44617"
            ]
        ]
    },
    {
        "id": "d79164592fe44617",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 450,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "fbd53f7f18ca6655",
        "type": "link in",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "main bathroom nightlight",
        "links": [
            "1fa973a7d8e65e3c",
            "549a2335fb839c37"
        ],
        "x": 175,
        "y": 120,
        "wires": [
            [
                "26ad3b6fd956be59"
            ]
        ]
    },
    {
        "id": "a4c3ecea47eed101",
        "type": "link call",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 460,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "26ad3b6fd956be59",
        "type": "change",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "night light",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/5d507fb6-89f6-459a-b327-0fffd0c6dc48",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 100,
        "wires": [
            [
                "a4c3ecea47eed101"
            ]
        ]
    },
    {
        "id": "6d42b6ceb063165f",
        "type": "inject",
        "z": "1344247d533f754a",
        "g": "5a2c18585609cfae",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "26ad3b6fd956be59"
            ]
        ]
    },
    {
        "id": "744875d6afbd2253",
        "type": "inject",
        "z": "1344247d533f754a",
        "g": "96bfb32777af9e2c",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 220,
        "wires": [
            [
                "4288f4e0d18dbff6"
            ]
        ]
    },
    {
        "id": "07ccb0b07e6fada8",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "upstairs off",
        "links": [
            "a0432bc469c97be7",
            "88398e263f6df2d0",
            "7d12aa9a36e86798"
        ],
        "x": 205,
        "y": 160,
        "wires": [
            [
                "4baea86ab327a4b9"
            ]
        ]
    },
    {
        "id": "3ed1a4d37d1548b4",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "upstairs nightlight",
        "links": [
            "f455df4aef69f558",
            "ae9f9aeb54f6cfb1"
        ],
        "x": 205,
        "y": 520,
        "wires": [
            [
                "7b10a17dd5bc4c0f"
            ]
        ]
    },
    {
        "id": "53509cbc2f897eb4",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 1070,
        "y": 480,
        "wires": [
            [
                "cf3d3a3da0c079db"
            ]
        ]
    },
    {
        "id": "3fd4ceb10de1cfab",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 1050,
        "y": 300,
        "wires": [
            [
                "f91a88d8cf38b464"
            ]
        ]
    },
    {
        "id": "7b10a17dd5bc4c0f",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 480,
        "wires": [
            [
                "75718c47ae5aab65"
            ]
        ]
    },
    {
        "id": "7519f356aef82889",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 300,
        "wires": [
            [
                "6e235cc35896e53f"
            ]
        ]
    },
    {
        "id": "4104b520ce069209",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "upstairs bright",
        "links": [],
        "x": 205,
        "y": 340,
        "wires": [
            [
                "7519f356aef82889"
            ]
        ]
    },
    {
        "id": "6cae9b1ccc68cb9e",
        "type": "link in",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "upstairs sunset",
        "links": [
            "2837183323a61e04"
        ],
        "x": 205,
        "y": 700,
        "wires": [
            [
                "edc2f01358673517"
            ]
        ]
    },
    {
        "id": "8ae7ee0c87df1191",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 1070,
        "y": 660,
        "wires": [
            [
                "4dfc07b3a5a352ec"
            ]
        ]
    },
    {
        "id": "edc2f01358673517",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 660,
        "wires": [
            [
                "460cb90e2fef9ac5"
            ]
        ]
    },
    {
        "id": "e1b2c4c65a54e028",
        "type": "subflow:be3fb84e6a4c7720",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "main-floor-off",
        "env": [
            {
                "name": "GET",
                "value": "homebridge/main-floor-off/get/on",
                "type": "str"
            },
            {
                "name": "SET",
                "value": "homebridge/main-floor-off/set/on",
                "type": "str"
            }
        ],
        "x": 510,
        "y": 120,
        "wires": [
            [
                "6e689aadd1f722a9"
            ],
            [
                "2efdae9d98c90cf9"
            ],
            [
                "0b9ce30f50e82911"
            ]
        ]
    },
    {
        "id": "ec1b9da9a2a0dde0",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/9c1c7975-2f47-4552-bac8-c19b643cd678",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 810,
        "y": 120,
        "wires": [
            [
                "33533dc0ac4ff870"
            ]
        ]
    },
    {
        "id": "33533dc0ac4ff870",
        "type": "link call",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 1020,
        "y": 120,
        "wires": [
            [
                "955cc461db6d2ee1"
            ]
        ]
    },
    {
        "id": "6e689aadd1f722a9",
        "type": "link out",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "mode": "link",
        "links": [
            "30286901101a6095"
        ],
        "x": 625,
        "y": 80,
        "wires": []
    },
    {
        "id": "0b9ce30f50e82911",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.messsage",
        "statusType": "msg",
        "x": 660,
        "y": 160,
        "wires": []
    },
    {
        "id": "4baea86ab327a4b9",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 340,
        "y": 120,
        "wires": [
            [
                "e1b2c4c65a54e028"
            ]
        ]
    },
    {
        "id": "2efdae9d98c90cf9",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 660,
        "y": 120,
        "wires": [
            [
                "ec1b9da9a2a0dde0"
            ]
        ]
    },
    {
        "id": "955cc461db6d2ee1",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1200,
        "y": 120,
        "wires": []
    },
    {
        "id": "cdfe4f6ec3551a19",
        "type": "inject",
        "z": "e44149a93fbe9b1b",
        "g": "1ce03cecd5db8bc6",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 80,
        "wires": [
            [
                "4baea86ab327a4b9"
            ]
        ]
    },
    {
        "id": "c24b271f1c0a013a",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/8c5f011c-bc6f-49a8-8d82-9d1db302c87c",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 840,
        "y": 300,
        "wires": [
            [
                "3fd4ceb10de1cfab"
            ]
        ]
    },
    {
        "id": "6e235cc35896e53f",
        "type": "subflow:be3fb84e6a4c7720",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "main-floor-bright",
        "env": [
            {
                "name": "GET",
                "value": "homebridge/main-floor-bright/get/on",
                "type": "str"
            },
            {
                "name": "SET",
                "value": "homebridge/main-floor-bright/set/on",
                "type": "str"
            }
        ],
        "x": 520,
        "y": 300,
        "wires": [
            [
                "673aef6e72d03b7b"
            ],
            [
                "5b9644b03821362f"
            ],
            [
                "280e11df2383a1be"
            ]
        ]
    },
    {
        "id": "d7de78cf904fbc6a",
        "type": "inject",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 260,
        "wires": [
            [
                "7519f356aef82889"
            ]
        ]
    },
    {
        "id": "5b9644b03821362f",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 300,
        "wires": [
            [
                "c24b271f1c0a013a"
            ]
        ]
    },
    {
        "id": "f91a88d8cf38b464",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1230,
        "y": 300,
        "wires": []
    },
    {
        "id": "673aef6e72d03b7b",
        "type": "link out",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "mode": "link",
        "links": [
            "30286901101a6095"
        ],
        "x": 655,
        "y": 260,
        "wires": []
    },
    {
        "id": "280e11df2383a1be",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "83a2d6e5f2f3347b",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.messsage",
        "statusType": "msg",
        "x": 690,
        "y": 340,
        "wires": []
    },
    {
        "id": "1462dac4d5543f0a",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/48c39b9f-1599-4a5c-b7f6-bad6cad4029a",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"active\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 480,
        "wires": [
            [
                "53509cbc2f897eb4"
            ]
        ]
    },
    {
        "id": "c4ad8310f9a121b0",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 710,
        "y": 480,
        "wires": [
            [
                "1462dac4d5543f0a"
            ]
        ]
    },
    {
        "id": "75718c47ae5aab65",
        "type": "subflow:be3fb84e6a4c7720",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "main-floor-nightlight",
        "env": [
            {
                "name": "GET",
                "value": "homebridge/main-floor-nightlight/get/on",
                "type": "str"
            },
            {
                "name": "SET",
                "value": "homebridge/main-floor-nightlight/set/on",
                "type": "str"
            }
        ],
        "x": 530,
        "y": 480,
        "wires": [
            [
                "81b0e480955e02c8"
            ],
            [
                "c4ad8310f9a121b0"
            ],
            [
                "59700d692d2c3561"
            ]
        ]
    },
    {
        "id": "2becbd293c0348ad",
        "type": "inject",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 440,
        "wires": [
            [
                "7b10a17dd5bc4c0f"
            ]
        ]
    },
    {
        "id": "cf3d3a3da0c079db",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1250,
        "y": 480,
        "wires": []
    },
    {
        "id": "81b0e480955e02c8",
        "type": "link out",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "mode": "link",
        "links": [
            "30286901101a6095"
        ],
        "x": 675,
        "y": 440,
        "wires": []
    },
    {
        "id": "59700d692d2c3561",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "3483ce20c1996e6c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.messsage",
        "statusType": "msg",
        "x": 710,
        "y": 520,
        "wires": []
    },
    {
        "id": "76f3eb6c53a0310c",
        "type": "change",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/scene/6eff0801-01e2-4803-9840-e31c06cee079",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 660,
        "wires": [
            [
                "8ae7ee0c87df1191"
            ]
        ]
    },
    {
        "id": "4dfc07b3a5a352ec",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "statusCode",
        "statusType": "msg",
        "x": 1250,
        "y": 660,
        "wires": []
    },
    {
        "id": "66b239fbae02c252",
        "type": "switch",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 710,
        "y": 660,
        "wires": [
            [
                "76f3eb6c53a0310c"
            ]
        ]
    },
    {
        "id": "460cb90e2fef9ac5",
        "type": "subflow:be3fb84e6a4c7720",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "main-floor-sunset",
        "env": [
            {
                "name": "GET",
                "value": "homebridge/main-floor-sunset/get/on",
                "type": "str"
            },
            {
                "name": "SET",
                "value": "homebridge/main-floor-sunset/set/on",
                "type": "str"
            }
        ],
        "x": 530,
        "y": 660,
        "wires": [
            [
                "75b7b97213341620"
            ],
            [
                "66b239fbae02c252"
            ],
            [
                "943ad59722b07bd3"
            ]
        ]
    },
    {
        "id": "c5035f88195b0a8e",
        "type": "inject",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 620,
        "wires": [
            [
                "edc2f01358673517"
            ]
        ]
    },
    {
        "id": "75b7b97213341620",
        "type": "link out",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "mode": "link",
        "links": [
            "30286901101a6095"
        ],
        "x": 675,
        "y": 620,
        "wires": []
    },
    {
        "id": "943ad59722b07bd3",
        "type": "debug",
        "z": "e44149a93fbe9b1b",
        "g": "e1fa765ec5a5ebd7",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "true",
        "targetType": "full",
        "statusVal": "error.messsage",
        "statusType": "msg",
        "x": 710,
        "y": 700,
        "wires": []
    },
    {
        "id": "e2139e7bb021147f",
        "type": "homekit-service",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "isParent": true,
        "hostType": "1",
        "bridge": "",
        "accessoryId": "9baaf509ad48bed9",
        "parentService": "",
        "name": "Yard Dynamic Sunset",
        "serviceName": "Switch",
        "topic": "",
        "filter": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "001",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "cameraConfigVideoProcessor": "ffmpeg",
        "cameraConfigSource": "",
        "cameraConfigStillImageSource": "",
        "cameraConfigMaxStreams": 2,
        "cameraConfigMaxWidth": 1280,
        "cameraConfigMaxHeight": 720,
        "cameraConfigMaxFPS": 10,
        "cameraConfigMaxBitrate": 300,
        "cameraConfigVideoCodec": "libx264",
        "cameraConfigAudioCodec": "libfdk_aac",
        "cameraConfigAudio": false,
        "cameraConfigPacketSize": 1316,
        "cameraConfigVerticalFlip": false,
        "cameraConfigHorizontalFlip": false,
        "cameraConfigMapVideo": "0:0",
        "cameraConfigMapAudio": "0:1",
        "cameraConfigVideoFilter": "scale=1280:720",
        "cameraConfigAdditionalCommandLine": "-tune zerolatency",
        "cameraConfigDebug": false,
        "cameraConfigSnapshotOutput": "disabled",
        "cameraConfigInterfaceName": "",
        "characteristicProperties": "{}",
        "waitForSetupMsg": false,
        "outputs": 2,
        "x": 460,
        "y": 240,
        "wires": [
            [
                "0bdc1e921a0eafd6"
            ],
            []
        ]
    },
    {
        "id": "af712bf4ec4004b4",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 830,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "ca1e17d731e4816a",
        "type": "homekit-service",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "isParent": true,
        "hostType": "1",
        "bridge": "",
        "accessoryId": "3530c15956a26d05",
        "parentService": "",
        "name": "Yard Dynamic Jolly",
        "serviceName": "Switch",
        "topic": "",
        "filter": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "002",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "cameraConfigVideoProcessor": "ffmpeg",
        "cameraConfigSource": "",
        "cameraConfigStillImageSource": "",
        "cameraConfigMaxStreams": 2,
        "cameraConfigMaxWidth": 1280,
        "cameraConfigMaxHeight": 720,
        "cameraConfigMaxFPS": 10,
        "cameraConfigMaxBitrate": 300,
        "cameraConfigVideoCodec": "libx264",
        "cameraConfigAudioCodec": "libfdk_aac",
        "cameraConfigAudio": false,
        "cameraConfigPacketSize": 1316,
        "cameraConfigVerticalFlip": false,
        "cameraConfigHorizontalFlip": false,
        "cameraConfigMapVideo": "0:0",
        "cameraConfigMapAudio": "0:1",
        "cameraConfigVideoFilter": "scale=1280:720",
        "cameraConfigAdditionalCommandLine": "-tune zerolatency",
        "cameraConfigDebug": false,
        "cameraConfigSnapshotOutput": "disabled",
        "cameraConfigInterfaceName": "",
        "characteristicProperties": "{}",
        "waitForSetupMsg": false,
        "outputs": 2,
        "x": 450,
        "y": 380,
        "wires": [
            [
                "af85ec2f67fb223d"
            ],
            []
        ]
    },
    {
        "id": "074874e0ff13a7b1",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 810,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "61d42601aace19ae",
        "type": "homekit-service",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "isParent": true,
        "hostType": "1",
        "bridge": "",
        "accessoryId": "b1e430888ffe3cb4",
        "parentService": "",
        "name": "Yard Dynamic Spooky",
        "serviceName": "Switch",
        "topic": "",
        "filter": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "003",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "cameraConfigVideoProcessor": "ffmpeg",
        "cameraConfigSource": "",
        "cameraConfigStillImageSource": "",
        "cameraConfigMaxStreams": 2,
        "cameraConfigMaxWidth": 1280,
        "cameraConfigMaxHeight": 720,
        "cameraConfigMaxFPS": 10,
        "cameraConfigMaxBitrate": 300,
        "cameraConfigVideoCodec": "libx264",
        "cameraConfigAudioCodec": "libfdk_aac",
        "cameraConfigAudio": false,
        "cameraConfigPacketSize": 1316,
        "cameraConfigVerticalFlip": false,
        "cameraConfigHorizontalFlip": false,
        "cameraConfigMapVideo": "0:0",
        "cameraConfigMapAudio": "0:1",
        "cameraConfigVideoFilter": "scale=1280:720",
        "cameraConfigAdditionalCommandLine": "-tune zerolatency",
        "cameraConfigDebug": false,
        "cameraConfigSnapshotOutput": "disabled",
        "cameraConfigInterfaceName": "",
        "characteristicProperties": "{}",
        "waitForSetupMsg": false,
        "outputs": 2,
        "x": 460,
        "y": 520,
        "wires": [
            [
                "241098d9131aaff5"
            ],
            []
        ]
    },
    {
        "id": "3dc20d8212996ca2",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 830,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "0bdc1e921a0eafd6",
        "type": "subflow:a03a3519abf4e656",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "auto-off",
        "env": [
            {
                "name": "URI",
                "value": "resource/scene/9b6935e2-f8ed-4f91-83a2-2bff1850da99",
                "type": "str"
            },
            {
                "name": "PAYLOAD",
                "value": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "type": "json"
            },
            {
                "name": "GROUPED_LIGHT_ID",
                "value": "9b6935e2-f8ed-4f91-83a2-2bff1850da99",
                "type": "str"
            },
            {
                "name": "SCENE_ID",
                "value": "9b6935e2-f8ed-4f91-83a2-2bff1850da99",
                "type": "str"
            }
        ],
        "x": 640,
        "y": 240,
        "wires": [
            [
                "af712bf4ec4004b4"
            ],
            [
                "fb7fed76720fc92b"
            ]
        ]
    },
    {
        "id": "b33691546f7f459a",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "yard sunset auto-off",
        "links": [
            "fb7fed76720fc92b"
        ],
        "x": 325,
        "y": 260,
        "wires": [
            [
                "e2139e7bb021147f"
            ]
        ]
    },
    {
        "id": "fb7fed76720fc92b",
        "type": "link out",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "mode": "link",
        "links": [
            "b33691546f7f459a"
        ],
        "x": 735,
        "y": 260,
        "wires": []
    },
    {
        "id": "af85ec2f67fb223d",
        "type": "subflow:a03a3519abf4e656",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "auto-off",
        "env": [
            {
                "name": "URI",
                "value": "resource/scene/12571f23-7714-4b47-8e75-a3040389b788",
                "type": "str"
            },
            {
                "name": "PAYLOAD",
                "value": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "type": "json"
            },
            {
                "name": "SCENE_ID",
                "value": "12571f23-7714-4b47-8e75-a3040389b788",
                "type": "str"
            }
        ],
        "x": 620,
        "y": 380,
        "wires": [
            [
                "074874e0ff13a7b1"
            ],
            [
                "a5ed6c2a7a6ecc4b"
            ]
        ]
    },
    {
        "id": "edbb89b1218fdd21",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "yard jolly auto-off",
        "links": [
            "a5ed6c2a7a6ecc4b"
        ],
        "x": 325,
        "y": 400,
        "wires": [
            [
                "ca1e17d731e4816a"
            ]
        ]
    },
    {
        "id": "a5ed6c2a7a6ecc4b",
        "type": "link out",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "mode": "link",
        "links": [
            "edbb89b1218fdd21"
        ],
        "x": 715,
        "y": 400,
        "wires": []
    },
    {
        "id": "241098d9131aaff5",
        "type": "subflow:a03a3519abf4e656",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "name": "auto-off",
        "env": [
            {
                "name": "URI",
                "value": "resource/scene/70a0a8a6-b4b7-4b24-a9cf-0ecea0f359cc",
                "type": "str"
            },
            {
                "name": "PAYLOAD",
                "value": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "type": "json"
            },
            {
                "name": "SCENE_ID",
                "value": "70a0a8a6-b4b7-4b24-a9cf-0ecea0f359cc",
                "type": "str"
            }
        ],
        "x": 640,
        "y": 520,
        "wires": [
            [
                "3dc20d8212996ca2"
            ],
            [
                "58da5eea28596fe8"
            ]
        ]
    },
    {
        "id": "58da5eea28596fe8",
        "type": "link out",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "name": "",
        "mode": "link",
        "links": [
            "44286bc52974ad2c"
        ],
        "x": 735,
        "y": 540,
        "wires": []
    },
    {
        "id": "44286bc52974ad2c",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "name": "yard spooky auto-off",
        "links": [
            "58da5eea28596fe8"
        ],
        "x": 325,
        "y": 540,
        "wires": [
            [
                "61d42601aace19ae"
            ]
        ]
    },
    {
        "id": "5fed7c286b1b64b0",
        "type": "homekit-service",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "isParent": true,
        "hostType": "1",
        "bridge": "",
        "accessoryId": "90af3b55ec091c59",
        "parentService": "",
        "name": "Yard Dynamic Tribal",
        "serviceName": "Switch",
        "topic": "",
        "filter": false,
        "manufacturer": "RADER",
        "model": "1.4.3",
        "serialNo": "003",
        "firmwareRev": "1.4.3",
        "hardwareRev": "1.4.3",
        "softwareRev": "1.4.3",
        "cameraConfigVideoProcessor": "ffmpeg",
        "cameraConfigSource": "",
        "cameraConfigStillImageSource": "",
        "cameraConfigMaxStreams": 2,
        "cameraConfigMaxWidth": 1280,
        "cameraConfigMaxHeight": 720,
        "cameraConfigMaxFPS": 10,
        "cameraConfigMaxBitrate": 300,
        "cameraConfigVideoCodec": "libx264",
        "cameraConfigAudioCodec": "libfdk_aac",
        "cameraConfigAudio": false,
        "cameraConfigPacketSize": 1316,
        "cameraConfigVerticalFlip": false,
        "cameraConfigHorizontalFlip": false,
        "cameraConfigMapVideo": "0:0",
        "cameraConfigMapAudio": "0:1",
        "cameraConfigVideoFilter": "scale=1280:720",
        "cameraConfigAdditionalCommandLine": "-tune zerolatency",
        "cameraConfigDebug": false,
        "cameraConfigSnapshotOutput": "disabled",
        "cameraConfigInterfaceName": "",
        "characteristicProperties": "{}",
        "waitForSetupMsg": false,
        "outputs": 2,
        "x": 460,
        "y": 660,
        "wires": [
            [
                "e3399cac6bef15a2"
            ],
            []
        ]
    },
    {
        "id": "f52db1057ce1acdf",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 830,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "e3399cac6bef15a2",
        "type": "subflow:a03a3519abf4e656",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "name": "auto-off",
        "env": [
            {
                "name": "URI",
                "value": "resource/scene/c4681d32-3368-43cd-9cf1-436132521068",
                "type": "str"
            },
            {
                "name": "PAYLOAD",
                "value": "{\"recall\":{\"action\":\"dynamic_palette\"}}",
                "type": "json"
            },
            {
                "name": "SCENE_ID",
                "value": "c4681d32-3368-43cd-9cf1-436132521068",
                "type": "str"
            }
        ],
        "x": 640,
        "y": 660,
        "wires": [
            [
                "f52db1057ce1acdf"
            ],
            [
                "1b86868f195f85f4"
            ]
        ]
    },
    {
        "id": "1b86868f195f85f4",
        "type": "link out",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "name": "",
        "mode": "link",
        "links": [
            "1e9eea60806a6dc1"
        ],
        "x": 735,
        "y": 680,
        "wires": []
    },
    {
        "id": "1e9eea60806a6dc1",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "name": "yard tribal auto-off",
        "links": [
            "1b86868f195f85f4"
        ],
        "x": 325,
        "y": 680,
        "wires": [
            [
                "5fed7c286b1b64b0"
            ]
        ]
    },
    {
        "id": "18f53b7627e645e4",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "yard sunset",
        "links": [
            "e270017761dfd27d"
        ],
        "x": 145,
        "y": 220,
        "wires": [
            [
                "b22f3931c3a7aaa9"
            ]
        ]
    },
    {
        "id": "b22f3931c3a7aaa9",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "ea7b9754db9fd0cd",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"On\":true}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 220,
        "wires": [
            [
                "e2139e7bb021147f"
            ]
        ]
    },
    {
        "id": "60976d31a8dafe99",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "yard jolly",
        "links": [
            "b0ee0f2f8155fe9b"
        ],
        "x": 145,
        "y": 360,
        "wires": [
            [
                "a5ea4f7eb61a9136"
            ]
        ]
    },
    {
        "id": "a5ea4f7eb61a9136",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "afbdc8b60c682c85",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"On\":true}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 360,
        "wires": [
            [
                "ca1e17d731e4816a"
            ]
        ]
    },
    {
        "id": "54e2411e6d2fa497",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"On\":true}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 500,
        "wires": [
            [
                "61d42601aace19ae"
            ]
        ]
    },
    {
        "id": "cc9a7b174ce21d63",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "03822925b892df4a",
        "name": "yard spooky",
        "links": [
            "c68369c3781694e3"
        ],
        "x": 145,
        "y": 500,
        "wires": [
            [
                "54e2411e6d2fa497"
            ]
        ]
    },
    {
        "id": "3a372efc2402f538",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"On\":true}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 260,
        "y": 640,
        "wires": [
            [
                "5fed7c286b1b64b0"
            ]
        ]
    },
    {
        "id": "04ad8639f667bd76",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "7872f889f870b7ea",
        "name": "yard tribal",
        "links": [
            "7ab1620c3349854b"
        ],
        "x": 145,
        "y": 640,
        "wires": [
            [
                "3a372efc2402f538"
            ]
        ]
    },
    {
        "id": "ec4c4a28a59d105e",
        "type": "link in",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "yard off",
        "links": [
            "6c3e6b4543f8c9ac",
            "8e8390b13cc5c45b"
        ],
        "x": 235,
        "y": 120,
        "wires": [
            [
                "fb388fbfb4e38ca3"
            ]
        ]
    },
    {
        "id": "fb388fbfb4e38ca3",
        "type": "change",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "turn off",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"on\":{\"on\":false}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "resource/grouped_light/bad8480b-b404-42d1-a9e7-a4a69f400971",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "method",
                "pt": "msg",
                "to": "PUT",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 100,
        "wires": [
            [
                "dc1d9849661717f1"
            ]
        ]
    },
    {
        "id": "dc1d9849661717f1",
        "type": "link call",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "",
        "links": [
            "a9378d8ba74f3f4f"
        ],
        "timeout": "30",
        "x": 500,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "1c30eff0cb020362",
        "type": "inject",
        "z": "adfd8ae4a2eaf844",
        "g": "2238e89a8f0c976d",
        "name": "test",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 80,
        "wires": [
            [
                "fb388fbfb4e38ca3"
            ]
        ]
    }
]